var requirejs,require,define;!function(ha){function L(e){return"[object Function]"===R.call(e)}function M(e){return"[object Array]"===R.call(e)}function x(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function Y(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));--n);}}function w(e,t){return la.call(e,t)}function g(e,t){return w(e,t)&&e[t]}function E(e,t){for(var n in e)if(w(e,n)&&t(e[n],n))break}function Z(e,t,n,r){return t&&E(t,function(t,i){!n&&w(e,i)||(!r||"object"!=typeof t||!t||M(t)||L(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),Z(e[i],t,n,r)))}),e}function y(e,t){return function(){return t.apply(e,arguments)}}function ia(e){throw e}function ja(e){if(!e)return e;var t=ha;return x(e.split("."),function(e){t=t[e]}),t}function G(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ma(e){function t(e,t,n){var r,i,o,a,s,u,c,l;t=t&&t.split("/");var f=A.map,d=f&&f["*"];if(e){for(e=e.split("/"),i=e.length-1,A.nodeIdCompat&&V.test(e[i])&&(e[i]=e[i].replace(V,"")),"."===e[0].charAt(0)&&t&&(i=t.slice(0,t.length-1),e=i.concat(e)),i=e,o=0;o<i.length;o++)a=i[o],"."===a?(i.splice(o,1),--o):".."===a&&0!==o&&(1!==o||".."!==i[2])&&".."!==i[o-1]&&0<o&&(i.splice(o-1,2),o-=2);e=e.join("/")}if(n&&f&&(t||d)){i=e.split("/"),o=i.length;e:for(;0<o;--o){if(s=i.slice(0,o).join("/"),t)for(a=t.length;0<a;--a)if((n=g(f,t.slice(0,a).join("/")))&&(n=g(n,s))){r=n,u=o;break e}!c&&d&&g(d,s)&&(c=g(d,s),l=o)}!r&&c&&(r=c,u=l),r&&(i.splice(0,u,r),e=i.join("/"))}return(r=g(A.pkgs,e))?r:e}function n(e){F&&x(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===D.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=g(A.paths,e);if(t&&M(t)&&1<t.length)return t.shift(),D.require.undef(e),D.makeRequire(null,{skipMap:!0})([e]),!0}function i(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,n,r,o){var a,s,u=null,c=n?n.name:null,l=e,f=!0,d="";return e||(f=!1,e="_@r"+(B+=1)),e=i(e),u=e[0],e=e[1],u&&(u=t(u,c,o),s=g(P,u)),e&&(u?d=s&&s.normalize?s.normalize(e,function(e){return t(e,c,o)}):-1===e.indexOf("!")?t(e,c,o):e:(d=t(e,c,o),e=i(d),u=e[0],d=e[1],r=!0,a=D.nameToUrl(d))),r=!u||s||r?"":"_unnormalized"+(q+=1),{prefix:u,name:d,parentMap:n,unnormalized:!!r,url:a,originalName:l,isDefine:f,id:(u?u+"!"+d:d)+r}}function a(e){var t=e.id,n=g(_,t);return n||(n=_[t]=new D.Module(e)),n}function s(e,t,n){var r=e.id,i=g(_,r);!w(P,r)||i&&!i.defineEmitComplete?(i=a(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(P[r])}function u(e,t){var n=e.requireModules,r=!1;t?t(e):(x(n,function(t){(t=g(_,t))&&(t.error=e,t.events.error&&(r=!0,t.emit("error",e)))}),r||k.onError(e))}function c(){W.length&&(x(W,function(e){var t=e[0];"string"==typeof t&&(D.defQueueMap[t]=!0),R.push(e)}),W=[])}function l(e){delete _[e],delete N[e]}function f(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,x(e.depMaps,function(r,i){var o=r.id,a=g(_,o);!a||e.depMatched[i]||n[o]||(g(t,o)?(e.defineDep(i,P[o]),e.check()):f(a,t,n))}),n[r]=!0)}function d(){var e,t,i=(e=1e3*A.waitSeconds)&&D.startTime+e<(new Date).getTime(),o=[],a=[],s=!1,c=!0;if(!v){if(v=!0,E(N,function(e){var u=e.map,l=u.id;if(e.enabled&&(u.isDefine||a.push(e),!e.error))if(!e.inited&&i)r(l)?s=t=!0:(o.push(l),n(l));else if(!e.inited&&e.fetched&&u.isDefine&&(s=!0,!u.prefix))return c=!1}),i&&o.length)return e=G("timeout","Load timeout for modules: "+o,null,o),e.contextName=D.contextName,u(e);c&&x(a,function(e){f(e,{},{})}),i&&!t||!s||!F&&!ka||S||(S=setTimeout(function(){S=0,d()},50)),v=!1}}function p(e){w(P,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function h(e){e=e.currentTarget||e.srcElement;var t=D.onScriptLoad;return e.detachEvent&&!da?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=D.onScriptError,e.detachEvent&&!da||e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function m(){var e;for(c();R.length;){if(e=R.shift(),null===e[0])return u(G("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));p(e)}D.defQueueMap={}}var v,b,D,I,S,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},_={},N={},C={},R=[],P={},U={},j={},B=1,q=1;return I={require:function(e){return e.require?e.require:e.require=D.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?P[e.map.id]=e.exports:e.exports=P[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return g(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=g(C,e.id)||{},this.map=e,this.shim=g(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=y(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,--this.depCount,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,D.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();D.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],y(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;U[e]||(U[e]=!0,D.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(L(i)){try{r=D.execCb(n,i,t,r)}catch(t){e=t}if(this.map.isDefine&&void 0===r&&((t=this.module)?r=t.exports:this.usingExports&&(r=this.exports)),e){if(this.events.error&&this.map.isDefine||k.onError!==ia)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",u(this.error=e);"undefined"!=typeof console&&console.error?console.error(e):k.onError(e)}}else r=i;if(this.exports=r,this.map.isDefine&&!this.ignore&&(P[n]=r,k.onResourceLoad)){var o=[];x(this.depMaps,function(e){o.push(e.normalizedMap||e)}),k.onResourceLoad(D,this.map,o)}l(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else w(D.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,r=o(e.prefix);this.depMaps.push(r),s(r,"defined",y(this,function(r){var i,c,f=g(j,this.map.id),d=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,h=D.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(r.normalize&&(d=r.normalize(d,function(e){return t(e,p,!0)})||""),c=o(e.prefix+"!"+d,this.map.parentMap),s(c,"defined",y(this,function(e){this.map.normalizedMap=c,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(r=g(_,c.id))&&(this.depMaps.push(c),this.events.error&&r.on("error",y(this,function(e){this.emit("error",e)})),r.enable())):f?(this.map.url=D.nameToUrl(f),this.load()):(i=y(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=y(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],E(_,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&l(e.map.id)}),u(e)}),i.fromText=y(this,function(t,r){var s=e.name,c=o(s),l=T;r&&(t=r),l&&(T=!1),a(c),w(A.config,n)&&(A.config[s]=A.config[n]);try{k.exec(t)}catch(e){return u(G("fromtexteval","fromText eval for "+n+" failed: "+e,e,[n]))}l&&(T=!0),this.depMaps.push(c),D.completeLoad(s),h([s],i)}),r.load(e.name,h,i,A))})),D.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){N[this.map.id]=this,this.enabling=this.enabled=!0,x(this.depMaps,y(this,function(e,t){var n,r;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=g(I,e.id))return void(this.depExports[t]=n(this));this.depCount+=1,s(e,"defined",y(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?s(e,"error",y(this,this.errback)):this.events.error&&s(e,"error",y(this,function(e){this.emit("error",e)}))}n=e.id,r=_[n],w(I,n)||!r||r.enabled||D.enable(e,this)})),E(this.pluginMaps,y(this,function(e){var t=g(_,e.id);t&&!t.enabled&&D.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){x(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},D={config:A,contextName:e,registry:_,defined:P,urlFetched:U,defQueue:R,defQueueMap:{},Module:b,makeModuleMap:o,nextTick:k.nextTick,onError:u,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};E(e,function(e,t){n[t]?(A[t]||(A[t]={}),Z(A[t],e,!0,!0)):A[t]=e}),e.bundles&&E(e.bundles,function(e,t){x(e,function(e){e!==t&&(j[e]=t)})}),e.shim&&(E(e.shim,function(e,n){M(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=D.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&x(e.packages,function(e){var t;e="string"==typeof e?{name:e}:e,t=e.name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(na,"").replace(V,"")}),E(_,function(e,t){e.inited||e.map.unnormalized||(e.map=o(t,null,!0))}),(e.deps||e.callback)&&D.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ha,arguments)),t||e.exports&&ja(e.exports)}},makeRequire:function(r,i){function s(t,n,c){var l,f;return i.enableBuildCallback&&n&&L(n)&&(n.__requireJsBuild=!0),"string"==typeof t?L(n)?u(G("requireargs","Invalid require call"),c):r&&w(I,t)?I[t](_[r.id]):k.get?k.get(D,t,r,s):(l=o(t,r,!1,!0),l=l.id,w(P,l)?P[l]:u(G("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(r?"":". Use require([])")))):(m(),D.nextTick(function(){m(),f=a(o(null,r)),f.skipMap=i.skipMap,f.init(t,n,c,{enabled:!0}),d()}),s)}return i=i||{},Z(s,{isBrowser:F,toUrl:function(e){var n,i=e.lastIndexOf("."),o=e.split("/")[0];return-1!==i&&("."!==o&&".."!==o||1<i)&&(n=e.substring(i,e.length),e=e.substring(0,i)),D.nameToUrl(t(e,r&&r.id,!0),n,!0)},defined:function(e){return w(P,o(e,r,!1,!0).id)},specified:function(e){return e=o(e,r,!1,!0).id,w(P,e)||w(_,e)}}),r||(s.undef=function(e){c();var t=o(e,r,!0),i=g(_,e);i.undefed=!0,n(e),delete P[e],delete U[t.url],delete C[e],Y(R,function(t,n){t[0]===e&&R.splice(n,1)}),delete D.defQueueMap[e],i&&(i.events.defined&&(C[e]=i.events),l(e))}),s},enable:function(e){g(_,e.id)&&a(e).enable()},completeLoad:function(e){var t,n,i=g(A.shim,e)||{},o=i.exports;for(c();R.length;){if(n=R.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);p(n)}if(D.defQueueMap={},n=g(_,e),!t&&!w(P,e)&&n&&!n.inited){if(!(!A.enforceDefine||o&&ja(o)))return r(e)?void 0:u(G("nodefine","No define call for "+e,null,[e]));p([e,i.deps||[],i.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,o;if((r=g(A.pkgs,e))&&(e=r),r=g(j,e))return D.nameToUrl(r,t,n);if(k.jsExtRegExp.test(e))r=e+(t||"");else{for(r=A.paths,e=e.split("/"),i=e.length;0<i;--i)if(o=e.slice(0,i).join("/"),o=g(r,o)){M(o)&&(o=o[0]),e.splice(0,i,o);break}r=e.join("/"),r+=t||(/^data\:|\?/.test(r)||n?"":".js"),r=("/"===r.charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+r}return A.urlArgs?r+(-1===r.indexOf("?")?"?":"&")+A.urlArgs:r},load:function(e,t){k.load(D,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){("load"===e.type||oa.test((e.currentTarget||e.srcElement).readyState))&&(O=null,e=h(e),D.completeLoad(e.id))},onScriptError:function(e){var t=h(e);if(!r(t.id)){var n=[];return E(_,function(e,r){0!==r.indexOf("_@r")&&x(e.depMaps,function(e){return e.id===t.id&&n.push(r),!0})}),u(G("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},D.require=D.makeRequire(),D}function pa(){return O&&"interactive"===O.readyState?O:(Y(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return O=e}),O)}var k,C,D,I,P,J,O,Q,u,U,qa=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ra=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,V=/\.js$/,na=/^\.\//;C=Object.prototype;var R=C.toString,la=C.hasOwnProperty,F=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ka=!F&&"undefined"!=typeof importScripts,oa=F&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,da="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),K={},v={},W=[],T=!1;if(void 0===define){if(void 0!==requirejs){if(L(requirejs))return;v=requirejs,requirejs=void 0}void 0===require||L(require)||(v=require,require=void 0),k=requirejs=function(e,t,n,r){var i,o="_";return M(e)||"string"==typeof e||(i=e,M(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(o=i.context),(r=g(K,o))||(r=K[o]=k.s.newContext(o)),i&&r.configure(i),r.require(e,t,n)},k.config=function(e){return k(e)},k.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=k),k.version="2.1.22",k.jsExtRegExp=/^\/|:|\?|\.js$/,k.isBrowser=F,C=k.s={contexts:K,newContext:ma},k({}),x(["toUrl","undef","defined","specified"],function(e){k[e]=function(){var t=K._;return t.require[e].apply(t,arguments)}}),F&&(D=C.head=document.getElementsByTagName("head")[0],I=document.getElementsByTagName("base")[0])&&(D=C.head=I.parentNode),k.onError=ia,k.createNode=function(e,t,n){return t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},k.load=function(e,t,n){var r,i=e&&e.config||{};if(F)return r=k.createNode(i,t,n),i.onNodeCreated&&i.onNodeCreated(r,i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code")||da?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(T=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,Q=r,I?D.insertBefore(r,I):D.appendChild(r),Q=null,r;if(ka)try{importScripts(n),e.completeLoad(t)}catch(r){e.onError(G("importscripts","importScripts failed for "+t+" at "+n,r,[t]))}},F&&!v.skipDataMain&&Y(document.getElementsByTagName("script"),function(e){if(D||(D=e.parentNode),P=e.getAttribute("data-main"))return u=P,v.baseUrl||(J=u.split("/"),u=J.pop(),U=J.length?J.join("/")+"/":"./",v.baseUrl=U),u=u.replace(V,""),k.jsExtRegExp.test(u)&&(u=P),v.deps=v.deps?v.deps.concat(u):[u],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),M(t)||(n=t,t=null),!t&&L(n)&&(t=[],n.length&&(n.toString().replace(qa,"").replace(ra,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),T&&(r=Q||pa())&&(e||(e=r.getAttribute("data-requiremodule")),i=K[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,t,n]),i.defQueueMap[e]=!0):W.push([e,t,n])},define.amd={jQuery:!0},k.exec=function(b){return eval(b)},k(v)}}(this),define("requireLib",function(){}),define("OutSystems/ClientRuntime/StorageProvider",["require","exports"],function(e,t){"use strict";function n(e){g=e}function r(e){var t=e===l.Persistent?"localStorage":"sessionStorage";return"undefined"==typeof window?void 0:window[t]}function i(e){var t=f+"test";try{var n=r(e);n.setItem(t,"1");var i="1"===n.getItem(t);return n.removeItem(t),i}catch(e){return!1}}function o(){return p}function a(){return h}function s(e){p=e}function u(e){h=e}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e){if(this.storageObj={},e)for(var t=0,n=e.key(t);null!==n;)this.storageObj[n]=e.getItem(n),n=e.key(++t)}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.storageObj).length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.storageObj={}},e.prototype.getItem=function(e){return this.storageObj.hasOwnProperty(e)?this.storageObj[e]:null},e.prototype.key=function(e){var t=Object.keys(this.storageObj);return e<t.length?t[e]:null},e.prototype.removeItem=function(e){this.storageObj.hasOwnProperty(e)&&delete this.storageObj[e]},e.prototype.setItem=function(e,t){this.storageObj[e]=t},e}();t.DummyStorage=c;var l;!function(e){e[e.Persistent=0]="Persistent",e[e.Session=1]="Session"}(l=t.StorageType||(t.StorageType={}));var f="$OS_",d=Object.freeze(Object()),p=i(l.Persistent)?r(l.Persistent):new c,h=i(l.Session)?r(l.Session):new c,g="OS";t.setDefaultStorageNamespace=n;var m=function(){function e(e,t,n,r){this.storageType=e,this.key=t,this.defaultValue=n,this.getModuleName=function(){return g},this.clearCache(),r&&(this.getModuleName=r)}return e.prototype.get=function(){return this.getValueForModule(this.getModuleName())},e.prototype.set=function(e){this.setValueForModule(this.getModuleName(),e)},e.prototype.remove=function(){this.removeValueForModule(this.getModuleName())},e.prototype.isDefined=function(){return this.hasValueForModule(this.getModuleName())},e.prototype.getStorageKeyForModule=function(e){return f+e+"$"+this.key},Object.defineProperty(e.prototype,"storage",{get:function(){return this.storageType===l.Persistent?p:h},enumerable:!0,configurable:!0}),e.prototype.getValueForModule=function(e){return this.cachedValue===d&&(this.cachedValue=this.getValueForModuleFromStorage(e)),this.cachedValue},e.prototype.getValueForModuleFromStorage=function(e){var t=this.storage.getItem(this.getStorageKeyForModule(e));return null===t?this.defaultValue:"undefined"===t||void 0===t?void 0:JSON.parse(t)},e.prototype.hasValueForModule=function(e){var t=this.storage.getItem(this.getStorageKeyForModule(e));return null!==t&&void 0!==t&&"undefined"!==t},e.prototype.setValueForModule=function(e,t){var n=this.getStorageKeyForModule(e),i=JSON.stringify(t),o=this.storage;if(!o||!o.setItem)throw Error("The storage object for "+this.key+" is invalid.");try{o.setItem(n,i),this.cachedValue=t}catch(e){if(this.storageType===l.Persistent&&p===r(l.Persistent))console.warn("The localStorage is full... Proceding with a static Javascript object"),p=new c(p),p.setItem(n,i);else{if(this.storageType!==l.Session||h!==r(l.Session))throw e;console.warn("The sessionStorage is full... Proceding with a static Javascript object"),h=new c(h),h.setItem(n,i)}}},e.prototype.removeValueForModule=function(e){this.storage.removeItem(this.getStorageKeyForModule(e)),this.clearCache()},e.prototype.clearCache=function(){this.cachedValue=d},e}();t.StorageObject=m,t.getPersistentStorage=o,t.getSessionStorage=a,t.setCustomPersistentStorage=s,t.setCustomSessionStorage=u}),define("OutSystems/ClientRuntime/TransitionAnimation",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Fade=2]="Fade",e[e.SlideFromLeft=3]="SlideFromLeft",e[e.SlideFromRight=4]="SlideFromRight",e[e.SlideFromBottom=5]="SlideFromBottom",e[e.SlideFromTop=6]="SlideFromTop"}(t.TransitionAnimation||(t.TransitionAnimation={}))}),define("OutSystems/ClientRuntime/Transitions",["require","exports","./TransitionAnimation"],function(e,t,n){"use strict";function r(e){t.Default=e}function i(e){return new s(e?e.name:"")}function o(e,n){if("string"==typeof e)return new s(e);switch(e){case t.TransitionAnimation.None:return u;case t.TransitionAnimation.Fade:return c;case t.TransitionAnimation.SlideFromLeft:return l;case t.TransitionAnimation.SlideFromRight:return f;case t.TransitionAnimation.SlideFromBottom:return d;case t.TransitionAnimation.SlideFromTop:return p;case t.TransitionAnimation.Default:return t.Default;default:return n}}function a(e){if(!e||!e.name)return new s("");switch(e.name){case c.name:return new s(c.name);case d.name:return new s(p.name);case l.name:return new s(f.name);case f.name:return new s(l.name);case p.name:return new s(d.name);default:return new s(e.name+"-back")}}Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionAnimation=n.TransitionAnimation;var s=function(){function e(e){void 0===e&&(e=""),this.name=e}return e}();t.Transition=s;var u=new s,c=new s("fade"),l=new s("slide-from-left"),f=new s("slide-from-right"),d=new s("slide-from-bottom"),p=new s("slide-from-top");t.Default=new s,t.setDefaultTransition=r,t.sanitizeTransition=i,t.createTransition=o,t.reverseTransition=a}),define("OutSystems/ClientRuntime/ApplicationInfo",["require","exports","./Transitions"],function(e,t,n){"use strict";function r(e){O=e}function i(){return O.environmentKey}function o(){return O.environmentName}function a(){return O.applicationKey}function s(){return O.applicationName}function u(){return O.databaseName}function c(e){O.modules=e}function l(){return O.modules}function f(e){var t=O.modules;return t[e]||(t[e]={moduleName:null,homeScreenName:null,splashScreenName:null,screens:[],staticEntities:{}}),t[e]}function d(){return O.clientEntitiesModules}function p(e){O.clientEntitiesModules=e}function h(e){O.databaseName=e}function g(){return O.homeModuleName}function m(){return O.homeModuleKey}function y(){if(O.homeModuleName&&O.modules){var e=O.modules[O.homeModuleKey];return e||null}return null}function v(e,t){for(var n=0,r=e.screens;n<r.length;n++){var i=r[n];if(i.screenUrl===t)return i}return null}function T(e,t){for(var n=0,r=e.screens;n<r.length;n++){var i=r[n];if(i.screenName===t)return i}return null}function b(){var e=y();return"/"+e.moduleName+"/"+e.homeScreenName}function E(){return R}function w(){return"nr2"+O.userProviderName}function D(){return O.userProviderName}function I(){return O.debugEnabled}function S(){return O.homeModuleControllerName}function A(){return O.homeModuleLanguageResourcesName}function x(){return O.applicationDefaultTimeout}function _(e){O.applicationDefaultTimeout=e}function N(){var e=n.TransitionAnimation[O.defaultTransition];return n.createTransition(e)}function C(){return O.errorPageConfig}Object.defineProperty(t,"__esModule",{value:!0});var O={environmentKey:"",environmentName:"",applicationKey:"",applicationName:"",userProviderName:"",debugEnabled:!1,homeModuleName:"",homeModuleKey:"",modules:{},homeModuleControllerName:"",homeModuleLanguageResourcesName:"",clientEntitiesModules:[],applicationDefaultTimeout:null},R="";t.setApplicationDefinition=r,t.getEnvironmentKey=i,t.getEnvironmentName=o,t.getApplicationKey=a,t.getApplicationName=s,t.getDatabaseName=u,t.setModules=c,t.getModules=l,t.getModuleFromKey=f,t.getClientEntitiesModules=d,t.setClientEntitiesModules=p,t.setDatabaseName=h,t.getHomeModuleName=g,t.getHomeModuleKey=m,t.getHomeModuleDefinition=y,t.getScreenDefinition=v,t.getScreenDefinitionFromScreenName=T,t.getDefaultModuleHomeScreenURL=b,t.getCurrentLocale=E,t.getUserCookieName=w,t.getUserProviderName=D,t.isDebugEnabled=I,t.getHomeModuleControllerName=S,t.getHomeModuleLanguageResourcesName=A,t.getApplicationDefaultTimeout=x,t.setApplicationDefaultTimeout=_,t.getDefaultTransition=N,t.getErrorPageConfig=C}),define("OutSystems/ClientRuntime/Exceptions",["require","exports"],function(e,t){"use strict";function n(e,t,n){return void 0===n&&(n=""),t===c.Exception||e instanceof t&&(""===n||!!e.specificType&&e.specificType===n)}function r(e){if(void 0===e)return"";if(e instanceof Error)return e.message;var t=e.toString();return"[object SQLError]"===t?e.message.toString():t}function i(e){return(void 0!==e.extraStack?e.extraStack+"\r\n ":"")+(e.stack||"")||""}function o(e){return{name:e.name,message:r(e),stack:i(e),extraStack:e instanceof c.Exception?e.extraStack:void 0}}function a(e){return e.name?e.specificType?new c[e.name](e.specificType,e.message,e.extraStack):new c[e.name](e.message,e.extraStack):new c.Exception(e.message,e.extraStack)}function s(e){return n(e,c.SystemException)}function u(e){return n(e,c.LicensingException)}Object.defineProperty(t,"__esModule",{value:!0});var c;!function(e){e.CustomError=function(e){var t=Error.call(this,e);"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t,this.constructor.prototype):t.__proto__=this.constructor.prototype,"stack"in this||Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)},e.CustomError.prototype=Error.prototype;var t=function(e){function t(t,n){var r=e.call(this,t)||this;return r.extraStack=n,r.message=t,r.name="Exception",r}return __extends(t,e),t}(e.CustomError);e.Exception=t;var r=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.specificType=t,i.name=t,i}return __extends(t,e),t}(t);e.ServerException=r;var i=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.specificType=t,i.name=t,i}return __extends(t,e),t}(t);e.DataBaseException=i;var o=function(e){function t(t,n){return e.call(this,"OpenDatabaseException",t,n)||this}return __extends(t,e),t}(i);e.OpenDatabaseException=o;var a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="CommunicationException",r}return __extends(t,e),t}(t);e.CommunicationException=a;var s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="NumberOverflowException",r}return __extends(t,e),t.prototype.valueOf=function(){return this.name+": "+this.message},t}(t);e.NumberOverflowException=s;var u=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="InvalidJavascriptType",r}return __extends(t,e),t.prototype.valueOf=function(){return this.name+": "+this.message},t}(t);e.InvalidJavascriptType=u;var c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="SecurityException",r}return __extends(t,e),t}(t);e.SecurityException=c;var l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="InvalidLoginException",r}return __extends(t,e),t}(c);e.InvalidLoginException=l;var f=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.specificType=t,i.name=t,i}return __extends(t,e),t}(c);e.NotRegisteredException=f;var d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="SystemException",r}return __extends(t,e),t}(t);e.SystemException=d;var p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="IgnorableSystemException",r}return __extends(t,e),t}(d);e.IgnorableSystemException=p;var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="ViewHasChangedException",r}return __extends(t,e),t}(p);e.ViewHasChangedException=h;var g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="OutOfOrderException",r}return __extends(t,e),t}(p);e.OutOfOrderException=g;var m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="OutOfContextException",r}return __extends(t,e),t}(p);e.OutOfContextException=m;var y=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="RedirectOccurredException",r}return __extends(t,e),t}(p);e.RedirectOccurredException=y;var v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="UnhandledOrIgnoredErrorInEventException",r}return __extends(t,e),Object.defineProperty(t.prototype,"handleErrorResult",{get:function(){return this._handleErrorResult},enumerable:!0,configurable:!0}),t.create=function(e,n,r){var i=new t(n,r);return i._handleErrorResult=e,i},t.ignore=function(e){if(!n(e,t))throw e},t}(p);e.UnhandledOrIgnoredErrorInEventException=v;var T=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="ApplicationBackendUnavailableException",r}return __extends(t,e),t}(d);e.ApplicationBackendUnavailableException=T;var b=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="LicensingException",r}return __extends(t,e),t}(d);e.LicensingException=b;var E=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="IncompatibleProducerException",r}return __extends(t,e),t}(d);e.IncompatibleProducerException=E;var w=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="ControllerDisposedException",r}return __extends(t,e),t}(p);e.ControllerDisposedException=w;var D=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="AbortActivityChangeException",r}return __extends(t,e),t}(t);e.AbortActivityChangeException=D;var I=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.specificType=t,i.name=t,i}return __extends(t,e),t}(t);e.UserException=I}(c=t.Exceptions||(t.Exceptions={})),t.isInstanceOf=n,t.getMessage=r,t.getStack=i,t.getExceptionInfo=o,t.getException=a,t.isSystem=s,t.isApplicationOffline=u}),define("OutSystems/ClientRuntime/ClientInfo",["require","exports","./StorageProvider"],function(e,t,n){"use strict";function r(){var e=window.device;if(e){var t=new a(new s(e.platform,e.version,e.manufacturer,e.model,e.uuid,e.serial,e.cordova,e.isVirtual));u.set(o.serializeClientInfo(t))}}function i(){var e=u.get();if(e)return o.deserializeClientInfo(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(){function e(e){this._device=e}return Object.defineProperty(e.prototype,"device",{get:function(){return this._device},enumerable:!0,configurable:!0}),e}(),s=function(){function e(e,t,n,r,i,o,a,s){this._platform=e,this._version=t,this._manufacturer=n,this._model=r,this._uuid=i,this._serial=o,this._cordova=a,this._isVirtual=s}return Object.defineProperty(e.prototype,"platform",{get:function(){return this._platform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manufacturer",{get:function(){return this._manufacturer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this._uuid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serial",{get:function(){return this._serial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cordova",{get:function(){return this._cordova},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVirtual",{get:function(){return this._isVirtual},enumerable:!0,configurable:!0}),e}();!function(e){function t(e){var t=n(e);if(t)return JSON.stringify(t)}function n(e){if(e)return{device:e.device?r(e.device):void 0}}function r(e){if(e)return{platform:e.platform,version:e.version,manufacturer:e.manufacturer,model:e.model,uuid:e.uuid,serial:e.serial,cordova:e.cordova,isVirtual:e.isVirtual}}function i(e){var t;try{t=JSON.parse(e)}catch(e){}if(t)return o(t)}function o(e){if(e)return new a(u(e.device))}function u(e){if(e)return new s("string"==typeof e.platform?e.platform:void 0,"string"==typeof e.version?e.version:void 0,"string"==typeof e.manufacturer?e.manufacturer:void 0,"string"==typeof e.model?e.model:void 0,"string"==typeof e.uuid?e.uuid:void 0,"string"==typeof e.serial?e.serial:void 0,"string"==typeof e.cordova?e.cordova:void 0,"boolean"==typeof e.isVirtual?e.isVirtual:void 0)}e.serializeClientInfo=t,e.deserializeClientInfo=i}(o||(o={}));var u=new n.StorageObject(n.StorageType.Persistent,"ClientInfo");t.setClientInfo=r,t.getClientInfo=i}),define("OutSystems/ClientRuntime/Logger",["require","exports","./Exceptions","./StorageProvider","./ClientInfo"],function(e,t,n,r,i){"use strict";function o(){k=[],j=se,B=ue,q=0,H=0,G=!1,J=!1,z=!1,K=!1,Q=!1,Y=!1,X=!1,Z=!1,$=!1,oe="",te=new Promise(function(e,t){ie=function(t){X=!0,e(t),J=!0}}),ee=new Promise(function(e,t){re=function(t){Z=!0,e(t),J=!0}})}function a(e){var t=new V(e);ie(t)}function s(e){re(e)}function u(e){e.onOnline(function(){return T()}),e.onOffline(function(){return b()}),z=e.isOnline(),K=!0,J=z,ne=e}function c(){$=!0,y(),
W=t.LoggerStorage.hasTracingEnabled.get()}function l(){if(G=!0,J&&Z)return void v();Promise.resolve().then(function(){return z&&K&&X?d():Z?p():void(G=!1)}).catch(function(){G=!1})}function f(){return!D()||J}function d(){return q>=fe&&ne?(K=!1,H=0,E(),void setTimeout(function(){return l()},B)):te.then(function(e){return h(e,j)})}function p(e){return void 0===e&&(e=j),ee.then(function(t){return h(t,e)})}function h(e,t){if(D())return G=!1,Promise.resolve();var n=k.slice(0,t);return e.writeLogBatch(n).then(function(){k.splice(0,n.length),q=0,f()?setTimeout(function(){return l()},B):G=!1}).catch(function(){k.splice(0,n.length),k=k.concat(n),q++,setTimeout(function(){return l()},x(q))})}function g(){T()}function m(){if(Z)return p(k.length);if($){var e=k;Q&&(e=t.LoggerStorage.fallbackLogStorage.get().concat(k)),t.LoggerStorage.fallbackLogStorage.set(e),Q=!0,k=[]}return Promise.resolve()}function y(){var e=t.LoggerStorage.fallbackLogStorage.get();0!==e.length&&(S(e),z?t.LoggerStorage.fallbackLogStorage.remove():(ne.onOnline(function(){return t.LoggerStorage.fallbackLogStorage.remove()}),ee.then(function(){return t.LoggerStorage.fallbackLogStorage.remove()})),Y=!0)}function v(){return ee.then(function(e){e.popLogs().then(function(e){k=e.concat(k),J=!1,setTimeout(function(){return l()},B)}).catch(function(){setTimeout(function(){return l()},B)})})}function T(){z=!0,K=!0,J=!0,q=0,G||l()}function b(){z=!1,K=!1,J=!1,q=0,G||l()}function E(){ne&&ne.ping(de).then(function(){H=0,T()}).catch(function(){z&&!K&&(H++,setTimeout(function(){E()},x(H)))})}function w(e){j=e}function D(){return 0===k.length}function I(e){k.push(A(e)),G||l()}function S(e){e.forEach(function(e){return I(e)})}function A(e){return e.message=e.message?e.message.substring(0,pe):e.message,e.stack=e.stack?e.stack.substring(0,pe):e.stack,e}function x(e){var t=Math.min(e,le);return Math.pow(ce,t)*B}function _(){return!D()}function N(){return Y}function C(e){void 0===e&&(e=!1),W=e;try{t.LoggerStorage.hasTracingEnabled.set(W)}catch(e){O(ae,"Error saving the new value of 'tracingEnabled' property in the local storage. "+e)}}function O(e,n){if(e&&n&&(W||t.forceTracing)){var r="";"string"==typeof e?r=e:"Function"===(r=e.constructor.name)&&(r=e.name);var i=void 0;i="string"==typeof n?n:n(),F(r,i,t.LogTypes.Trace)}}function R(e,n){F(e,n,t.LogTypes.General)}function L(e,r,i){var o="",a="";"string"==typeof r?o=r:(o=n.getMessage(r),a=n.getStack(r)),i&&(o+="\n"+n.getMessage(i),a+=(a?"\n":"")+n.getStack(i)),F(e,o,t.LogTypes.Error,a)}function M(e){W&&e?(P(),O(ae,"Device details initialized")):O(ae,"Device details not initialized: isNative = ["+e+"] tracingEnabled = ["+W+"]")}function F(e,n,r,i){if(!r||""===r.trim())throw new Error("Logger: Error sending log. LogType must be defined.");var o=(new Date).toISOString(),a=e?e+" ":"",s=""+n+oe,u=a+"["+o+"]: "+n+" "+(i?"\n"+i:"");r===t.LogTypes.Error?console.error(u):console.log(u),I({instant:o,logType:r,message:s,moduleName:e,stack:i})}function P(){if(!oe){var e=i.getClientInfo();if(e&&e.device){var t=e.device;oe=" ["+t.platform+"|"+t.version+"|"+t.manufacturer+"|"+t.model+"|"+t.uuid+"|"+t.cordova+"]"}}return oe}Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStorage={hasTracingEnabled:new r.StorageObject(r.StorageType.Persistent,"HasTracingEnabled"),fallbackLogStorage:new r.StorageObject(r.StorageType.Persistent,"FallbackLogStorage",[])},t.LogTypes={Error:"error",General:"general",Trace:"trace"};var V=function(){function e(e){this.postLog=e}return e.prototype.writeLog=function(e){return this.writeLogBatch([e])},e.prototype.writeLogBatch=function(e){return this.postLog(e)},e}();t.ServerLogAppender=V;var U=function(){function e(){}return e.prototype.writeLog=function(e){return Promise.resolve()},e.prototype.writeLogBatch=function(e){return Promise.resolve()},e.prototype.countLogs=function(){return Promise.resolve(0)},e.prototype.getLogs=function(e){return Promise.resolve([])},e.prototype.popLogs=function(e){return Promise.resolve([])},e.prototype.removeLogs=function(e){return Promise.resolve()},e}();t.DummyLogStorage=U;var k,j,B,q,H,W,G,J,z,K,Q,Y,X,Z,$,ee,te,ne,re,ie,oe,ae="Logger",se=10,ue=200,ce=1.2,le=40,fe=5,de=5e3,pe=2e3;t.initialize=o,t.setPostLogsFunction=a,t.setOfflineStorage=s,t.setNetworkStatusChecker=u,t.enableFallbackStorage=c,t.flushLogsToServer=g,t.flushLogsToStorage=m,t.setBatchSize=w,t.hasPendingLogs=_,t.hadSessionLogs=N,t.setTracingEnabled=C,t.trace=O,t.log=R,t.error=L,t.setDeviceDetails=M,o()}),define("OutSystems/ClientRuntime/Flow",["require","exports"],function(e,t){"use strict";function n(e){var t=e;return t&&"function"==typeof t.then&&"function"==typeof t.catch}function r(e,t){switch(t){case D:return e();case w:return;default:return Promise.reject(t)}}function i(e){return e()?Promise.resolve():s()}function o(e){return new Promise(e)}function a(e){return Promise.resolve(e)}function s(){return Promise.reject(w)}function u(){return Promise.reject(D)}function c(e){return Promise.reject(new E(e))}function l(e){return Promise.reject(e)}function f(e){return d(e)}function d(e,t){function r(e,n){return o?n?(clearTimeout(t),d(function(){return n(o)})):(s(),d(a,t)):d(e?function(){return e(i)}:function(){return i})}var i=void 0,o=void 0,a=function(){throw o},s=function(){clearTimeout(t),t=setTimeout(a,0)};try{i=e()}catch(e){o=e,s()}return n(i)?i:{then:function(e,t){return r(e,t)},catch:function(e){return r(void 0,e)}}}function p(e,t,n){return void 0===t&&(t=function(e){return Promise.reject(e)}),void 0===n&&(n=function(){return Promise.resolve()}),f(e).catch(t).then(function(e){return f(n).then(function(t){return void 0!==t?t:e})},function(e){return f(n).then(function(){return Promise.reject(e)})})}function h(e,t){return p(e,t,void 0)}function g(e,t){return p(e,void 0,t)}function m(e){return void 0===e&&(e=function(){}),f(e).catch(b)}function y(e,t){function n(){return i(e).then(t).then(n,r.bind(null,n))}return n()}function v(e,t){var n=0;return y(function(){return n<e.length},function(){var r=e[n++];return t(r)})}function T(e,t){function n(){return i(e).then(o,r.bind(null,o))}function o(){return f(t).then(function(){return i(e)}).then(o,r.bind(null,n))}return o()}function b(e){return e instanceof E?e.returnValue:Promise.reject(e)}Object.defineProperty(t,"__esModule",{value:!0});var E=function(){function e(e){this.returnValue=e}return e}(),w=new Object,D=new Object;t.isPromiseCompatible=n,t.promise=o,t.resolve=a,t.breakAsync=s,t.continueAsync=u,t.returnAsync=c,t.throwAsync=l,t.executeSequence=f,t.tryCatchFinally=p,t.tryCatch=h,t.tryFinally=g,t.executeAsyncFlow=m,t.whileAsync=y,t.forEachAsync=v,t.doWhileAsync=T,t.whileTrueAsync=y.bind(null,function(){return!0})}),define("OutSystems/ClientRuntime/Navigation",["require","exports","./ApplicationInfo","./Exceptions","./Logger","./Flow"],function(e,t,n,r,i,o){"use strict";function a(e){if(!s(e))throw new r.Exceptions.OutOfContextException}function s(e){return!e||!e.isOutOfContext}function u(e){if(e)throw new r.Exceptions.RedirectOccurredException}function c(e){q.push(e)}function l(){return q[q.length-1]}function f(){return q.pop()}function d(e){void 0===e&&(e=!1),i.trace(M,"Next navigation will force a reload..."),G=!0,J=e}function p(){return G}function h(){return z}function g(){return"undefined"!=typeof window&&window.location.search.indexOf(U)>=0}function m(e){return e+=(e.indexOf(P)<0?P:V)+U+"="+(new Date).valueOf()}function y(e){void 0===e&&(e=!1);var n=L();t.changeWindowLocation(n,e)}function v(e){void 0===e&&(e=!1),t.changeWindowLocation(t.getCurrentLocation().href,e,!0)}function T(e){return L(e)}function b(e){for(var t=(new Date).getTime(),n=t-j;B.length>0&&B[0].timestamp<n;)B.shift();return B.reduce(function(t,n){return n.url===e?t+1:t},0)<k?(B.push({timestamp:t,url:e}),!1):(i.trace(M,"Identified a recursive navigation to '"+e+"'."),!0)}function E(e){return W.push(e)}function w(e){W.remove(e)}function D(e){var t={};return e.length>0&&e.split(V).forEach(function(e){var n=e.split("=");if(2===n.length){var r=I(n[0]),i=I(n[1]);t[r]=i}}),t}function I(e){return decodeURIComponent(e.replace(/\+/g," "))}function S(e,r){var a=n.getHomeModuleName(),s=G;if(G&&(G=!1),r&&!W.isEmpty){var u=W.pop();return o.tryCatch(u,function(e){i.error(a,e)}),!1}var c=O(e);if(c||s){var l=t.getUrlInfo(e.pathname),f=l.url,d=n.getModules(),p=void 0;if(l.isInternal){p=!0;for(var h in d)if(d.hasOwnProperty(h)){var g=d[h],m=L();if(m===f||g.screens.some(function(e){return L(e.screenUrl)===f})){p=!1;break}}}else p=!1;if(s||p){var y=void 0;if(p)y=L();else{var v=e.search||"";y=e.pathname==="/"+n.getHomeModuleName()&&""===v?e.pathname+"/":e.pathname+v}return t.changeWindowLocation(y,J,c),!p}}return W.clear(),!0}function A(e,n,r,i,o){if(a(r),b(e))throw Error("Too many redirects.");var s=t.getUrlInfo(e);q&&l().goTo&&s.isInternal?l().goTo(s,n,o):t.changeWindowLocation(e),u(i)}function x(e,t,n){a(t),q&&l().goBack?l().goBack(e):window.history.back(),u(n)}function _(e,t,n){a(t),q&&l().goForward?l().goForward(e):window.history.forward(),u(n)}function N(e,t,n){return n+e.substring(t.length)}function C(){var e=t.getCurrentLocation();if("http:"===e.protocol.toLocaleLowerCase()){if("localhost"!==e.hostname.toLocaleLowerCase()){var n=N(e.href,e.protocol,"https:");return t.changeWindowLocation(n,!1,!0),!0}i.log("Navigation","Accessing through http://localhost is not supported. Please access the application using the hostname instead.")}return!1}function O(e){return e.action.toUpperCase()===t.NAVIGATE_FROM_HISTORY_ACTION}function R(e,t){var n=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");return e+(n.length>0?"?"+n:"")}function L(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"/"+n.getHomeModuleName()+(0===e.length?"/":"/"+e.join("/"))}Object.defineProperty(t,"__esModule",{value:!0});var M="Navigation",F=new RegExp("/([^/]*)"),P="?",V="&",U="_ts",k=10,j=1e3;t.NAVIGATE_TO_URL_ACTION="PUSH",t.NAVIGATE_FROM_HISTORY_ACTION="POP";var B=[],q=[],H=function(){function e(){this.stack=[],this.handlerCallback={},this.counter=0}return e.prototype.push=function(e){var t=this.counter++;return this.stack.push(t),this.handlerCallback[t]=e,t},e.prototype.remove=function(e){var t=this.stack.indexOf(e),n=t>-1;return n&&(this.stack.splice(t),delete this.handlerCallback[e]),n},e.prototype.pop=function(){if(0===this.stack.length)throw new Error("NavigationHandlerStack: pop from empty stack.");var e=this.stack.pop(),t=this.handlerCallback[e];return delete this.handlerCallback[e],t},e.prototype.clear=function(){this.stack=[],this.handlerCallback={}},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.stack.length},enumerable:!0,configurable:!0}),e}(),W=new H;t.validateContext=a,t.isValidContext=s,t.throwRedirectOccurredExceptionIfNeeded=u,t.setNavigationCallbacks=c,t.getNavigationCallbacks=l,t.removeNavigationCallbacks=f;var G=!1,J=!1;t.forceReloadOnNextNavigation=d,t.willReloadInNextNavigation=p,t.getCurrentLocation=function(){return{protocol:(e=window.location,e.protocol),pathname:e.pathname,href:e.href,search:e.search,hostname:window.location.hostname||window.location.host.split(":")[0]};var e},t.getSearchParameterValue=function(e){return void 0===e?null:D(window.location.search.substr(1))[e]},t.urlBelongsToCurrentApplication=function(e){if("http:"!==e.protocol&&"https:"!==e.protocol)return!1;var r=t.getCurrentLocation().hostname;if(r!==(""!==e.hostname?e.hostname:r))return!1;var i=F.exec(e.pathname);if(i.length<2)return!1;var o=n.getHomeModuleName();return o===(void 0!==i[1]?i[1]:o)},t.getLocationFromUrl=function(e){var t=document.createElement("a");return t.href=e,t};var z=!1;t.hasPendingReload=h,t.changeWindowLocation=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),t&&(e=m(e)),i.trace(M,"Reloading application with url: '"+e+"' (replace = "+n+")");var r=function(){n?window.location.replace(e):window.location.href=e};z=!0,i.flushLogsToStorage().then(r).catch(r)},t.currentLocationHasTimestamp=g,t.addInvalidationSuffixToUrl=m,t.reloadApplication=y,t.reloadCurrentLocation=v,t.registerBackNavigationHandler=E,t.unregisterBackNavigationHandler=w,t.getUrlInfo=function(e){var n,r=!1,i="",o=e,a=-1!==e.indexOf(":")||0===e.indexOf("/"),s=o.indexOf("#");-1!==s&&(n=o.substr(s+1).trim(),o=o.substr(0,s));var u=o.indexOf(P);if(-1!==u&&(i=o.substr(u+1).trim(),o=o.substr(0,u)),a){var c=t.getLocationFromUrl(o);r=t.urlBelongsToCurrentApplication(c),r&&(o=c.pathname)}else o=T(o),r=!0;return{url:e,isInternal:r,path:o,queryParams:D(i),hash:n}},t.onBeforeNavigate=S,t.navigateTo=A,t.navigateBack=x,t.navigateForward=_,t.switchUrlProtocol=N,t.ensureRequestSecurity=C,t.locationReachedFromHistory=O,t.generateScreenURL=R,t.buildApplicationRelativeUrl=L;!function(e){function t(e){i=e}function r(e){return i(e,n.getHomeModuleName())}var i=function(e){return e};e.setUrlVersionProvider=t,e.getVersionedUrl=r}(t.VersionedURL||(t.VersionedURL={}))}),define("OutSystems/ClientRuntime/Request",["require","exports"],function(e,t){"use strict";function n(){return new XMLHttpRequest}function r(e){return e.readyState===i.Done}Object.defineProperty(t,"__esModule",{value:!0});var i={Unsent:0,Opened:1,HeadersReceived:2,Loading:3,Done:4};t.createNewHttpRequest=n,t.isDone=r}),define("OutSystems/ClientRuntime/NativeHelper",["require","exports","./Logger","./Flow"],function(e,t,n,r){"use strict";function i(e){n.trace("NativeHelper",e)}function o(){var e="undefined"!=typeof navigator&&/OutSystemsApp/i.test(navigator.userAgent);return i("Running on "+(e?"native shell":"browser")),e}function a(){return u(p.Android)}function s(){return u(p.iOS)}function u(e){return o()&&window.device.platform===e}function c(){return r.promise(function(e,n){i("Waiting for 'deviceready' event"),o()?void 0===window.cordova?n("Running on native but cordova wasn't loaded"):e(t.whenDeviceReady):(i("'deviceready' event wait ignored"),e())})}function l(){return!!a()&&(navigator.app.exitApp(),!0)}function f(e,t){c().then(function(){return d(e,t)})}function d(e,t){return!("undefined"==typeof document||!document.addEventListener)&&(document.addEventListener(e,t),!0)}Object.defineProperty(t,"__esModule",{value:!0});var p={Android:"Android",iOS:"iOS"};t.isRunningOnNative=o,t.isAndroid=a,t.isIOS=s,t.whenDeviceReady=r.promise(function(e,t){d("deviceready",function(){return e()})||e()}),t.ensureNativeReady=c,t.exitApp=l,t.addNativeEventListener=f}),define("OutSystems/ClientRuntime/ResourceCache",["require","exports","./Logger","./Request","./NativeHelper"],function(e,t,n,r,i){"use strict";function o(){t.ResourceCache=new f}Object.defineProperty(t,"__esModule",{value:!0});var a="ResourceCache",s=function(){function e(){this.isCaching=!1,this.errorMessages=[],this.onFinishListeners=[],this.onErrorListeners=[],this.onProgressListeners=[],n.trace(a,"Initializing resource cache using '"+this.getCacheName()+"' mechanism")}return e.prototype.onFinish=function(){this.isCaching=!1,n.trace(a,"Caching finished"),this.onFinishListeners.forEach(function(e){return e()}),this.onFinishListeners=[],this.onErrorListeners=[],this.onProgressListeners=[]},e.prototype.onError=function(e){n.trace(a,"Caching error: "+e),this.errorMessages.push(e),this.onErrorListeners.forEach(function(t){return t(e)})},e.prototype.onProgress=function(e,t){n.trace(a,"Caching progress: "+e+" / "+t),this.onProgressListeners.forEach(function(n){return n(e,t)})},e.prototype.listen=function(e,t,r){n.trace(a,"Started listening to resource cache events"),this.errorMessages.length>0&&t&&t(this.errorMessages.join("\n")),!this.isCaching&&e&&e(),this.isCaching?(e&&this.onFinishListeners.push(e),t&&this.onErrorListeners.push(t),r&&this.onProgressListeners.push(r)):n.trace(a,"Resource caching was already finished, listeners not attached")},e.prototype.start=function(e){var t=this;return n.trace(a,"Started caching resources for version "+e.versionToken),new Promise(function(n,r){if(!t.isCaching)try{t.isCaching=!0,t.errorMessages=[],t.innerStart(e)}catch(e){return t.onError(e.message),void r(e.message)}var i={finished:!1};t.listen(function(){i.finished||(i.finished=!0,n())},function(e){i.finished||(i.finished=!0,r(e))},null)})},e.prototype.switch=function(e){n.trace(a,"Switching cached resources to version "+e),this.innerSwitch(e)},e}(),u=function(e){function t(){for(var t=e.call(this)||this,n=0,r=["noupdate","cached","updateready"];n<r.length;n++){var i=r[n];applicationCache.addEventListener(i,function(){return t.handleEventBasedOnState()},!1)}return applicationCache.onprogress=function(e){return t.onProgress(e.loaded,e.total)},applicationCache.onerror=function(e){return t.callOnErrorAndFinish(e.message)},t}return __extends(t,e),t.prototype.callOnErrorAndFinish=function(e){var t=this;if(applicationCache.status===applicationCache.IDLE&&!this.isCaching)return void n.trace(a,"Cache invalidation bypassed"+(e?" - "+e:""));this.onError(this.getErrorDescription(e)),setTimeout(function(){return t.onFinish()},1)},t.prototype.getCacheName=function(){return"Application Cache"},t.prototype.innerStart=function(e){this.handleEventBasedOnState(),applicationCache.status===applicationCache.UNCACHED?this.callOnErrorAndFinish():applicationCache.status===applicationCache.IDLE&&applicationCache.update()},t.prototype.innerSwitch=function(e){},t.prototype.handleEventBasedOnState=function(){if(applicationCache.status===applicationCache.UPDATEREADY)setTimeout(function(){try{applicationCache.swapCache()}catch(e){n.error(a,e),applicationCache.update()}},0);else if(applicationCache.status!==applicationCache.IDLE&&applicationCache.status!==applicationCache.OBSOLETE)return;this.onFinish()},t.prototype.getErrorDescription=function(e){var t="Unable to cache "+(applicationCache.status===applicationCache.UNCACHED?"":"new ")+"resources, the application will be unavailable offline.";return e&&(t+="\nError message: "+e),"https:"===document.location.protocol&&(t+="\nPlease ensure that the server has a valid HTTPS certificate for '"+window.location.hostname+"', which is a requirement for offline."),t},t}(s),c=function(e){function t(){var r=e.call(this)||this;return r.isNativeReady=!1,r.isCacheAvailable=!1,i.ensureNativeReady().then(function(){if(r.isNativeReady=!0,r.isCacheAvailable="undefined"!=typeof OSCache,!r.isCacheAvailable)return void n.error(a,t.OSCacheNotFoundMessage);OSCache.addEventListener("onfinish",function(e){return r.onFinish()}),OSCache.addEventListener("onerror",function(e){return r.onError(e.message)}),OSCache.addEventListener("onprogress",function(e){return r.onProgress(e.loaded,e.total)})},function(e){n.error(a,"OSCache was not initialized because Cordova was not loaded.",e)}),r}return __extends(t,e),t.prototype.checkOSCacheAndDeferCall=function(e,r){return this.isNativeReady?!!this.isCacheAvailable||(e&&this.onError(t.OSCacheNotFoundMessage),!1):(n.trace(a,"OSCache call deferred until Cordova is loaded"),i.ensureNativeReady().then(r),!1)},t.prototype.getCacheName=function(){return"Native Cache"},t.prototype.innerStart=function(e){var t=this;if(this.checkOSCacheAndDeferCall(!0,function(){return t.innerStart(e)})){for(var r=[],i=0,o=Object.getOwnPropertyNames(e.urlVersions);i<o.length;i++){var s=o[i];r.push(s+e.urlVersions[s])}n.trace(a,"Start Caching... "+r.length+" files: ");for(var u=0;u<r.length;u++)n.trace(a,u+1+"/"+r.length+": "+r[u]);OSCache.startCaching(e.versionToken,r,e.urlMappings,e.urlMappingsNoCache)}},t.prototype.innerSwitch=function(e){var t=this;if(this.checkOSCacheAndDeferCall(!1,function(){return t.innerSwitch(e)}))try{OSCache.switchToVersion(e)}catch(e){n.error(a,e)}},t.OSCacheNotFoundMessage="OSCache not found (is a native plugin missing?)",t}(s),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requested=0,t.resourceQueue=[],t.count=0,t.total=0,t}return __extends(t,e),t.prototype.getCacheName=function(){return"Preloader"},t.prototype.innerStart=function(e){if(!this.isOngoing()&&(this.count=this.requested=this.total=0,this.resources=e.urlVersions,this.resources&&(this.resourceQueue=Object.getOwnPropertyNames(this.resources),this.total=this.resourceQueue.length,!(this.resourceQueue.length<=0))))for(var n=0;n<t.DefaultWindowSize;++n)this.prefetchNext()},t.prototype.innerSwitch=function(e){},t.prototype.isOngoing=function(){return this.requested>0||this.resourceQueue.length>0},t.prototype.prefetchNext=function(){var e=this,i=this.resourceQueue.pop(),o=this.resources[i],s=i+(o&&o.length>0?o:"");n.trace(a,"Requesting resource: "+s);var u=r.createNewHttpRequest();u.onload=u.onerror=u.ontimeout=function(){!e.onError||4===u.readyState&&200===u.status||e.onError("Failed to load resource '"+s+"' with status: "+u.statusText),e.onProgress&&e.onProgress(++e.count,e.total),e.requested--,0===e.resourceQueue.length&&0===e.requested?e.onFinish&&e.onFinish():e.resourceQueue.length>0&&e.prefetchNext()},this.requested++,u.open("GET",s,!0),u.timeout=t.DefaultResourceTimeout,u.send()},t.DefaultWindowSize=2,t.DefaultResourceTimeout=2e4,t}(s),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getCacheName=function(){return"Dummy"},t.prototype.innerStart=function(e){this.onFinish()},t.prototype.innerSwitch=function(e){},t}(s);t.ResourceCache=function(){return"undefined"==typeof document?new f:"undefined"!=typeof applicationCache&&document.documentElement.getAttribute("manifest")?new u:i.isRunningOnNative()?new c:new l}(),t.forceDummyCacheHandler=o}),define("OutSystems/ClientRuntime/RequireManager",["require","exports"],function(e,t){"use strict";function n(){r()}function r(){a()}function i(e){requirejs.onError=e}function o(t,n){void 0===n&&(n="scripts");var i={baseUrl:n,waitSeconds:30};if(t){for(var o in t)(e.specified(o)||e.defined(o))&&delete t[o];i.paths=t}var a=requirejs.config(i);return r(),a}function a(){var e=requirejs.s.contexts;Object.keys(e).forEach(function(t){var n=e[t];if(!n._osNameToUrlPatched){var r=n.nameToUrl;n.nameToUrl=function(e,t,i){return e.indexOf(s)>0&&-1===e.indexOf("?")&&(e=e.split(s,2)[0]),r.apply(n,[e,t,i])},n._osNameToUrlPatched=!0}})}Object.defineProperty(t,"__esModule",{value:!0});var s="$";t.initialize=n,t.setErrorHandler=i,t.configure=o}),define("OutSystems/ClientRuntime/ErrorHandling",["require","exports","./ApplicationInfo","./Logger","./Navigation","./StorageProvider","./Exceptions"],function(e,t,n,r,i,o,a){"use strict";function s(e,n,o,s){if(void 0===n&&(n=""),void 0===o&&(o=""),!i.hasPendingReload()&&(e&&r.error(null,e),i.isValidContext(s))){var u=i.VersionedURL.getVersionedUrl(t.ERROR_PAGE_HTML);t.ErrorHandlingStorage.errorPageMessage.set(n),t.ErrorHandlingStorage.errorPageExtraMessage.set(o),e?t.ErrorHandlingStorage.errorPageExceptionInfo.set(a.getExceptionInfo(e)):t.ErrorHandlingStorage.errorPageExceptionInfo.remove(),i.changeWindowLocation(u)}}function u(e,t){var r=n.getErrorPageConfig(),i=r&&r.messages&&r.messages.incompatibleProducer;this.navigateToErrorPage(e,i||e.message,null,t)}function c(e){var t=n.getErrorPageConfig(),r=t&&t.messages&&t.messages.appOffline;this.navigateToErrorPage(null,r||"This application is temporarily unavailable. Try reloading or contact the administrator.",null,e)}function l(e,t){r.trace(p,"Error thrown by the application: "+e),a.isApplicationOffline(e)?this.navigateToAppOffline(t):a.isInstanceOf(e,a.Exceptions.IncompatibleProducerException)?this.navigateToIncompatibleProducer(e,t):this.navigateToErrorPage(e,null,null,t)}function f(e,t){return!!a.isInstanceOf(e,a.Exceptions.IgnorableSystemException)||!!a.isApplicationOffline(e)&&(this.navigateToAppOffline(t),!0)}function d(e){return e===t.UNHANDLED_ERROR_RESULT||e===t.IGNORED_ERROR_RESULT}Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_PAGE_HTML="_error.html",t.UNHANDLED_ERROR_RESULT={errorCode:"UNHANDLED"},t.IGNORED_ERROR_RESULT={errorCode:"IGNORED"};var p="ErrorHandling";t.ErrorHandlingStorage={errorPageMessage:new o.StorageObject(o.StorageType.Session,"ErrorPageMessage",""),errorPageExtraMessage:new o.StorageObject(o.StorageType.Session,"ErrorPageExtraMessage",""),errorPageExceptionInfo:new o.StorageObject(o.StorageType.Session,"ErrorPageExceptionInfo",null)},t.navigateToErrorPage=s,t.navigateToIncompatibleProducer=u,t.navigateToAppOffline=c,t.handleError=l,t.ignoreError=f,t.isSpecialHandleErrorResult=d}),define("OutSystems/ClientRuntime/Performance",["require","exports"],function(e,t){"use strict";function n(e){a&&__PERFORMANCE.start(e)}function r(e){a&&__PERFORMANCE.end(e)}function i(){if(a)return __PERFORMANCE.dump()}function o(){if(a)return __PERFORMANCE.clear()}Object.defineProperty(t,"__esModule",{value:!0});var a="undefined"!=typeof __PERFORMANCE;t.start=n,t.end=r,t.dump=i,t.clear=o}),define("OutSystems/ClientRuntime/EventDispatcher",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.TransitionStart=0]="TransitionStart",e[e.TransitionEnd=1]="TransitionEnd",e[e.NavigationStart=2]="NavigationStart"}(n=t.EventType||(t.EventType={}));!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(t.TransitionEndResult||(t.TransitionEndResult={}));var r=0,i=function(){for(var e=[],t=Object.keys(n).length/2,r=0;r<t;r++)e.push({});return e}();!function(e){function t(){return"_"+r++}function n(e,n,r){void 0===r&&(r=!1);var o=t();return i[e][o]={listenOnce:r,callback:n},{type:e,id:o}}function o(e,t){return n(e,t,!0)}function a(e){return e&&s(e.type,e.id)}function s(e,t){return delete i[e][t]}function u(e){var t=void 0,n=i[e.type];for(var r in n){var o=n[r];o.listenOnce&&s(e.type,r);var a=o.callback(e.args);void 0!==a&&(t=a)}return t}e.listen=n,e.listenOnce=o,e.unregister=a,e.dispatch=u}(t.EventDispatcher||(t.EventDispatcher={}))}),define("OutSystems/ClientRuntime/VersionsManager",["require","exports","module","./ApplicationInfo","./StorageProvider","./ResourceCache","./Navigation","./RequireManager","./Flow","./Logger","./ErrorHandling","./Performance","./EventDispatcher","./Exceptions","./NativeHelper"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Generic=0]="Generic",e[e.Resources=1]="Resources",e[e.DataModel=2]="DataModel"}(t.UpgradeFailReason||(t.UpgradeFailReason={}));!function(e){e[e.Idle=0]="Idle",e[e.Upgrading=1]="Upgrading",e[e.UpgradeSuccess=2]="UpgradeSuccess",e[e.UpgradeFailed=3]="UpgradeFailed"}(t.UpgradeStatus||(t.UpgradeStatus={})),t.VersionsManagerStorage={applicationInfo:new i.StorageObject(i.StorageType.Persistent,"ApplicationInfo"),upgradeStatus:new i.StorageObject(i.StorageType.Session,"UpgradeStatus",0)};var g=function(){function e(){this.checkedCachedInfoConsistency=!1}return Object.defineProperty(e.prototype,"cachedAppInfo",{get:function(){var n=t.VersionsManagerStorage.applicationInfo.get();if(n&&!this.checkedCachedInfoConsistency){try{e.validateApplicationInfo(n)}catch(e){n=null,t.VersionsManagerStorage.applicationInfo.remove()}this.checkedCachedInfoConsistency=!0}return n},set:function(e){t.VersionsManagerStorage.applicationInfo.set(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentAppInfo",{get:function(){return this.pendingAppInfo?this.pendingAppInfo:this.cachedAppInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"upgradeStatus",{get:function(){return t.VersionsManagerStorage.upgradeStatus.get()},set:function(e){t.VersionsManagerStorage.upgradeStatus.set(e)},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e,t){var n=this;c.trace("VersionsManager","Initializing VersionsManager"),this.onVersionReady=t.onVersionReady||function(){},this.onUpgradeFinished=t.onUpgradeFinished||function(e){},this.onNewVersionDetected=!this.isUpgradeDisabled&&t.onNewVersionDetected||function(e){return Promise.resolve(null)};var i=t.onAppInfoReady||function(e){};return this.initialUpgradeStatus=this.upgradeStatus,r.getHomeModuleName()?(this.enableBackgroundCheckForNewVersions(),this.fetchApplicationManifest().then(function(t){if(n.pendingAppInfo=t,i(t),s.configure(n.buildScriptMap(t.manifest.urlVersions)),n.isNewVersion(t.manifest.versionToken)){if(!n.isUpgradeDisabled&&n.usingStaleIndex(t))return a.reloadCurrentLocation(!0),c.trace("VersionsManager","Reloading application - index.html was changed in the server"),!1;n.upgrade(t,e)}else n.initDataModel(e);return!0})):Promise.reject(Error("Home module not defined!"))},e.prototype.initDataModel=function(e){var t=this;c.trace("VersionsManager","Initializing data model"),e.then(function(e){return t.upgradeDataModel(e).then(function(){return t.switchDataModel(e)}).then(function(){t.onVersionReady()})}).then(function(){return t.setUpgradeStatus(0)}).catch(function(e){return t.handleInitError(e)})},e.prototype.cacheResourcesInBackground=function(e){var t=this;return c.trace("VersionsManager","Caching resources in the background..."),this.fetchApplicationManifest(!1).then(function(n){var r=t.usingStaleIndex(n);if(e&&e(r),a.forceReloadOnNextNavigation(r),t.isNewVersion(n.manifest.versionToken))return t.upgradeResources(n)}).catch(function(e){return c.trace("VersionsManager","Error caching resources for new version in the background: "+e)})},e.prototype.buildURLFromVersionedResource=function(e,t){return""+e+t},e.prototype.getBaseUrlFromRelativeUrl=function(e,t){return"/"+t+"/"+e},e.prototype.getResourceVersionToken=function(e,t){if(this.currentAppInfo)return this.getResourceVersionTokenFromManifest(e,t,this.currentAppInfo.manifest.urlVersions)},e.prototype.getResourceVersionTokenFromManifest=function(e,t,n){return n[this.getBaseUrlFromRelativeUrl(e,t)]},e.prototype.isNewVersion=function(e){return e!==this.getLastApplicationVersionToken()},e.prototype.getLastApplicationVersionToken=function(e){if(void 0===e&&(e=!1),e&&this.pendingAppInfo)return this.pendingAppInfo.manifest.versionToken;var t=this.cachedAppInfo;return t?t.manifest.versionToken:""},e.prototype.getVersionToken=function(e,t){return this.getResourceVersionToken(e,t)},e.prototype.getVersionedUrl=function(e,t){var n=this.getVersionToken(e,t);return n?this.buildURLFromVersionedResource(this.getBaseUrlFromRelativeUrl(e,t),n):e},e.prototype.buildScriptMap=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r],o=e[i];if(/\.js$/.exec(i)){var a=i.substring(i.lastIndexOf("/")+1,i.lastIndexOf(".js"));n.hasOwnProperty(a)||(n[a]=this.buildURLFromVersionedResource(i,o))}}return n},e.getJSONParseErrorMessage=function(e){return void 0===e&&(e=""),"Error parsing manifest JSON "+(e?", missing or invalid field: "+e+".":".")},e.validateApplicationInfo=function(e){if(!e)throw Error(this.getJSONParseErrorMessage());if(!e.manifest)throw Error(this.getJSONParseErrorMessage("manifest"));var t=e.manifest;if(!t.versionToken||"string"!=typeof t.versionToken)throw Error(this.getJSONParseErrorMessage("manifest.versionToken"));if(!t.urlVersions||"object"!=typeof t.urlVersions)throw Error(this.getJSONParseErrorMessage("manifest.urlVersions"));if(!t.urlMappings||"object"!=typeof t.urlMappings)throw Error(this.getJSONParseErrorMessage("manifest.urlMappings"));if(!t.urlMappingsNoCache||"object"!=typeof t.urlMappingsNoCache)throw Error(this.getJSONParseErrorMessage("manifest.urlMappingsNoCache"));if(!e.data)throw Error(this.getJSONParseErrorMessage("data"));var n=e.data;if(!n.modules||"object"!=typeof n.modules)throw Error(this.getJSONParseErrorMessage("data.modules"))},e.prototype.getLatestVersionFromServer=function(e){return void 0===e&&(e=!1),e&&OSManifestLoader.prefetchedVersion||OSManifestLoader.getLatestVersion()},e.prototype.checkForNewVersion=function(){var e=this;this.isUpgradeDisabled||this.isUpgradingVersion||!t.VersionsManagerStorage.applicationInfo.isDefined()||this.getLatestVersionFromServer(!1).then(function(t){e.getLastApplicationVersionToken()!==t&&e.onNewVersionDetected(!1)},function(e){c.trace("VersionsManager","Error checking for new version: "+e)})},e.prototype.upgrade=function(e,t){var n=this
;c.trace("VersionsManager","New application version detected, starting upgrade..."),this.setUpgradeStatus(1);var r=this.upgradeResources(e).catch(function(e){return n.handleUpgradeError(e,1,Promise.resolve())}),i=t.then(function(e){return n.upgradeDataModel(e)}).catch(function(e){return n.handleUpgradeError(e,2,r)});Promise.all([r,i]).then(function(){1===n.upgradeStatus&&n.commitNewVersion(e,t).then(function(e){e&&n.onVersionReady()})}).catch(function(e){return n.handleUpgradeError(e)})},e.prototype.commitNewVersion=function(e,t){var n=this;return t.then(function(e){return n.switchDataModel(e)}).then(function(){return n.switchResourcesVersion(e.manifest.versionToken)}).then(function(){var t=!n.cachedAppInfo;return n.cachedAppInfo=e,n.setUpgradeStatus(t?0:2),!0})},e.prototype.upgradeResources=function(e){return f.start("VersionsManager upgradeResources"),u.tryFinally(function(){return o.ResourceCache.start(e.manifest)},function(){return f.end("VersionsManager upgradeResources")})},e.prototype.upgradeDataModel=function(e){var t=this;return f.start("VersionsManager upgradeDataModel"),u.tryFinally(function(){return t.doForEachClientEntitiesModule(e,function(e,t){return t.init(e)})},function(){return f.end("VersionsManager upgradeDataModel")})},e.prototype.doForEachClientEntitiesModule=function(e,t){var n=r.getClientEntitiesModules(),i=[];return u.forEachAsync(n,function(e){return u.promise(function(t,n){requirejs([e],function(e){i.push(e),t()},n)})}).then(function(){return e.executeTransaction(function(e){return e.feed(null).andThenAll(function(e){return i.map(function(e){return function(n){return t(n,e)}})})})})},e.prototype.switchResourcesVersion=function(e){o.ResourceCache.switch(e)},e.prototype.switchDataModel=function(e){return this.doForEachClientEntitiesModule(e,function(e,t){return t.switch(e)})},e.prototype.handleInitError=function(e){var t=this.isUpgradeDisabled?"Upgrade failed and rollback isn't possible at this time":"Unable to load the data model";c.error("VersionsManager",t,e),l.handleError(e)},e.prototype.handleUpgradeError=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Promise.resolve()),p.isInstanceOf(e,p.Exceptions.OpenDatabaseException)?(c.error("VersionsManager","Upgrade failed - unable to open the database.",e),l.handleError(e),Promise.resolve()):a.hasPendingReload()||3===this.initialUpgradeStatus?3===this.initialUpgradeStatus?(l.handleError(e),Promise.resolve()):(c.trace("VersionsManager","Upgrade failed - ignoring error due to concurrent navigation."),3!==this.upgradeStatus&&this.setUpgradeStatus(0),Promise.resolve()):(c.error("VersionsManager","Upgrade failed - rolling back to previous application version.",e),this.rollBackApplicationVersion(t,n))},Object.defineProperty(e.prototype,"isUpgradingVersion",{get:function(){return 1===this.upgradeStatus},enumerable:!0,configurable:!0}),e.prototype.setUpgradeStatus=function(e,t){return void 0===t&&(t=0),this.upgradeStatus=e,c.trace("VersionsManager","Upgrade status changed to: "+e),2===e?this.onUpgradeFinished(!0):3===e?this.onUpgradeFinished(!1,t):void 0},e.prototype.rollBackApplicationVersion=function(e,t){var n=this;return this.loadCachedManifest().then(function(r){if(n.setUpgradeStatus(3,e),1!==e)return t.then(function(){return o.ResourceCache.start(r.manifest)})}).then(function(){a.reloadApplication(!1)}).catch(function(e){l.handleError(e)})},Object.defineProperty(e.prototype,"isUpgradeDisabled",{get:function(){return 3===this.upgradeStatus},enumerable:!0,configurable:!0}),e.prototype.usingStaleIndex=function(e){return!a.currentLocationHasTimestamp()&&(OSManifestLoader.indexVersionToken||this.getIndexVersion(this.cachedAppInfo))!==this.getIndexVersion(e)},e.prototype.getIndexVersion=function(e){if(!e)return"";var t=this.getResourceVersionTokenFromManifest("index.html",r.getHomeModuleName(),e.manifest.urlVersions);return t?t.substr(1):""},e.prototype.loadCachedManifest=function(){var t=this;return this.ensureCachedManifest().then(function(){return t.cachedAppInfo?Promise.resolve(t.cachedAppInfo):OSManifestLoader.getCachedManifest().then(function(t){return e.validateApplicationInfo(t),t})})},e.prototype.ensureCachedManifest=function(){return h.isRunningOnNative()||this.cachedAppInfo?Promise.resolve():(this.setUpgradeStatus(0),Promise.reject(new Error("No cached manifest found. It's not possible to rollback to a previous version.")))},e.prototype.getLatestManifestFromServer=function(t){return OSManifestLoader.getLatestManifest(t).then(function(t){return e.validateApplicationInfo(t),t})},e.prototype.fetchApplicationManifest=function(e){var t=this;return void 0===e&&(e=!0),f.start("VersionsManager fetchApplicationManifest"),this.isUpgradeDisabled?this.loadCachedManifest():this.getLatestVersionFromServer(e).then(function(e){return t.isNewVersion(e)?t.getLatestManifestFromServer(e):t.loadCachedManifest()}).catch(function(){return t.loadCachedManifest()}).then(function(e){return f.end("VersionsManager fetchApplicationManifest"),e})},e.prototype.enableBackgroundCheckForNewVersions=function(){var e=this,t=!1;d.EventDispatcher.listen(d.EventType.NavigationStart,function(){return t=!0}),d.EventDispatcher.listen(d.EventType.TransitionEnd,function(){t=!1,setTimeout(function(){t||e.checkForNewVersion()},1e3)})},e}();t.VersionsManager=g;var m=new g;t.default=m,m.default=m,m.VersionsManagerStorage=t.VersionsManagerStorage,n.exports=m}),define("OutSystems/ClientRuntime/FeedbackMessageService",["require","exports"],function(e,t){"use strict";function n(e){a=e,s&&(s(),s=null)}function r(e){u=e}function i(e,t,n,r,i,o){if(void 0===n&&(n=!0),void 0===r&&(r=""),void 0===i&&(i=!0),u){var c=function(){return a.showMessage(e,t,n,r,i,o)};a?c():s=c}}function o(){if(u){a?function(){a.closeMessage()}():s=null}}Object.defineProperty(t,"__esModule",{value:!0});var a,s,u=!0;t.registerFeedbackMessageService=n,t.setEnabled=r,t.showFeedbackMessage=i,t.closeFeedbackMessage=o}),define("OutSystems/ClientRuntime/CookiesManager",["require","exports"],function(e,t){"use strict";function n(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.readCookie=n}),define("OutSystems/ClientRuntime/Communication",["require","exports","./Flow","./Request","./Exceptions","./CookiesManager","./ClientInfo"],function(e,t,n,r,i,o,a){"use strict";function s(){return Math.floor(9007199254740992*Math.random())+0}function u(e){E&&E(e)}function c(e,t){void 0===t&&(t="POST");var n=r.createNewHttpRequest();return n.open(t,e),n.setRequestHeader(w.CSRFHeader,w.getCSRFToken()),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.setRequestHeader("Accept","application/json"),n}function l(e,t){return n.promise(function(n,r){var i="/"+t+"/moduleservices/checkrequestsuspended?requestToken="+e,o=c(i,"GET"),a=function(){return r(!1)};o.onload=function(){200===o.status?n(JSON.parse(o.responseText)):a()},o.ontimeout=a,o.onerror=a,o.onabort=a,o.timeout=1e4,o.send()})}function f(e,t,n,i,o){if(i)if(o){var a=s().toString(),u=setTimeout(function(){r.isDone(e)||l(a,n).then(function(t){t||(e.abort(),e.ontimeout(null))})},1e3*i);e.addEventListener("onloadend",function(){return clearTimeout(u)}),e.setRequestHeader(I+"Request-Token",a)}else e.timeout=1e3*i;e.send(t)}function d(e,t,n){return void 0===n&&(n=!1),"Unable to access '"+e+"'"+(n?" (request aborted)":"")+". Error Code: "+t}function p(e,t,n,i,o){return void 0===t&&(t=void 0),void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===o&&(o=!0),new Promise(function(a,s){if(n&&"undefined"!=typeof navigator&&!navigator.onLine)return s("Unable to access '"+e+"' - There's no network connection.");var u=r.createNewHttpRequest();u.onload=function(){if(4!==u.readyState||200!==u.status)return s(d(e,u.status));var t;if(i){try{t=JSON.parse(u.responseText.substring(u.responseText.indexOf("{"),u.responseText.length))}catch(e){return s(e)}if(!t)return s(Error("Unable to parse payload downloaded from '"+e+"'."))}a(t)},u.onerror=u.ontimeout=function(){return s(Error(d(e,u.status)))},u.onabort=function(){return s(Error(d(e,u.status,!0)))};var c=o?"":"?"+(new Date).getTime();u.open("GET",e+c,!0),t&&(u.timeout=t),u.setRequestHeader("Accept","application/json"),m(u),u.send()})}function h(e,t,r,o,a,s,l,d,p){return void 0===o&&(o=void 0),void 0===l&&(l=!1),void 0===d&&(d=0),n.promise(function(n,h){var g=c(e),T=e+d,b=l?N.startTracking(T):-1;g.onload=function(){if(l)try{var t=N.getRequestInfo(b,T);if(t.isOutOfOrder)return h(new i.Exceptions.OutOfOrderException("Response out of endpoint order: Endpoint= "+e+" Last= "+t.lastRequestId+" Got= "+b))}finally{N.stopTracking(T)}var r=200===g.status,o=503===g.status&&"application/json"===g.getResponseHeader("Content-Type");if(!r&&!o)return void(404===g.status?(u(!0),h(new i.Exceptions.ViewHasChangedException)):h(new i.Exceptions.CommunicationException("Request failed with status "+g.status)));try{var a=JSON.parse(g.responseText);if(!o){if(a.versionInfo&&a.versionInfo.hasModuleVersionChanged){if(a.versionInfo.hasApiVersionChanged)return u(!0),void h(new i.Exceptions.ViewHasChangedException);u(!1)}if(s){var c=v(g);s(a,c)}}a.exception?h(i.getException(a.exception)):n(a.data)}catch(e){h(e)}},g.onerror=function(){h(new i.Exceptions.CommunicationException("Request failed with an error"))},void 0!==o&&(g.ontimeout=function(){a&&a(),h(new i.Exceptions.CommunicationException("The connection has timed out"))}),y(g,p),m(g),f(g,JSON.stringify(t),r,o,x)})}function g(e){return n.promise(function(t,n){var r="moduleservices/log",o=(new Date).getTime(),a=c(r+"?clientTimeInMillis="+o);a.onload=function(){200===a.status?t(!0):n(new i.Exceptions.CommunicationException("Logger: Error sending log to "+r+". Error Code: "+a.status))},a.onerror=function(){n(new i.Exceptions.CommunicationException("Logger: Error sending log to "+r+". Error Code: "+a.status))},a.onabort=function(){n(new i.Exceptions.CommunicationException("Logger: Error sending log to "+r+" (Aborted). Error Code: "+a.status))},a.timeout=D,m(a),a.send(JSON.stringify(e))})}function m(e){var t=a.getClientInfo();t&&t.device&&t.device.uuid&&e.setRequestHeader(I+"device-uuid",t.device.uuid)}function y(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(I+n,t[n])}function v(e){var t={};return e?(e.getAllResponseHeaders()||"").split(A).filter(function(e){return!!e.match(S)}).map(function(e){return e.substr(I.length)}).reduce(function(e,t){var n=t.indexOf(":"),r=t.substr(0,n),i=t.substr(n+1).trim();return e[r]=i,e},t):t}function T(e,t,n){x=e,t&&(b=t),n&&(E=n)}Object.defineProperty(t,"__esModule",{value:!0});var b,E,w,D=1e4,I="OutSystems-",S=new RegExp("^"+I,"i"),A=/[\r\n]+/,x=!1;!function(e){function t(){var t=o.readCookie(b);if(null==t)return e.AnonymousCSRFToken;var n=/crf=([^;]+)/,r=t.match(n);if(null==r)throw new Error("Cookie format error: no 'crf' key found");return r[1]}e.CSRFHeader="X-CSRFToken",e.AnonymousCSRFToken="T6C+9iB49TLra4jEsMeSckDMNhQ=",e.getCSRFToken=t}(w=t.CSRF||(t.CSRF={}));var _;!function(e){function t(){var e="undefined"!=typeof window?window:global;return!(e&&e.cordova&&e.navigator&&e.navigator.connection)||"none"!==e.navigator.connection.type}function n(e){"undefined"!=typeof document&&document.addEventListener&&document.addEventListener("online",e,!1)}function r(e){"undefined"!=typeof document&&document.addEventListener&&document.addEventListener("offline",e,!1)}function i(e){return p("moduleservices/ping",e,!0,!1)}e.isOnline=t,e.onOnline=n,e.onOffline=r,e.ping=i}(_||(_={})),t.NetworkStatus=_,t.get=p,t.post=h,t.postLog=g;var N;!function(e){function t(e){i++;var t=o[e];return t?(t.requestId=i,t.counter++):o[e]={requestId:i,counter:1},i}function n(e){var t=o[e];if(!t)throw new Error("There's no requestInfo for url : "+e);--t.counter<=0&&delete o[e]}function r(e,t){var n=o[t];if(!n)throw new Error("There's no requestInfo for url : "+t);var r=n.requestId;return{isOutOfOrder:r>e,lastRequestId:r}}var i=0,o={};e.startTracking=t,e.stopTracking=n,e.getRequestInfo=r}(N||(N={})),t.initialize=T}),define("OutSystems/ClientRuntime/LightImmutable",["require","exports"],function(e,t){"use strict";function n(e){for(var t=e.length,n=new Array(t);t-- >0;)n[t]=e[t];return n}function r(e){var t=Object.keys(e),n="function ImmutableRecord"+i+"(o) { this._ = o || defaults }\nfunction R"+i+"(o) {\n";t.forEach(function(e){return n+="this."+e+" = o."+e+";\n"}),n+="}\n";var r="switch(key){\n";t.forEach(function(e){r+='case "'+e+'": return this._.'+e+";\n"}),r+="}";var o="var clone = new R"+i+"(this._);\n";o+="switch (key) {\n",t.forEach(function(e){o+='case "'+e+'": clone.'+e+"=value;break;"}),o+="}\n",o+="return new ImmutableRecord"+i+"(clone);\n";var a="return {\n";a+=t.map(function(e){return e+": this._."+e}).join(",\n"),a+="\n};";var s=n+"ImmutableRecord"+i+".prototype.get = function(key){"+r+"};\nImmutableRecord"+i+".prototype.set = function(key,value){"+o+"};\nImmutableRecord"+i+".prototype.toJS = function(){"+a+"};\nreturn ImmutableRecord"+i+";";return i++,new Function("defaults",s)(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=0;t.defineRecordClass=r;var o=function(){function e(t,n){if(void 0!==n)this._values=t,this._lengths=n;else if(void 0!==t){var r=e.fromJS(t);this._values=r._values,this._lengths=r._lengths}else this._values=[],this._lengths=[]}return e.prototype.clear=function(){return new e},e.prototype.clone=function(){return this},e.prototype.count=function(){for(var e=0,t=this._lengths.length;t-- >0;)e+=this._lengths[t];return e},e.prototype.isEmpty=function(){return 0===this._lengths.length},e.prototype.get=function(e){for(var t=0,n=e,r=this._lengths.length;t<r&&e>=0;){if(n<this._lengths[t])return this._values[t][n];n-=this._lengths[t],t++}},e.prototype.set=function(t,r){for(var i=0,o=t,a=n(this._values),s=this._lengths,u=s.length;i<u&&t>=0;){if(o<this._lengths[i])return a[i]=n(a[i]),a[i][o]=r,new e(a,s);o-=s[i],i++}},e.prototype.push=function(t){var r,i,o=this._values.length-1;o<0?(o=0,r=[[]],i=[0]):(r=n(this._values),i=n(this._lengths));var a=r[o];if(a.length<128){for(var s=a.length,u=new Array(s+1),c=s;c-- >0;)u[c]=a[c];u[s]=t,r[o]=u,i[o]++}else{var l=[t];r.push(l),i.push(1)}return new e(r,i)},e.prototype.insert=function(t,r){for(var i=0,o=t,a=n(this._values),s=n(this._lengths),u=s.length;i<u&&o>=0;){if(o<s[i]){if(128===s[i]){s.splice(i,1,64,64);for(var c=new Array(64),l=new Array(64),f=0;f<64;f++)c[f]=a[i][f];for(var d=0,p=64;d<64;)l[d++]=a[i][p++];a.splice(i,1,c,l),u++;continue}for(var h=0,g=s[i],m=new Array(g+1),y=a[i];h<o;h++)m[h]=y[h];m[o]=r;for(var v=h+1;h<g;)m[v++]=y[h++];return s[i]++,a[i]=m,new e(a,s)}o-=s[i],i++}return s.push(1),a.push([r]),new e(a,s)},e.prototype.remove=function(t){for(var r=0,i=t,o=n(this._lengths),a=n(this._values),s=o.length;r<s&&i>=0;){if(i<o[r]){for(var u=--o[r],c=new Array(u),l=0,f=0;l<u;)l===i&&f++,c[l++]=a[r][f++];return a[r]=c,0===o[r]&&(o.splice(r,1),a.splice(r,1)),new e(a,o)}i-=o[r],r++}},e.prototype.reduce=function(e,t){for(var n=0;n<this._values.length;n++)for(var r=this._values[n],i=0;i<r.length;i++)t=e(t,r[i]);return t},e.prototype.map=function(e){for(var t=new Array(this.count()),n=0,r=0;r<this._values.length;r++)for(var i=this._values[r],o=0;o<i.length;o++)t[n]=e(i[o],n),n++;return t},e.prototype.pushAll=function(t){if(0===t.length)return this;var n=new e(t);return new e(this._values.concat(n._values),this._lengths.concat(n._lengths))},e.prototype.forEach=function(e){for(var t=0;t<this._values.length;t++)for(var n=this._values[t],r=0;r<n.length;r++)e(n[r])},e.prototype.addFromOther=function(t){if(0===t.count())return this;if(0===this._values.length)return t;for(var n=new Array(this._lengths.length+t._lengths.length),r=new Array(this._values.length+t._values.length),i=0,o=0;i<this._values.length;)r[i]=this._values[i],n[i]=this._lengths[i],i++;for(;o<t._values.length;)r[i]=t._values[o],n[i]=t._lengths[o],i++,o++;return new e(r,n)},e.fromJS=function(t){for(var n=0|Math.ceil(t.length/128),r=new Array(n),i=new Array(n),o=0,a=0,s=0;s<n;s++){a=t.length-o;var u=a>128?128:a;i[s]=u,r[s]=new Array(u);for(var c=0;c<u;c++)r[s][c]=t[o+c];o+=u}return new e(r,i)},e}();t.ImmutableList=o}),function(e,t){"function"==typeof define&&define.amd?define("long",[],t):"function"==typeof require&&"object"==typeof module&&module&&module.exports?module.exports=t():(e.dcodeIO=e.dcodeIO||{}).Long=t()}(this,function(){function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}function n(e,t){var n,r;if(t){if(e>>>=0,(r=0<=e&&256>e)&&(n=u[e]))return n;n=i(e,0>(0|e)?-1:0,!0),r&&(u[e]=n)}else{if(e|=0,(r=-128<=e&&128>e)&&(n=s[e]))return n;n=i(e,0>e?-1:0,!1),r&&(s[e]=n)}return n}function r(e,t){if(isNaN(e)||!isFinite(e))return t?h:p;if(t){if(0>e)return h;if(e>=l)return T}else{if(e<=-f)return b;if(e+1>=f)return v}return 0>e?r(-e,t).neg():i(e%4294967296|0,e/4294967296|0,t)}function i(t,n,r){return new e(t,n,r)}function o(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return p;if("number"==typeof t?(n=t,t=!1):t=!!t,2>(n=n||10)||36<n)throw RangeError("radix");var i;if(0<(i=e.indexOf("-")))throw Error("interior hyphen");if(0===i)return o(e.substring(1),t,n).neg();i=r(c(n,8));for(var a=p,s=0;s<e.length;s+=8){var u=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+u),n);8>u?(u=r(c(n,u)),a=a.mul(u).add(r(l))):(a=a.mul(i),a=a.add(r(l)))}return a.unsigned=t,a}function a(t){return t instanceof e?t:"number"==typeof t?r(t):"string"==typeof t?o(t):i(t.low,t.high,t.unsigned)}Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var s={},u={};e.fromInt=n,e.fromNumber=r,e.fromBits=i;var c=Math.pow;e.fromString=o,e.fromValue=a;var l=0x10000000000000000,f=l/2,d=n(16777216),p=n(0);e.ZERO=p;var h=n(0,!0);e.UZERO=h;var g=n(1);e.ONE=g;var m=n(1,!0);e.UONE=m;var y=n(-1);e.NEG_ONE=y;var v=i(-1,2147483647,!1);e.MAX_VALUE=v;var T=i(-1,-1,!0);e.MAX_UNSIGNED_VALUE=T;var b=i(0,-2147483648,!1);return e.MIN_VALUE=b,m=e.prototype,m.toInt=function(){return this.unsigned?this.low>>>0:this.low},m.toNumber=function(){return this.unsigned?4294967296*(this.high>>>0)+(this.low>>>0):4294967296*this.high+(this.low>>>0)},m.toString=function(e){if(2>(e=e||10)||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var t=r(e),n=this.div(t),t=n.mul(t).sub(this);return n.toString(e)+t.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=r(c(e,6),this.unsigned),t=this,i="";;){var o=t.div(n),a=(t.sub(o.mul(n)).toInt()>>>0).toString(e),t=o;if(t.isZero())return a+i;for(;6>a.length;)a="0"+a;i=""+a+i}},m.getHighBits=function(){return this.high},m.getHighBitsUnsigned=function(){return this.high>>>0},m.getLowBits=function(){return this.low},m.getLowBitsUnsigned=function(){return this.low>>>0},m.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},m.isZero=function(){return 0===this.high&&0===this.low},m.isNegative=function(){return!this.unsigned&&0>this.high},m.isPositive=function(){return this.unsigned||0<=this.high},m.isOdd=function(){return 1==(1&this.low)},m.isEven=function(){return 0==(1&this.low)},m.equals=function(e){return t(e)||(e=a(e)),(this.unsigned===e.unsigned||1!=this.high>>>31||1!=e.high>>>31)&&(this.high===e.high&&this.low===e.low)},m.eq=m.equals,m.notEquals=function(e){return!this.eq(e)},m.neq=m.notEquals,m.lessThan=function(e){return 0>this.comp(e)},m.lt=m.lessThan,m.lessThanOrEqual=function(e){return 0>=this.comp(e)},m.lte=m.lessThanOrEqual,m.greaterThan=function(e){return 0<this.comp(e)},m.gt=m.greaterThan,m.greaterThanOrEqual=function(e){return 0<=this.comp(e)},m.gte=m.greaterThanOrEqual,m.compare=function(e){if(t(e)||(e=a(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},m.comp=m.compare,m.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(g)},m.neg=m.negate,m.add=function(e){t(e)||(e=a(e));var n,r=this.high>>>16,o=65535&this.high,s=this.low>>>16,u=e.high>>>16,c=65535&e.high,l=e.low>>>16;return n=(65535&this.low)+(65535&e.low)+0,e=0+(n>>>16),e+=s+l,s=0+(e>>>16),s+=o+c,o=0+(s>>>16),o=o+(r+u)&65535,i((65535&e)<<16|65535&n,o<<16|65535&s,this.unsigned)},m.subtract=function(e){return t(e)||(e=a(e)),this.add(e.neg())},m.sub=m.subtract,m.multiply=function(e){if(this.isZero())return p;if(t(e)||(e=a(e)),e.isZero())return p;if(this.eq(b))return e.isOdd()?b:p;if(e.eq(b))return this.isOdd()?b:p;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(d)&&e.lt(d))return r(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,s=this.low>>>16,u=65535&this.low,c=e.high>>>16,l=65535&e.high,f=e.low>>>16;e=65535&e.low;var h,g,m,y;return y=0+u*e,m=0+(y>>>16),m+=s*e,g=0+(m>>>16),m=(65535&m)+u*f,g+=m>>>16,m&=65535,g+=o*e,h=0+(g>>>16),g=(65535&g)+s*f,h+=g>>>16,g&=65535,g+=u*l,h+=g>>>16,g&=65535,h=h+(n*e+o*f+s*l+u*c)&65535,i(m<<16|65535&y,h<<16|g,this.unsigned)},m.mul=m.multiply,m.divide=function(e){if(t(e)||(e=a(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?h:p;var n,i,o;if(this.eq(b))return e.eq(g)||e.eq(y)?b:e.eq(b)?g:(n=this.shr(1).div(e).shl(1),n.eq(p)?e.isNegative()?g:y:(i=this.sub(e.mul(n)),o=n.add(i.div(e))));if(e.eq(b))return this.unsigned?h:p;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();for(o=p,i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:c(2,s-48),u=r(n),l=u.mul(e);l.isNegative()||l.gt(i);)n-=s,u=r(n,this.unsigned),l=u.mul(e);u.isZero()&&(u=g),o=o.add(u),i=i.sub(l)}return o},m.div=m.divide,m.modulo=function(e){return t(e)||(e=a(e)),this.sub(this.div(e).mul(e))},m.mod=m.modulo,m.not=function(){return i(~this.low,~this.high,this.unsigned)},m.and=function(e){return t(e)||(e=a(e)),i(this.low&e.low,this.high&e.high,this.unsigned)},m.or=function(e){return t(e)||(e=a(e)),i(this.low|e.low,this.high|e.high,this.unsigned)},m.xor=function(e){return t(e)||(e=a(e)),i(this.low^e.low,this.high^e.high,this.unsigned)},m.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?i(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):i(0,this.low<<e-32,this.unsigned)},m.shl=m.shiftLeft,m.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?i(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):i(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},m.shr=m.shiftRight,m.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0===(e&=63))return this;var n=this.high;return 32>e?i(this.low>>>e|n<<32-e,n>>>e,this.unsigned):32===e?i(n,0,this.unsigned):i(n>>>e-32,0,this.unsigned)},m.shru=m.shiftRightUnsigned,m.toSigned=function(){return this.unsigned?i(this.low,this.high,!1):this},m.toUnsigned=function(){return this.unsigned?this:i(this.low,this.high,!0)},e}),function(e){"use strict";function t(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;i>t;t++)r=e[t]+"",n=Me-r.length,n&&(o+=d(n)),o+=r;a=e[t],r=a+"",(n=Me-r.length)&&(o+=d(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function n(e,t,n){if(e!==~~e||t>e||e>n)throw Error(Se+e)}function r(e,t,n,r){var i,o,a,s;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=Me,i=0):(i=Math.ceil((t+1)/Me),t%=Me),o=_e(10,Me-t),s=e[i]%o|0,null==r?3>t?(0==t?s=s/100|0:1==t&&(s=s/10|0),a=4>n&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(4>n&&s+1==o||n>3&&s+1==o/2)&&(e[i+1]/o/100|0)==_e(10,t-2)-1||(s==o/2||0==s)&&0==(e[i+1]/o/100|0):4>t?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),a=(r||4>n)&&9999==s||!r&&n>3&&4999==s):a=((r||4>n)&&s+1==o||!r&&n>3&&s+1==o/2)&&(e[i+1]/o/1e3|0)==_e(10,t-3)-1,a}function i(e,t,n){for(var r,i,o=[0],a=0,s=e.length;s>a;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=ve.indexOf(e.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}function o(e,t){var n,r,i=t.d.length;32>i?(n=Math.ceil(i/3),r=Math.pow(4,-n).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=w(e,1,t.times(r),new e(ge));for(var o=n;o--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(ge)}return e.precision-=n,t}function a(e,t,n,r){var i,o,a,s,u,c,l,f,d,p=e.constructor;e:if(null!=t){if(!(f=e.d))return e;for(i=1,s=f[0];s>=10;s/=10)i++;if(0>(o=t-i))o+=Me,a=t,l=f[d=0],u=l/_e(10,i-a-1)%10|0;else if(d=Math.ceil((o+1)/Me),s=f.length,d>=s){if(!r)break e;for(;s++<=d;)f.push(0);l=u=0,i=1,o%=Me,a=o-Me+1}else{for(l=s=f[d],i=1;s>=10;s/=10)i++;o%=Me,a=o-Me+i,u=0>a?0:xe(l/_e(10,i-a-1)%10)}if(r=r||0>t||void 0!==f[d+1]||(0>a?l:l%_e(10,i-a-1)),c=4>n?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(o>0?a>0?l/_e(10,i-a):0:f[d-1])%10&1||n==(e.s<0?8:7)),1>t||!f[0])return f.length=0,c?(t-=e.e+1,f[0]=_e(10,(Me-t%Me)%Me),e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=d,s=1,d--):(f.length=d+1,s=_e(10,Me-o),f[d]=a>0?(l/_e(10,i-a)%_e(10,a)|0)*s:0),c)for(;;){if(0==d){for(o=1,a=f[0];a>=10;a/=10)o++;for(a=f[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(e.e++,f[0]==Le&&(f[0]=1));break}if(f[d]+=s,f[d]!=Le)break;f[d--]=0,s=1}for(o=f.length;0===f[--o];)f.pop()}return De&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function s(e,n,r){if(!e.isFinite())return v(e);var i,o=e.e,a=t(e.d),s=a.length;return n?(r&&(i=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+d(i):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):0>o?(a="0."+d(-o-1)+a,r&&(i=r-s)>0&&(a+=d(i))):o>=s?(a+=d(o+1-s),r&&(i=r-o-1)>0&&(a=a+"."+d(i))):((i=o+1)<s&&(a=a.slice(0,i)+"."+a.slice(i)),r&&(i=r-s)>0&&(o+1===s&&(a+="."),a+=d(i))),a}function u(e,t){for(var n=1,r=e[0];r>=10;r/=10)n++;return n+t*Me-1}function c(e,t,n){if(t>Fe)throw De=!0,n&&(e.precision=n),Error(Ae);return a(new e(Te),t,1,!0)}function l(e,t,n){if(t>Pe)throw Error(Ae);return a(new e(be),t,n,!0)}function f(e){var t=e.length-1,n=t*Me+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function d(e){for(var t="";e--;)t+="0";return t}function p(e,t,n,r){var i,o=new e(ge),a=Math.ceil(r/Me+4);for(De=!1;;){if(n%2&&(o=o.times(t),S(o.d,a)&&(i=!0)),0===(n=xe(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}t=t.times(t),S(t.d,a)}return De=!0,o}function h(e){return 1&e.d[e.d.length-1]}function g(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;){if(r=new e(t[o]),!r.s){i=r;break}i[n](r)&&(i=r)}return i}function m(e,n){var i,o,s,u,c,l,f,d=0,p=0,h=0,g=e.constructor,m=g.rounding,y=g.precision;if(!e.d||!e.d[0]||e.e>17)return new g(e.d?e.d[0]?e.s<0?0:1/0:ge:e.s?e.s<0?0:e:NaN);for(null==n?(De=!1,f=y):f=n,l=new g(.03125);e.e>-2;)e=e.times(l),h+=5;for(o=Math.log(_e(2,h))/Math.LN10*2+5|0,f+=o,i=u=c=new g(ge),g.precision=f;;){if(u=a(u.times(e),f,1),i=i.times(++p),l=c.plus(Ue(u,i,f,1)),t(l.d).slice(0,f)===t(c.d).slice(0,f)){for(s=h;s--;)c=a(c.times(c),f,1);if(null!=n)return g.precision=y,c;if(!(3>d&&r(c.d,f-o,m,d)))return a(c,g.precision=y,m,De=!0);g.precision=f+=10,i=u=l=new g(ge),p=0,d++}c=l}}function y(e,n){var i,o,s,u,l,f,d,p,h,g,m,v=1,T=e,b=T.d,E=T.constructor,w=E.rounding,D=E.precision;if(T.s<0||!b||!b[0]||!T.e&&1==b[0]&&1==b.length)return new E(b&&!b[0]?-1/0:1!=T.s?NaN:b?0:T);if(null==n?(De=!1,h=D):h=n,E.precision=h+=10,i=t(b),o=i.charAt(0),!(Math.abs(u=T.e)<15e14))return p=c(E,h+2,D).times(u+""),T=y(new E(o+"."+i.slice(1)),h-10).plus(p),E.precision=D,null==n?a(T,D,w,De=!0):T;for(;7>o&&1!=o||1==o&&i.charAt(1)>3;)T=T.times(e),i=t(T.d),o=i.charAt(0),v++;for(u=T.e,o>1?(T=new E("0."+i),u++):T=new E(o+"."+i.slice(1)),g=T,d=l=T=Ue(T.minus(ge),T.plus(ge),h,1),m=a(T.times(T),h,1),s=3;;){if(l=a(l.times(m),h,1),p=d.plus(Ue(l,new E(s),h,1)),t(p.d).slice(0,h)===t(d.d).slice(0,h)){if(d=d.times(2),0!==u&&(d=d.plus(c(E,h+2,D).times(u+""))),d=Ue(d,new E(v),h,1),null!=n)return E.precision=D,d;if(!r(d.d,h-10,w,f))return a(d,E.precision=D,w,De=!0);E.precision=h+=10,p=l=T=Ue(g.minus(ge),g.plus(ge),h,1),m=a(T.times(T),h,1),s=f=1}d=p,s+=2}}function v(e){return String(e.s*e.s/0)}function T(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(0>n&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):0>n&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Me,0>n&&(r+=Me),i>r){for(r&&e.d.push(+t.slice(0,r)),i-=Me;i>r;)e.d.push(+t.slice(r,r+=Me));t=t.slice(r),r=Me-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),De&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function b(e,t){var n,r,o,a,s,c,l,f,d;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Ce.test(t))n=16,t=t.toLowerCase();else if(Ne.test(t))n=2;else{if(!Oe.test(t))throw Error(Se+t);n=8}for(a=t.search(/p/i),a>0?(l=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),s=a>=0,r=e.constructor,s&&(t=t.replace(".",""),c=t.length,a=c-a,o=p(r,new r(n),a,2*a)),f=i(t,n,Le),d=f.length-1,a=d;0===f[a];--a)f.pop();return 0>a?new r(0*e.s):(e.e=u(f,d),e.d=f,De=!1,s&&(e=Ue(e,o,4*c)),l&&(e=e.times(Math.abs(l)<54?Math.pow(2,l):Ee.pow(2,l))),De=!0,e)}function E(e,t){var n,r=t.d.length;if(3>r)return w(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:0|n,t=t.times(Math.pow(5,-n)),t=w(e,2,t,t);for(var i,o=new e(5),a=new e(16),s=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(a.times(i).minus(s))));return t}function w(e,t,n,r,i){var o,a,s,u,c=1,l=e.precision,f=Math.ceil(l/Me);for(De=!1,u=n.times(n),s=new e(r);;){if(a=Ue(s.times(u),new e(t++*t++),l,1),s=i?r.plus(a):r.minus(a),r=Ue(a.times(u),new e(t++*t++),l,1),a=s.plus(r),void 0!==a.d[f]){for(o=f;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=r,r=a,a=o,c++}return De=!0,a.d.length=f+1,a}function D(e,t){var n,r=t.s<0,i=l(e,e.precision,1),o=i.times(he);if(t=t.abs(),t.lte(o))return pe=r?4:1,t;if(n=t.divToInt(i),n.isZero())pe=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(o))return pe=h(n)?r?2:3:r?4:1,t;pe=h(n)?r?1:4:r?3:2}return t.minus(i).abs()}function I(e,t,r,o){var a,u,c,l,f,d,p,h,g,m=e.constructor,y=void 0!==r;if(y?(n(r,1,ye),void 0===o?o=m.rounding:n(o,0,8)):(r=m.precision,o=m.rounding),e.isFinite()){for(p=s(e),c=p.indexOf("."),y?(a=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):a=t,c>=0&&(p=p.replace(".",""),g=new m(ge),g.e=p.length-c,g.d=i(s(g),10,a),g.e=g.d.length),h=i(p,10,a),u=f=h.length;0==h[--f];)h.pop();if(h[0]){if(0>c?u--:(e=new m(e),e.d=h,e.e=u,e=Ue(e,g,r,o,0,a),h=e.d,u=e.e,d=fe),c=h[r],l=a/2,d=d||void 0!==h[r+1],d=4>o?(void 0!==c||d)&&(0===o||o===(e.s<0?3:2)):c>l||c===l&&(4===o||d||6===o&&1&h[r-1]||o===(e.s<0?8:7)),h.length=r,d)for(;++h[--r]>a-1;)h[r]=0,r||(++u,h.unshift(1));for(f=h.length;!h[f-1];--f);for(c=0,p="";f>c;c++)p+=ve.charAt(h[c]);if(y){if(f>1)if(16==t||8==t){for(c=16==t?4:3,--f;f%c;f++)p+="0";for(h=i(p,a,t),f=h.length;!h[f-1];--f);for(c=1,p="1.";f>c;c++)p+=ve.charAt(h[c])}else p=p.charAt(0)+"."+p.slice(1);p=p+(0>u?"p":"p+")+u}else if(0>u){for(;++u;)p="0"+p;p="0."+p}else if(++u>f)for(u-=f;u--;)p+="0";else f>u&&(p=p.slice(0,u)+"."+p.slice(u))}else p=y?"0p+0":"0";p=(16==t?"0x":2==t?"0b":8==t?"0o":"")+p}else p=v(e);return e.s<0?"-"+p:p}function S(e,t){return e.length>t?(e.length=t,!0):void 0}function A(e){return new this(e).abs()}function x(e){return new this(e).acos()}function _(e){return new this(e).acosh()}function N(e,t){return new this(e).plus(t)}function C(e){return new this(e).asin()}function O(e){return new this(e).asinh()}function R(e){return new this(e).atan()}function L(e){return new this(e).atanh()}function M(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4
;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?l(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=l(this,o,1).times(he),n.s=e.s):t.s<0?(this.precision=o,this.rounding=1,n=this.atan(Ue(e,t,o,1)),t=l(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(Ue(e,t,o,1)):(n=l(this,o,1).times(t.s>0?.25:.75),n.s=e.s):n=new this(NaN),n}function F(e){return new this(e).cbrt()}function P(e){return a(e=new this(e),e.e+1,2)}function V(e){if(!e||"object"!=typeof e)throw Error(Ie+"Object expected");var t,n,r,i=["precision",1,ye,"rounding",0,8,"toExpNeg",-me,0,"toExpPos",0,me,"maxE",0,me,"minE",-me,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(xe(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(Se+n+": "+r);this[n]=r}if(e.hasOwnProperty(n="crypto"))if(void 0===(r=e[n]))this[n]=r;else{if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(Se+n+": "+r);this[n]=!(!r||!we||!we.getRandomValues&&!we.randomBytes)}return this}function U(e){return new this(e).cos()}function k(e){return new this(e).cosh()}function j(e){function t(e){var n,r,i,o=this;if(!(o instanceof t))return new t(e);if(o.constructor=t,e instanceof t)return o.s=e.s,o.e=e.e,void(o.d=(e=e.d)?e.slice():e);if("number"===(i=typeof e)){if(0===e)return o.s=0>1/e?-1:1,o.e=0,void(o.d=[0]);if(0>e?(e=-e,o.s=-1):o.s=1,e===~~e&&1e7>e){for(n=0,r=e;r>=10;r/=10)n++;return o.e=n,void(o.d=[e])}return 0*e!=0?(e||(o.s=NaN),o.e=NaN,void(o.d=null)):T(o,e.toString())}if("string"!==i)throw Error(Se+e);return 45===e.charCodeAt(0)?(e=e.slice(1),o.s=-1):o.s=1,Re.test(e)?T(o,e):b(o,e)}var n,r,i;if(t.prototype=Ve,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=V,t.clone=j,t.abs=A,t.acos=x,t.acosh=_,t.add=N,t.asin=C,t.asinh=O,t.atan=R,t.atanh=L,t.atan2=M,t.cbrt=F,t.ceil=P,t.cos=U,t.cosh=k,t.div=B,t.exp=q,t.floor=H,t.fromJSON=W,t.hypot=G,t.ln=J,t.log=z,t.log10=Q,t.log2=K,t.max=Y,t.min=X,t.mod=Z,t.mul=$,t.pow=ee,t.random=te,t.round=ne,t.sign=re,t.sin=ie,t.sinh=oe,t.sqrt=ae,t.sub=se,t.tan=ue,t.tanh=ce,t.trunc=le,void 0===e&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return t.config(e),t}function B(e,t){return new this(e).div(t)}function q(e){return new this(e).exp()}function H(e){return a(e=new this(e),e.e+1,3)}function W(e){var t,n,r,o;if("string"!=typeof e||!e)throw Error(Se+e);if(r=e.length,o=ve.indexOf(e.charAt(0)),1===r)return new this(o>81?[-1/0,1/0,NaN][o-82]:o>40?-(o-41):o);if(64&o)n=16&o,t=n?(7&o)-3:(15&o)-7,r=1;else{if(2===r)return o=88*o+ve.indexOf(e.charAt(1)),new this(o>=2816?-(o-2816)-41:o+41);if(n=32&o,!(31&o))return e=i(e.slice(1),88,10).join(""),new this(n?"-"+e:e);t=15&o,r=t+1,t=1===t?ve.indexOf(e.charAt(1)):2===t?88*ve.indexOf(e.charAt(1))+ve.indexOf(e.charAt(2)):+i(e.slice(1,r),88,10).join(""),16&o&&(t=-t)}return e=i(e.slice(r),88,10).join(""),t=t-e.length+1,e=e+"e"+t,new this(n?"-"+e:e)}function G(){var e,t,n=new this(0);for(De=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return De=!0,new this(1/0);n=t}return De=!0,n.sqrt()}function J(e){return new this(e).ln()}function z(e,t){return new this(e).log(t)}function K(e){return new this(e).log(2)}function Q(e){return new this(e).log(10)}function Y(){return g(this,arguments,"lt")}function X(){return g(this,arguments,"gt")}function Z(e,t){return new this(e).mod(t)}function $(e,t){return new this(e).mul(t)}function ee(e,t){return new this(e).pow(t)}function te(e){var t,r,i,o,a=0,s=new this(ge),u=[];if(void 0===e?e=this.precision:n(e,1,ye),i=Math.ceil(e/Me),!1===this.crypto)for(;i>a;)u[a++]=1e7*Math.random()|0;else if(we&&we.getRandomValues)for(t=we.getRandomValues(new Uint32Array(i));i>a;)o=t[a],o>=429e7?t[a]=we.getRandomValues(new Uint32Array(1))[0]:u[a++]=o%1e7;else if(we&&we.randomBytes){for(t=we.randomBytes(i*=4);i>a;)o=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24),o>=214e7?we.randomBytes(4).copy(t,a):(u.push(o%1e7),a+=4);a=i/4}else{if(this.crypto)throw Error(Ie+"crypto unavailable");for(;i>a;)u[a++]=1e7*Math.random()|0}for(i=u[--a],e%=Me,i&&e&&(o=_e(10,Me-e),u[a]=(i/o|0)*o);0===u[a];a--)u.pop();if(0>a)r=0,u=[0];else{for(r=-1;0===u[0];r-=Me)u.shift();for(i=1,o=u[0];o>=10;o/=10)i++;Me>i&&(r-=Me-i)}return s.e=r,s.d=u,s}function ne(e){return a(e=new this(e),e.e+1,this.rounding)}function re(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function ie(e){return new this(e).sin()}function oe(e){return new this(e).sinh()}function ae(e){return new this(e).sqrt()}function se(e,t){return new this(e).sub(t)}function ue(e){return new this(e).tan()}function ce(e){return new this(e).tanh()}function le(e){return a(e=new this(e),e.e+1,1)}var fe,de,pe,he,ge,me=9e15,ye=1e9,ve="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%()*+,-./:;=?@[]^_`{|}~",Te="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",be="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ee={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-me,maxE:me,crypto:void 0},we="undefined"!=typeof crypto?crypto:null,De=!0,Ie="[DecimalError] ",Se=Ie+"Invalid argument: ",Ae=Ie+"Precision limit exceeded",xe=Math.floor,_e=Math.pow,Ne=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Ce=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Oe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Re=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Le=1e7,Me=7,Fe=Te.length-1,Pe=be.length-1,Ve={};Ve.absoluteValue=Ve.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),a(e)},Ve.ceil=function(){return a(new this.constructor(this),this.e+1,2)},Ve.comparedTo=Ve.cmp=function(e){var t,n,r,i,o=this,a=o.d,s=(e=new o.constructor(e)).d,u=o.s,c=e.s;if(!a||!s)return u&&c?u!==c?u:a===s?0:!a^0>u?1:-1:NaN;if(!a[0]||!s[0])return a[0]?u:s[0]?-c:0;if(u!==c)return u;if(o.e!==e.e)return o.e>e.e^0>u?1:-1;for(r=a.length,i=s.length,t=0,n=i>r?r:i;n>t;++t)if(a[t]!==s[t])return a[t]>s[t]^0>u?1:-1;return r===i?0:r>i^0>u?1:-1},Ve.cosine=Ve.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Me,r.rounding=1,n=o(r,D(r,n)),r.precision=e,r.rounding=t,a(2==pe||3==pe?n.neg():n,e,t,!0)):new r(ge):new r(NaN)},Ve.cubeRoot=Ve.cbrt=function(){var e,n,r,i,o,s,u,c,l,f,d=this,p=d.constructor;if(!d.isFinite()||d.isZero())return new p(d);for(De=!1,s=d.s*Math.pow(d.s*d,1/3),s&&Math.abs(s)!=1/0?i=new p(s.toString()):(r=t(d.d),e=d.e,(s=(e-r.length+1)%3)&&(r+=1==s||-2==s?"0":"00"),s=Math.pow(r,1/3),e=xe((e+1)/3)-(e%3==(0>e?-1:2)),s==1/0?r="5e"+e:(r=s.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),i=new p(r),i.s=d.s),u=(e=p.precision)+3;;)if(c=i,l=c.times(c).times(c),f=l.plus(d),i=Ue(f.plus(d).times(c),f.plus(l),u+2,1),t(c.d).slice(0,u)===(r=t(i.d)).slice(0,u)){if("9999"!=(r=r.slice(u-3,u+1))&&(o||"4999"!=r)){(!+r||!+r.slice(1)&&"5"==r.charAt(0))&&(a(i,e+1,1),n=!i.times(i).times(i).eq(d));break}if(!o&&(a(c,e+1,0),c.times(c).times(c).eq(d))){i=c;break}u+=4,o=1}return De=!0,a(i,e,p.rounding,n)},Ve.decimalPlaces=Ve.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-xe(this.e/Me))*Me,e=t[e])for(;e%10==0;e/=10)n--;0>n&&(n=0)}return n},Ve.dividedBy=Ve.div=function(e){return Ue(this,new this.constructor(e))},Ve.dividedToIntegerBy=Ve.divToInt=function(e){var t=this,n=t.constructor;return a(Ue(t,new n(e),0,1,1),n.precision,n.rounding)},Ve.equals=Ve.eq=function(e){return 0===this.cmp(e)},Ve.floor=function(){return a(new this.constructor(this),this.e+1,3)},Ve.greaterThan=Ve.gt=function(e){return this.cmp(e)>0},Ve.greaterThanOrEqualTo=Ve.gte=function(e){var t=this.cmp(e);return 1==t||0===t},Ve.hyperbolicCosine=Ve.cosh=function(){var e,t,n,r,i,o=this,s=o.constructor,u=new s(ge);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return u;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,i=o.d.length,32>i?(e=Math.ceil(i/3),t=Math.pow(4,-e).toString()):(e=16,t="2.3283064365386962890625e-10"),o=w(s,1,o.times(t),new s(ge),!0);for(var c,l=e,f=new s(8);l--;)c=o.times(o),o=u.minus(c.times(f.minus(c.times(f))));return a(o,s.precision=n,s.rounding=r,!0)},Ve.hyperbolicSine=Ve.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,3>(r=i.d.length))i=w(o,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:0|e,i=i.times(Math.pow(5,-e)),i=w(o,2,i,i,!0);for(var s,u=new o(5),c=new o(16),l=new o(20);e--;)s=i.times(i),i=i.times(u.plus(s.times(c.times(s).plus(l))))}return o.precision=t,o.rounding=n,a(i,t,n,!0)},Ve.hyperbolicTangent=Ve.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,Ue(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},Ve.inverseCosine=Ve.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(ge),i=n.precision,o=n.rounding;return-1!==r?0===r?t.isNeg()?l(n,i,o):new n(0):new n(NaN):t.isZero()?l(n,i+4,o).times(he):(n.precision=i+6,n.rounding=1,t=t.asin(),e=l(n,i+4,o).times(he),n.precision=i,n.rounding=o,e.minus(t))},Ve.inverseHyperbolicCosine=Ve.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(ge)?new r(n.eq(ge)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,De=!1,n=n.times(n).minus(ge).sqrt().plus(n),De=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},Ve.inverseHyperbolicSine=Ve.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,De=!1,n=n.times(n).plus(ge).sqrt().plus(n),De=!0,r.precision=e,r.rounding=t,n.ln())},Ve.inverseHyperbolicTangent=Ve.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(ge)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?a(new o(i),e,t,!0):(o.precision=n=r-i.e,i=Ue(i.plus(ge),ge.minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(he))):new o(NaN)},Ve.inverseSine=Ve.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(ge),n=o.precision,r=o.rounding,-1!==t?0===t?(e=l(o,n+4,r).times(he),e.s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(ge.plus(o.sqrt(ge.minus(i.times(i))))).atan(),o.precision=n,o.rounding=r,i.times(2)))},Ve.inverseTangent=Ve.atan=function(){var e,t,n,r,i,o,s,u,c,f=this,d=f.constructor,p=d.precision,h=d.rounding;if(f.isFinite()){if(f.isZero())return new d(f);if(f.abs().eq(ge)&&Pe>=p+4)return s=l(d,p+4,h).times(.25),s.s=f.s,s}else{if(!f.s)return new d(NaN);if(Pe>=p+4)return s=l(d,p+4,h).times(he),s.s=f.s,s}for(d.precision=u=p+10,d.rounding=1,n=Math.min(28,u/Me+2|0),e=n;e;--e)f=f.div(f.times(f).plus(ge).sqrt().plus(ge));for(De=!1,t=Math.ceil(u/Me),r=1,c=f.times(f),s=new d(f),i=f;-1!==e;)if(i=i.times(c),o=s.minus(i.div(r+=2)),i=i.times(c),s=o.plus(i.div(r+=2)),void 0!==s.d[t])for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),De=!0,a(s,d.precision=p,d.rounding=h,!0)},Ve.isFinite=function(){return!!this.d},Ve.isInteger=Ve.isInt=function(){return!!this.d&&xe(this.e/Me)>this.d.length-2},Ve.isNaN=function(){return!this.s},Ve.isNegative=Ve.isNeg=function(){return this.s<0},Ve.isPositive=Ve.isPos=function(){return this.s>0},Ve.isZero=function(){return!!this.d&&0===this.d[0]},Ve.lessThan=Ve.lt=function(e){return this.cmp(e)<0},Ve.lessThanOrEqualTo=Ve.lte=function(e){return this.cmp(e)<1},Ve.logarithm=Ve.log=function(e){var n,i,o,s,u,l,f,d,p=this,h=p.constructor,g=h.precision,m=h.rounding;if(null==e)e=new h(10),n=!0;else{if(e=new h(e),i=e.d,e.s<0||!i||!i[0]||e.eq(ge))return new h(NaN);n=e.eq(10)}if(i=p.d,p.s<0||!i||!i[0]||p.eq(ge))return new h(i&&!i[0]?-1/0:1!=p.s?NaN:i?0:1/0);if(n)if(i.length>1)u=!0;else{for(s=i[0];s%10==0;)s/=10;u=1!==s}if(De=!1,f=g+5,l=y(p,f),o=n?c(h,f+10):y(e,f),d=Ue(l,o,f,1),r(d.d,s=g,m))do{if(f+=10,l=y(p,f),o=n?c(h,f+10):y(e,f),d=Ue(l,o,f,1),!u){+t(d.d).slice(s+1,s+15)+1==1e14&&(d=a(d,g+1,0));break}}while(r(d.d,s+=10,m));return De=!0,a(d,g,m)},Ve.minus=Ve.sub=function(e){var t,n,r,i,o,s,c,l,f,d,p,h,g=this,m=g.constructor;if(e=new m(e),!g.d||!e.d)return g.s&&e.s?g.d?e.s=-e.s:e=new m(e.d||g.s!==e.s?g:NaN):e=new m(NaN),e;if(g.s!=e.s)return e.s=-e.s,g.plus(e);if(f=g.d,h=e.d,c=m.precision,l=m.rounding,!f[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!f[0])return new m(3===l?-0:0);e=new m(g)}return De?a(e,c,l):e}if(n=xe(e.e/Me),d=xe(g.e/Me),f=f.slice(),o=d-n){for(p=0>o,p?(t=f,o=-o,s=h.length):(t=h,n=d,s=f.length),r=Math.max(Math.ceil(c/Me),s)+2,o>r&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for(r=f.length,s=h.length,p=s>r,p&&(s=r),r=0;s>r;r++)if(f[r]!=h[r]){p=f[r]<h[r];break}o=0}for(p&&(t=f,f=h,h=t,e.s=-e.s),s=f.length,r=h.length-s;r>0;--r)f[s++]=0;for(r=h.length;r>o;){if(f[--r]<h[r]){for(i=r;i&&0===f[--i];)f[i]=Le-1;--f[i],f[r]+=Le}f[r]-=h[r]}for(;0===f[--s];)f.pop();for(;0===f[0];f.shift())--n;return f[0]?(e.d=f,e.e=u(f,n),De?a(e,c,l):e):new m(3===l?-0:0)},Ve.modulo=Ve.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?a(new r(n),r.precision,r.rounding):(De=!1,9==r.modulo?(t=Ue(n,e.abs(),0,3,1),t.s*=e.s):t=Ue(n,e,0,r.modulo,1),t=t.times(e),De=!0,n.minus(t))},Ve.naturalExponential=Ve.exp=function(){return m(this)},Ve.naturalLogarithm=Ve.ln=function(){return y(this)},Ve.negated=Ve.neg=function(){var e=new this.constructor(this);return e.s=-e.s,a(e)},Ve.plus=Ve.add=function(e){var t,n,r,i,o,s,c,l,f,d,p=this,h=p.constructor;if(e=new h(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new h(e.d||p.s===e.s?p:NaN)):e=new h(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(f=p.d,d=e.d,c=h.precision,l=h.rounding,!f[0]||!d[0])return d[0]||(e=new h(p)),De?a(e,c,l):e;if(o=xe(p.e/Me),r=xe(e.e/Me),f=f.slice(),i=o-r){for(0>i?(n=f,i=-i,s=d.length):(n=d,r=o,s=f.length),o=Math.ceil(c/Me),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=f.length,i=d.length,0>s-i&&(i=s,n=d,d=f,f=n),t=0;i;)t=(f[--i]=f[i]+d[i]+t)/Le|0,f[i]%=Le;for(t&&(f.unshift(t),++r),s=f.length;0==f[--s];)f.pop();return e.d=f,e.e=u(f,r),De?a(e,c,l):e},Ve.precision=Ve.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Se+e);return n.d?(t=f(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},Ve.round=function(){var e=this,t=e.constructor;return a(new t(e),e.e+1,t.rounding)},Ve.sine=Ve.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Me,r.rounding=1,n=E(r,D(r,n)),r.precision=e,r.rounding=t,a(pe>2?n.neg():n,e,t,!0)):new r(NaN)},Ve.squareRoot=Ve.sqrt=function(){var e,n,r,i,o,s,u=this,c=u.d,l=u.e,f=u.s,d=u.constructor;if(1!==f||!c||!c[0])return new d(!f||0>f&&(!c||c[0])?NaN:c?u:1/0);for(De=!1,f=Math.sqrt(+u),0==f||f==1/0?(n=t(c),(n.length+l)%2==0&&(n+="0"),f=Math.sqrt(n),l=xe((l+1)/2)-(0>l||l%2),f==1/0?n="1e"+l:(n=f.toExponential(),n=n.slice(0,n.indexOf("e")+1)+l),i=new d(n)):i=new d(f.toString()),r=(l=d.precision)+3;;)if(s=i,i=s.plus(Ue(u,s,r+2,1)).times(he),t(s.d).slice(0,r)===(n=t(i.d)).slice(0,r)){if("9999"!=(n=n.slice(r-3,r+1))&&(o||"4999"!=n)){(!+n||!+n.slice(1)&&"5"==n.charAt(0))&&(a(i,l+1,1),e=!i.times(i).eq(u));break}if(!o&&(a(s,l+1,0),s.times(s).eq(u))){i=s;break}r+=4,o=1}return De=!0,a(i,l,d.rounding,e)},Ve.tangent=Ve.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=Ue(n,ge.minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,a(2==pe||4==pe?n.neg():n,e,t,!0)):new r(NaN)},Ve.times=Ve.mul=function(e){var t,n,r,i,o,s,c,l,f,d=this,p=d.constructor,h=d.d,g=(e=new p(e)).d;if(e.s*=d.s,!(h&&h[0]&&g&&g[0]))return new p(!e.s||h&&!h[0]&&!g||g&&!g[0]&&!h?NaN:h&&g?0*e.s:e.s/0);for(n=xe(d.e/Me)+xe(e.e/Me),l=h.length,f=g.length,f>l&&(o=h,h=g,g=o,s=l,l=f,f=s),o=[],s=l+f,r=s;r--;)o.push(0);for(r=f;--r>=0;){for(t=0,i=l+r;i>r;)c=o[i]+g[r]*h[i-r-1]+t,o[i--]=c%Le|0,t=c/Le|0;o[i]=(o[i]+t)%Le|0}for(;!o[--s];)o.pop();for(t?++n:o.shift(),r=o.length;!o[--r];)o.pop();return e.d=o,e.e=u(o,n),De?a(e,p.precision,p.rounding):e},Ve.toBinary=function(e,t){return I(this,2,e,t)},Ve.toDecimalPlaces=Ve.toDP=function(e,t){var r=this,i=r.constructor;return r=new i(r),void 0===e?r:(n(e,0,ye),void 0===t?t=i.rounding:n(t,0,8),a(r,e+r.e+1,t))},Ve.toExponential=function(e,t){var r,i=this,o=i.constructor;return void 0===e?r=s(i,!0):(n(e,0,ye),void 0===t?t=o.rounding:n(t,0,8),i=a(new o(i),e+1,t),r=s(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},Ve.toFixed=function(e,t){var r,i,o=this,u=o.constructor;return void 0===e?r=s(o):(n(e,0,ye),void 0===t?t=u.rounding:n(t,0,8),i=a(new u(o),e+o.e+1,t),r=s(i,!1,e+i.e+1)),o.isNeg()&&!o.isZero()?"-"+r:r},Ve.toFraction=function(e){var n,r,i,o,a,s,u,c,l,d,p,h,g=this,m=g.d,y=g.constructor;if(!m)return new y(g);if(l=r=new y(ge),i=c=new y(0),n=new y(i),a=n.e=f(m)-g.e-1,s=a%Me,n.d[0]=_e(10,0>s?Me+s:s),null==e)e=a>0?n:l;else{if(u=new y(e),!u.isInt()||u.lt(l))throw Error(Se+u);e=u.gt(n)?a>0?n:l:u}for(De=!1,u=new y(t(m)),d=y.precision,y.precision=a=m.length*Me*2;p=Ue(u,n,0,1,1),o=r.plus(p.times(i)),1!=o.cmp(e);)r=i,i=o,o=l,l=c.plus(p.times(o)),c=o,o=n,n=u.minus(p.times(o)),u=o;return o=Ue(e.minus(r),i,0,1,1),c=c.plus(o.times(l)),r=r.plus(o.times(i)),c.s=l.s=g.s,h=Ue(l,i,a,1).minus(g).abs().cmp(Ue(c,r,a,1).minus(g).abs())<1?[l,i]:[c,r],y.precision=d,De=!0,h},Ve.toHexadecimal=Ve.toHex=function(e,t){return I(this,16,e,t)},Ve.toJSON=function(){var e,n,r,o,a,s,u,c,l=this,f=l.s<0;if(!l.d)return ve.charAt(l.s?f?82:83:84);if(n=l.e,1===l.d.length&&4>n&&n>=0&&2857>(s=l.d[0]))return 41>s?ve.charAt(f?s+41:s):(s-=41,f&&(s+=2816),o=s/88|0,ve.charAt(o)+ve.charAt(s-88*o));if(c=t(l.d),u="",!f&&8>=n&&n>=-7)o=64+n+7;else if(f&&4>=n&&n>=-3)o=80+n+3;else if(c.length===n+1)o=32*f;else if(o=32*f+16*(0>n),88>(n=Math.abs(n)))o+=1,u=ve.charAt(n);else if(7744>n)o+=2,s=n/88|0,u=ve.charAt(s)+ve.charAt(n-88*s);else for(e=i(String(n),10,88),a=e.length,o+=a,r=0;a>r;r++)u+=ve.charAt(e[r]);for(u=ve.charAt(o)+u,e=i(c,10,88),a=e.length,r=0;a>r;r++)u+=ve.charAt(e[r]);return u},Ve.toNearest=function(e,t){var r=this,i=r.constructor;if(r=new i(r),null==e){if(!r.d)return r;e=new i(ge),t=i.rounding}else{if(e=new i(e),void 0!==t&&n(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(De=!1,4>t&&(t=[4,5,7,8][t]),r=Ue(r,e,0,t,1).times(e),De=!0,a(r)):(e.s=r.s,r=e),r},Ve.toNumber=function(){return+this},Ve.toOctal=function(e,t){return I(this,8,e,t)},Ve.toPower=Ve.pow=function(e){var n,i,o,s,u,c,l,f=this,d=f.constructor,h=+(e=new d(e));if(!(f.d&&e.d&&f.d[0]&&e.d[0]))return new d(_e(+f,h));if(f=new d(f),f.eq(ge))return f;if(o=d.precision,u=d.rounding,e.eq(ge))return a(f,o,u);if(n=xe(e.e/Me),i=e.d.length-1,l=n>=i,c=f.s,l){if((i=0>h?-h:h)<=9007199254740991)return s=p(d,f,i,o),e.s<0?new d(ge).div(s):a(s,o,u)}else if(0>c)return new d(NaN);return c=0>c&&1&e.d[Math.max(n,i)]?-1:1,i=_e(+f,h),n=0!=i&&isFinite(i)?new d(i+"").e:xe(h*(Math.log("0."+t(f.d))/Math.LN10+f.e+1)),n>d.maxE+1||n<d.minE-1?new d(n>0?c/0:0):(De=!1,d.rounding=f.s=1,i=Math.min(12,(n+"").length),s=m(e.times(y(f,o+i)),o),s=a(s,o+5,1),r(s.d,o,u)&&(n=o+10,s=a(m(e.times(y(f,n+i)),n),n+5,1),+t(s.d).slice(o+1,o+15)+1==1e14&&(s=a(s,o+1,0))),s.s=c,De=!0,d.rounding=u,a(s,o,u))},Ve.toPrecision=function(e,t){var r,i=this,o=i.constructor;return void 0===e?r=s(i,i.e<=o.toExpNeg||i.e>=o.toExpPos):(n(e,1,ye),void 0===t?t=o.rounding:n(t,0,8),i=a(new o(i),e,t),r=s(i,e<=i.e||i.e<=o.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+r:r},Ve.toSignificantDigits=Ve.toSD=function(e,t){var r=this,i=r.constructor;return void 0===e?(e=i.precision,t=i.rounding):(n(e,1,ye),void 0===t?t=i.rounding:n(t,0,8)),a(new i(r),e,t)},Ve.toString=function(){var e=this,t=e.constructor,n=s(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},Ve.truncated=Ve.trunc=function(){return a(new this.constructor(this),this.e+1,1)},Ve.valueOf=function(){var e=this,t=e.constructor,n=s(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var Ue=function(){function e(e,t,n){var r,i=0,o=e.length;for(e=e.slice();o--;)r=e[o]*t+i,e[o]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;n>i;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,s,u,c){var l,f,d,p,h,g,m,y,v,T,b,E,w,D,I,S,A,x,_,N,C=r.constructor,O=r.s==i.s?1:-1,R=r.d,L=i.d;if(!(R&&R[0]&&L&&L[0]))return new C(r.s&&i.s&&(R?!L||R[0]!=L[0]:L)?R&&0==R[0]||!L?0*O:O/0:NaN);for(c?(h=1,f=r.e-i.e):(c=Le,h=Me,f=xe(r.e/h)-xe(i.e/h)),_=L.length,A=R.length,v=new C(O),T=v.d=[],d=0;L[d]==(R[d]||0);d++);if(L[d]>(R[d]||0)&&f--,null==o?(D=o=C.precision,s=C.rounding):D=u?o+(r.e-i.e)+1:o,0>D)T.push(1),g=!0;else{if(D=D/h+2|0,d=0,1==_){for(p=0,L=L[0],D++;(A>d||p)&&D--;d++)I=p*c+(R[d]||0),T[d]=I/L|0,p=I%L|0;g=p||A>d}else{for(p=c/(L[0]+1)|0,p>1&&(L=e(L,p,c),R=e(R,p,c),_=L.length,A=R.length),S=_,b=R.slice(0,_),E=b.length;_>E;)b[E++]=0;N=L.slice(),N.unshift(0),x=L[0],L[1]>=c/2&&++x;do{p=0,l=t(L,b,_,E),0>l?(w=b[0],_!=E&&(w=w*c+(b[1]||0)),p=w/x|0,p>1?(p>=c&&(p=c-1),m=e(L,p,c),y=m.length,E=b.length,1==(l=t(m,b,y,E))&&(p--,n(m,y>_?N:L,y,c))):(0==p&&(l=p=1),m=L.slice()),y=m.length,E>y&&m.unshift(0),n(b,m,E,c),-1==l&&(E=b.length,1>(l=t(L,b,_,E))&&(p++,n(b,E>_?N:L,E,c))),E=b.length):0===l&&(p++,b=[0]),T[d++]=p,l&&b[0]?b[E++]=R[S]||0:(b=[R[S]],E=1)}while((S++<A||void 0!==b[0])&&D--);g=void 0!==b[0]}T[0]||T.shift()}if(1==h)v.e=f,fe=g;else{for(d=1,p=T[0];p>=10;p/=10)d++;v.e=d+f*h-1,a(v,u?o+v.e+1:o,s,g)}return v}}();if(Ee=j(Ee),he=new Ee(.5),ge=new Ee(1),Te=new Ee(Te),be=new Ee(be),"function"==typeof define&&define.amd)define("decimal",[],function(){return Ee});else if("undefined"!=typeof module&&module.exports){if(module.exports=Ee,!we)try{we=require("crypto")}catch(e){}}else e||(e="undefined"!=typeof self&&self&&self.self==self?self:Function("return this")()),de=e.Decimal,Ee.noConflict=function(){return e.Decimal=de,Ee},e.Decimal=Ee}(this),define("OutSystems/ClientRuntime/Format",["require","exports"],function(e,t){"use strict";function n(e,t){var n=o[e];if(void 0!==n)return n;var r,i=e.replace(new RegExp("["+t.join("")+"]","gi"),"").substr(0,1),a=[];for(r=0;r<t.length;r++)a.push({index:e.toLowerCase().indexOf(t[r]),character:t[r],length:e.replace(new RegExp("[^"+t[r]+"]","gi"),"").length});a.sort(function(e,t){return e.index<t.index?-1:1});var s={format:e,separator:i,parts:{},regExp:null};for(s.regExp="^",r=0;r<a.length;r++){var u="";switch(a[r].character.toLowerCase()){case"h":case"m":case"d":u="1,2";break;case"s":s.regExp+="(?"+i,u="1,2";break;default:u=a[r].length}r>0&&(s.regExp+="\\"+i),s.regExp+="([0-9]{"+u+"})"+("s"===a[r].character?")?":""),s.parts[a[r].character+"Index"]=r,s.parts[a[r].character+"Format"]=e.slice(a[r].index,a[r].index+a[r].length)}return s.regExp+="$",o[e]=s,s}function r(e){return n(e,["y","m","d"])}function i(e){return n(e,["h","m","s"])}Object.defineProperty(t,"__esModule",{value:!0});var o={},a=function(){function e(e,t,n,o){void 0===n&&(n=" "),void 0===o&&(o=""),this.dateFmt=r(e),this.timeFmt=i(t),this.dateTimeSep=n,this.tzInformation=o}return e.getDayName=function(t){return e.DayNames[t]},e.getShortDayName=function(t){return e.DayNames[t].slice(0,3)},e.getMonthName=function(t){return e.MonthNames[t-1]},e.getShortMonthName=function(t){return e.MonthNames[t-1].slice(0,3)},e.get12HourNotation=function(e){return e<12?"AM":"PM"},e.getTimezoneInformationFull=function(t){return t=-t,e.getTimezoneSignal(t)+e.padLeadingZeros(Math.floor(t/60).toString(),2)+":"+e.padLeadingZeros(Math.floor(t%60).toString(),2)},e.getTimezoneInformationHoursFull=function(t){return t=-t,e.getTimezoneSignal(t)+e.padLeadingZeros(Math.floor(t/60).toString(),2)},e.getTimezoneInformationHoursShort=function(t){return t=-t,e.getTimezoneSignal(t)+Math.floor(t/60)},e.getTimezoneSignal=function(e){return e<0?"-":"+"},e.padLeadingZeros=function(e,t){for(var n=e||"";n.length<t;)n="0"+n;return n},e.removeTrailingZeros=function(e){return(e||"").replace(/0+$/gm,"")},Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this.dateFmt.format},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeFormat",{get:function(){return this.timeFmt.format},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateTimeFormat",{get:function(){return this.dateFmt.format+this.dateTimeSeparator+this.timeFmt.format},enumerable:!0,configurable:!0}),e.prototype.getRegExpForDate=function(){return new RegExp(this.dateFmt.regExp,"i")},Object.defineProperty(e.prototype,"yearIndexForDate",{get:function(){return this.dateFmt.parts.yIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthIndexForDate",{get:function(){return this.dateFmt.parts.mIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dayIndexForDate",{get:function(){return this.dateFmt.parts.dIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearFormatForDate",{get:function(){return this.dateFmt.parts.yFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthFormatForDate",{get:function(){return this.dateFmt.parts.mFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dayFormatForDate",{get:function(){return this.dateFmt.parts.dFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateSeparator",{get:function(){return this.dateFmt.separator},enumerable:!0,configurable:!0}),e.prototype.getRegExpForTime=function(){return new RegExp(this.timeFmt.regExp,"i")},Object.defineProperty(e.prototype,"hoursIndexForTime",{get:function(){return this.timeFmt.parts.hIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minutesIndexForTime",{get:function(){return this.timeFmt.parts.mIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondsIndexForTime",{get:function(){return this.timeFmt.parts.sIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeSeparator",{get:function(){return this.timeFmt.separator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateTimeSeparator",{get:function(){return this.dateTimeSep},enumerable:!0,configurable:!0}),e.prototype.getRegExpForDateTime=function(){return new RegExp(this.dateFmt.regExp.substring(0,this.dateFmt.regExp.length-1)+this.dateTimeSeparator+this.timeFmt.regExp.substring(1,this.timeFmt.regExp.length-1)+this.tzInformation+"$","i")},Object.defineProperty(e.prototype,"yearIndexForDateTime",{get:function(){return this.dateFmt.parts.yIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthIndexForDateTime",{get:function(){return this.dateFmt.parts.mIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dayIndexForDateTime",{get:function(){return this.dateFmt.parts.dIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoursIndexForDateTime",{get:function(){return this.timeFmt.parts.hIndex+3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoursFormatForTime",{get:function(){return this.timeFmt.parts.hFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minutesFormatForTime",{get:function(){return this.timeFmt.parts.mFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondsFormatForTime",{get:function(){return this.timeFmt.parts.sFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minutesIndexForDateTime",{get:function(){return this.timeFmt.parts.mIndex+3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondsIndexForDateTime",{get:function(){return this.timeFmt.parts.sIndex+3},enumerable:!0,configurable:!0}),e.DayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],e}();t.DateTimeFormatInfo=a;var s=function(){function e(e,t){this.decimalSep=e,this.groupSep=t,this.integerFmtRegExp=null,this.decimalFmtRegExp=null,this.generateFormatRegExps(e,t)}return e.prototype.generateFormatRegExps=function(e,t){var n="\\"+e,r="(([0-9]{1,3}("+(t?"\\"+t:"")+"[0-9]{3})*)|([0-9]+))";this.integerFmtRegExp="^[-]?"+r+"$",this.decimalFmtRegExp="^[-]?(("+r+"("+n+"([0-9]+)?)?)|(("+r+")?"+n+"[0-9]+))$"},Object.defineProperty(e.prototype,"decimalSeparator",{get:function(){return this.decimalSep},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupSeparator",{get:function(){return this.groupSep},enumerable:!0,configurable:!0}),e.prototype.getRegExpForInteger=function(){return new RegExp(this.integerFmtRegExp,"i")},e.prototype.getRegExpForDecimal=function(){return new RegExp(this.decimalFmtRegExp,"i")},e.prototype.getRegExpForJSNumber=function(){return new RegExp("^-?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+-]?\\d+)?$","i")},e}();t.NumberFormatInfo=s;var u=function(){function e(e,t){this.defaultDateTimeFormats=[new a("yyyy-MM-dd","HH:mm:ss"),new a("yyyy-MM-dd","HH:mm:ss"),new a("yyyy/MM/dd","HH:mm:ss"),new a("yyyy.MM.dd","HH:mm:ss")],this.defaultNumberFmt=t,this.currentNumberFmt=t,this.defaultDateTimeFormats[0]=e}return Object.defineProperty(e.prototype,"defaultDateTimeFormat",{get:function(){return this.defaultDateTimeFormats[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateTimeFormats",{get:function(){return this.defaultDateTimeFormats},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateTimeFormat",{set:function(e){this.defaultDateTimeFormats[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultNumberFormat",{get:function(){return this.defaultNumberFmt},
enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this.currentNumberFmt},set:function(e){this.currentNumberFmt=e},enumerable:!0,configurable:!0}),e}();t.ApplicationFormatInfo=u}),define("OutSystems/ClientRuntime/DataTypes",["require","exports","./LightImmutable","long","decimal","./Format","./Flow","./Exceptions"],function(e,t,n,r,i,o,a,s){"use strict";function u(e,t){return null===e||void 0===e?t:e}function c(e,t){if("string"==typeof e){var n=e,r=t;return n.localeCompare(r)}return"number"==typeof e?e-t:"boolean"==typeof e?!e&&t?-1:e&&!t?1:0:e.lessThan(t)?-1:e.greaterThan(t)?1:0}function l(e,t){return e&&t&&t.equals instanceof Function?t.equals(e):t===e}function f(e,t){return!e.hasContent()&&!t.hasContent()}function d(e){switch(e){case g.Integer:return y.DEFAULT_INTEGER;case g.LongInteger:return y.DEFAULT_LONGINTEGER;case g.Decimal:return y.DEFAULT_DECIMAL;case g.Currency:return y.DEFAULT_CURRENCY;case g.Text:return y.DEFAULT_TEXT;case g.PhoneNumber:return y.DEFAULT_PHONENUMBER;case g.Email:return y.DEFAULT_EMAIL;case g.Date:return y.DEFAULT_DATE;case g.DateTime:return y.DEFAULT_DATETIME;case g.Time:return y.DEFAULT_TIME;case g.Boolean:return y.DEFAULT_BOOLEAN;case g.BinaryData:return y.DEFAULT_BINARYDATA;case g.Object:return y.DEFAULT_OBJECT;default:throw new TypeError("Records and Record lists are not basic types")}}function p(e){return e===g.Record||e===g.RecordList||e===g.LongInteger||e===g.Decimal||e===g.Currency||e===g.DateTime||e===g.Time||e===g.Date}function h(){return function(e){var t=e;void 0!==t.init&&t.init()}}Object.defineProperty(t,"__esModule",{value:!0});var g;!function(e){e[e.Integer=0]="Integer",e[e.LongInteger=1]="LongInteger",e[e.Decimal=2]="Decimal",e[e.Currency=3]="Currency",e[e.Text=4]="Text",e[e.PhoneNumber=5]="PhoneNumber",e[e.Email=6]="Email",e[e.Boolean=7]="Boolean",e[e.Date=8]="Date",e[e.DateTime=9]="DateTime",e[e.Time=10]="Time",e[e.Record=11]="Record",e[e.RecordList=12]="RecordList",e[e.BinaryData=13]="BinaryData",e[e.Object=14]="Object"}(g=t.DataTypes||(t.DataTypes={})),t.Decimal=i.config({precision:30,toExpNeg:-1024,toExpPos:1024,rounding:i.ROUND_HALF_EVEN}),t.Decimal.defaultValue=new t.Decimal(0),t.Decimal.prototype.toFormat=function(e,t,n,r){var i=this;if(!i.e&&0!==i.e)return i.toString();var o,a=3,s=0,u=i.toFixed(e,t).split("."),c=u[0],l=u[1],f=i.s<0?c.slice(1):c,d=f.length;if(s&&(d-=(o=a,a=s,s=o)),a>0&&d>0){for(o=d%a||a,c=f.substr(0,o);o<d;o+=a)c+=r+f.substr(o,a);s>0&&(c+=r+f.slice(o)),i.s<0&&(c="-"+c)}return l?c+n+((s=0)?l.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"):l):c},t.LongInteger=r,t.LongInteger.defaultValue=t.LongInteger.ZERO;var m=function(){function e(e,t,n){this._content=e,this._url=t,this.getOfflineContent=n,this._cachedBlob=null,this._content=this._content||null}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url=e,this.clearCachedBlob()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cachedBlob",{get:function(){return this._cachedBlob},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e,this.clearCachedBlob()},enumerable:!0,configurable:!0}),e.prototype.loadContent=function(){var e=this;return this.getOfflineContent?this.getOfflineContent().then(function(t){return e.content=t,Promise.resolve(e)}):a.executeSequence(function(){return e})},e.prototype.hasContent=function(){return!(!this._url&&!this._content)},e.prototype.fastEquals=function(e){return e&&this.constructor===e.constructor&&this._url===e._url&&this._content===e._content&&(!!this.getOfflineContent&&!!e.getOfflineContent||!this.getOfflineContent&&!e.getOfflineContent)},e.prototype.base64toHex=function(e){for(var t=atob(e),n="",r=0;r<t.length;r++){var i=t.charCodeAt(r).toString(16);n+=2===i.length?i:"0"+i}return n},e.prototype.getContentType=function(){if(this._content){var e=this.base64toHex(this._content.substr(0,16));return"00000100"===e.substr(0,8)?"image/x-icon":"ffd8ffdb"===e.substr(0,8)||"ffd8ffe0"===e.substr(0,8)||"ffd8ffe1"===e.substr(0,8)?"image/jpg":"49492a00"===e.substr(0,8)||"4d4d002a"===e.substr(0,8)?"image/tiff":"424d"===e.substr(0,4)?"image/bmp":"474946"===e.substr(0,6)?"image/gif":"89504e47"===e.substr(0,8)?"image/png":"application/octet-stream"}return null},e.prototype.toDataURI=function(){return this._content?"data:"+this.getContentType()+";base64,"+this._content:null},e.prototype.toBlob=function(){return!this._cachedBlob&&this._content&&(this._cachedBlob=e.base64toBlob(this._content,this.getContentType())),this._cachedBlob},Object.defineProperty(e.prototype,"length",{get:function(){var e=this.toBlob();return e?e.size:0},enumerable:!0,configurable:!0}),e.base64toBlob=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=512);for(var r=atob((e||"").replace(/\s/g,"")),i=[],o=0;o<r.length;o+=n){for(var a=r.slice(o,o+n),s=new Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);var c=new Uint8Array(s);i.push(c)}return new Blob(i,{type:t})},e.prototype.clearCachedBlob=function(){this._cachedBlob=null},e.defaultValue=new e,e}();t.BinaryData=m;var y;!function(e){e.RFC3339_TIMEPART=/^([01][0-9]|2[0-3]):([0-5][0-9])(:[0-5][0-9](\.\d+)?)?$/,e.RFC3339_DATEPART=/^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])$/,e.RFC3339_TIMEPART_FORMAT="HH:mm:ss",e.RFC3339_DATEPART_FORMAT="yyyy-MM-dd"}(y=t.Constants||(t.Constants={}));var v=function(){function e(e,t,n,r,i,o,a){if(0===arguments.length)this.date=new Date(1900,0,1,0,0,0,0);else if(1===arguments.length)if(e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)){var s=e.getTime();isNaN(s)?this.date=new Date(1900,0,1,0,0,0,0):this.date=new Date(s)}else this.date=new Date(e);else u(e,1900)<1900?(this.date=new Date(1900,0,1,u(r,0),u(i,0),u(o,0),u(a,0)),this.date.setFullYear(u(e,1900)),this.date.setMonth(u(t,1)-1),this.date.setDate(u(n,1))):this.date=new Date(u(e,1900),u(t,1)-1,u(n,1),u(r,0),u(i,0),u(o,0),u(a,0))}return Object.defineProperty(e,"defaultValue",{get:function(){return e.defaultValueField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"year",{get:function(){return this.date.getFullYear()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"month",{get:function(){return this.date.getMonth()+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"day",{get:function(){return this.date.getDate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hours",{get:function(){return this.date.getHours()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minutes",{get:function(){return this.date.getMinutes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this.date.getSeconds()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"milliseconds",{get:function(){return this.date.getMilliseconds()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weekDay",{get:function(){return this.date.getDay()},enumerable:!0,configurable:!0}),e.prototype.addYears=function(t){var n=new e(this.year+t,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds);return 2===this.month&&29===this.day&&3===n.month?new e(n.year,2,28,n.hours,n.minutes,n.seconds,n.milliseconds):n},e.prototype.daysInMonth=function(e,t){return new Date(t,e,0).getDate()},e.prototype.addMonths=function(t){var n=new e(this.year,this.month+t,this.day,this.hours,this.minutes,this.seconds,this.milliseconds);return n.day===this.day?n:new e(n.year,n.month-1,this.daysInMonth(n.month-1,n.year),n.hours,n.minutes,n.seconds,n.milliseconds)},e.prototype.addDays=function(t){return new e(this.year,this.month,this.day+t,this.hours,this.minutes,this.seconds,this.milliseconds)},e.prototype.addHours=function(t){return new e(this.year,this.month,this.day,this.hours+t,this.minutes,this.seconds,this.milliseconds)},e.prototype.addMinutes=function(t){return new e(this.year,this.month,this.day,this.hours,this.minutes+t,this.seconds,this.milliseconds)},e.prototype.addSeconds=function(t){return new e(this.year,this.month,this.day,this.hours,this.minutes,this.seconds+t,this.milliseconds)},e.prototype.addMilliseconds=function(t){return new e(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds+t)},e.prototype.equals=function(e){return!!e&&this.date.getTime()===e.date.getTime()},e.prototype.eq=function(e){return this.equals(e)},e.prototype.greaterThan=function(e){return this.date>e.date},e.prototype.gt=function(e){return this.greaterThan(e)},e.prototype.greaterThanOrEqualTo=function(e){return this.date>=e.date},e.prototype.gte=function(e){return this.greaterThanOrEqualTo(e)},e.prototype.lessThan=function(e){return this.date<e.date},e.prototype.lt=function(e){return this.lessThan(e)},e.prototype.lessThanOrEqualTo=function(e){return this.date<=e.date},e.prototype.lte=function(e){return this.lessThanOrEqualTo(e)},e.prototype.toNative=function(){return new Date(this.date.getTime())},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.valueOf=function(){return this.date.valueOf()},e.fromISODate=function(t){return y.RFC3339_DATEPART.test(t)?e.internalFromUTCWithoutConversion(t+"T00:00:00Z"):e.defaultValue},e.prototype.toISODate=function(){return this.toString(y.RFC3339_DATEPART_FORMAT)},e.fromISOTime=function(t){return y.RFC3339_TIMEPART.test(t)?e.internalFromUTCWithoutConversion("1900-01-01T"+t+"Z"):e.defaultValue},e.prototype.toISOTime=function(){return this.toString(y.RFC3339_TIMEPART_FORMAT)},e.fromISODateTime=function(t){if(""===(t=t||"")||t.indexOf("1900-01-01")>=0&&t.indexOf("00:00:00")>=0)return e.defaultValue;var n=/([+\-]\d{2}((:\d{2})|(\d{2})?)|Z)$/;if(t.indexOf("T")>0&&!n.test(t))return e.internalFromUTCWithoutConversion(t.trim()+"Z");t=t.replace(/([+-]\d{2})$/,function(e){return e+"00"});var r=Date.parse(t);return isNaN(r)?e.defaultValue:new e(r)},e.internalFromUTCWithoutConversion=function(t){var n=Date.parse(t);if(!isNaN(n)){var r=new Date(n);return new e(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}return e.defaultValue},e.prototype.getMillisecondsString=function(){return(this.milliseconds/1e3).toFixed(3).substring(2,5)},e.prototype.toString=function(t){var n=this;return 0===arguments.length?this.equals(e.defaultValue)?"1900-01-01T00:00:00":this.date.toISOString():t.replace(/(\\.)|dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|ff?f?|FF?F?|\.FF?F?|tt?|zz?z?/g,function(e){if(0===e.indexOf("\\"))return e.substring(1);switch(e){case"hh":case"h":return o.DateTimeFormatInfo.padLeadingZeros((n.hours<13?n.hours:n.hours-12).toString(),e.length);case"HH":case"H":return o.DateTimeFormatInfo.padLeadingZeros(n.hours.toString(),e.length);case"mm":case"m":return o.DateTimeFormatInfo.padLeadingZeros(n.minutes.toString(),e.length);case"ss":case"s":return o.DateTimeFormatInfo.padLeadingZeros(n.seconds.toString(),e.length);case"fff":return n.getMillisecondsString();case"ff":return n.getMillisecondsString().substring(0,2);case"f":return n.getMillisecondsString().substring(0,1);case".FFF":case".FF":case".F":return 0===n.milliseconds?"":"."+o.DateTimeFormatInfo.removeTrailingZeros(n.getMillisecondsString());case"FFF":return o.DateTimeFormatInfo.removeTrailingZeros(n.getMillisecondsString());case"FF":return o.DateTimeFormatInfo.removeTrailingZeros(n.getMillisecondsString()).substring(0,2);case"F":return o.DateTimeFormatInfo.removeTrailingZeros(n.getMillisecondsString()).substring(0,1);case"yyyy":case"yyy":var t=n.year.toString();return"0"===t.charAt(0)?n.year.toString().substring(1):t;case"yy":return n.year.toString().substring(2,4);case"y":return Number(n.year.toString().substring(2,4)).toString();case"dddd":return o.DateTimeFormatInfo.getDayName(n.weekDay);case"ddd":return o.DateTimeFormatInfo.getShortDayName(n.weekDay);case"dd":case"d":return o.DateTimeFormatInfo.padLeadingZeros(n.day.toString(),e.length);case"MMMM":return o.DateTimeFormatInfo.getMonthName(n.month);case"MMM":return o.DateTimeFormatInfo.getShortMonthName(n.month);case"MM":case"M":return o.DateTimeFormatInfo.padLeadingZeros(n.month.toString(),e.length);case"t":return o.DateTimeFormatInfo.get12HourNotation(n.hours).substring(0,1);case"tt":return o.DateTimeFormatInfo.get12HourNotation(n.hours);case"zzz":return o.DateTimeFormatInfo.getTimezoneInformationFull(n.date.getTimezoneOffset());case"zz":return o.DateTimeFormatInfo.getTimezoneInformationHoursFull(n.date.getTimezoneOffset());case"z":return o.DateTimeFormatInfo.getTimezoneInformationHoursShort(n.date.getTimezoneOffset());default:return e}})},e.defaultValueField=new e,e}();t.DateTime=v,function(e){e.MIN_INTEGER_VALUE=-2147483648,e.MAX_INTEGER_VALUE=2147483647,e.MIN_LONGINTEGER_VALUE=t.LongInteger.MIN_VALUE,e.MAX_LONGINTEGER_VALUE=t.LongInteger.MAX_VALUE,e.MIN_DECIMAL_VALUE=new t.Decimal("2").pow(96).neg(),e.MAX_DECIMAL_VALUE=new t.Decimal("2").pow(96).minus(1),e.MIN_DATE_VALUE=v.defaultValue,e.MAX_DATE_VALUE=new v(3e3,12,31),e.MIN_TIME_VALUE=v.defaultValue,e.MAX_TIME_VALUE=v.defaultValue.addHours(23).addMinutes(59).addSeconds(59),e.MIN_DATETIME_VALUE=v.defaultValue,e.MAX_DATETIME_VALUE=new v(3e3,12,31,23,59,59),e.DEFAULT_INTEGER=0,e.DEFAULT_LONGINTEGER=t.LongInteger.defaultValue,e.DEFAULT_DECIMAL=t.Decimal.defaultValue,e.DEFAULT_CURRENCY=t.Decimal.defaultValue,e.DEFAULT_TEXT="",e.DEFAULT_PHONENUMBER="",e.DEFAULT_EMAIL="",e.DEFAULT_BOOLEAN=!1,e.DEFAULT_DATE=v.defaultValue,e.DEFAULT_DATETIME=v.defaultValue,e.DEFAULT_TIME=v.defaultValue,e.DEFAULT_BINARYDATA=m.defaultValue,e.DEFAULT_OBJECT=null,e.FORMAT=new o.ApplicationFormatInfo(new o.DateTimeFormatInfo("yyyy-MM-dd","HH:mm:ss"),new o.NumberFormatInfo(".","")),e.ISO_DATE_FORMAT_REGEXP=/^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])([T ]\d{2}:\d{2}(:\d{2}(\.\d+)?(([+\-]\d{2}((:\d{2})|(\d{2})?))|Z)?)?)?$/i}(y=t.Constants||(t.Constants={}));var T=function(){function e(){this.map={}}return e.prototype.getItem=function(e){return this.map[e]},e.prototype.setItem=function(e,t){this.map[e]=t},e.prototype.invalidate=function(e){void 0===e?this.map={}:this.setItem(e,void 0)},e.prototype.clone=function(){var t=new e;for(var n in this.map)t.setItem(n,this.map[n]);return t},e}();t.Cache=T;var b=function(){function e(){this.list=[]}return e.prototype.getItem=function(e){if(!(e>=this.length))return this.list[e]},e.prototype.append=function(e){this.list.push(e)},e.prototype.appendMultiple=function(e){this.list=this.list.concat(new Array(e))},e.prototype.setItem=function(e,t){this.list[e]=t},e.prototype.insert=function(e,t){this.list.splice(e,0,t)},e.prototype.invalidate=function(e){void 0===e?this.list=[]:this.list.splice(e,1)},Object.defineProperty(e.prototype,"length",{get:function(){return this.list.length},enumerable:!0,configurable:!0}),e}();t.ListCache=b,t.equals=l,t.areBinaryNulls=f,t.defaultForType=d;var E=function(){function e(t,r,i,o,a){if(this.emptyListItem=t,this.data=r||new n.ImmutableList,this.itemIds=i||new n.ImmutableList,this._itemIdSeed=o||0,this._modelId=a||e.nextModelId++,r&&!i)for(var s=0,u=this.data.count();s<u;s++)this.itemIds=this.itemIds.push(this._itemIdSeed),this._itemIdSeed=this._itemIdSeed+1|0}return Object.defineProperty(e.prototype,"modelId",{get:function(){return this._modelId},enumerable:!0,configurable:!0}),e.prototype.push=function(t){return new e(this.emptyListItem,this.data.push(t),this.itemIds.push(this._itemIdSeed),this._itemIdSeed+1|0,this._modelId)},e.prototype.addFromOther=function(t){var n=this;return new e(this.emptyListItem,this.data.addFromOther(t.data),this.itemIds.pushAll(t.data.map(function(){return n._itemIdSeed++})),this._itemIdSeed,this._modelId)},e.prototype.pushAll=function(t){var n=this;return new e(this.emptyListItem,this.data.pushAll(t),this.itemIds.pushAll(t.map(function(){return n._itemIdSeed++})),this._itemIdSeed,this._modelId)},e.prototype.remove=function(t){return new e(this.emptyListItem,this.data.remove(t),this.itemIds.remove(t),this._itemIdSeed,this._modelId)},e.prototype.insert=function(t,n){return new e(this.emptyListItem,this.data.insert(t,n),this.itemIds.insert(t,this._itemIdSeed),this._itemIdSeed+1|0,this._modelId)},e.prototype.sort=function(t,r,i){var o=this,a=this.data.map(function(e,n){return{item:t(n),itemId:o.itemIds.get(n),by:r(t(n))}}),s=i?1:-1;a.sort(function(e,t){return s*c(e.by,t.by)});var u=n.ImmutableList.fromJS(a.map(function(e){return e.item})),l=n.ImmutableList.fromJS(a.map(function(e){return e.itemId}));return new e(this.emptyListItem,u,l,this._itemIdSeed,this._modelId)},e.prototype.getEmptyListItem=function(){return this.emptyListItem},e.prototype.setEmptyListItem=function(t){return new e(t,this.data,this.itemIds,this._itemIdSeed,this._modelId)},e.prototype.get=function(e){return this.data.get(e)},e.prototype.getId=function(e){return this.itemIds.get(e)+""},e.prototype.count=function(){return this.data.count()},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.set=function(t,n){return new e(this.emptyListItem,this.data.set(t,n),this.itemIds,this._itemIdSeed,this._modelId)},e.prototype.clear=function(){return new e(this.emptyListItem,this.data.clear(),this.itemIds.clear(),this._itemIdSeed,this._modelId)},e.prototype.forEach=function(e){return this.data.forEach(e)},e.prototype.reduce=function(e,t){return this.data.reduce(e,t)},e.fromJS=function(t,r){return new e(r,n.ImmutableList.fromJS(t))},e.fromJSON=function(t,r){return new e(r,n.ImmutableList.fromJS(t))},e.prototype.clone=function(){return new e(this.emptyListItem,this.data.clone(),this.itemIds.clone(),this._itemIdSeed)},e.nextModelId=1,e}();t.ImmutableListWithTracking=E;var w=function(){function e(){this.writePropagateHandler=this.defaultWritePropagate,this.propagationParent=this}return e.getData=function(e){if(void 0!==e&&e.constructor!==E)return e.data},e.setPropagationHandler=function(t,n,r,i){t.writePropagateHandler=i,e.setPropagationParent(t,n),e.setPropagationKey(t,r)},e.setPropagationParent=function(e,t){e.propagationParent=t},e.setPropagationKey=function(e,t){e.propagationKey=t},e.prototype.writePropagate=function(e,t){if(this.data.constructor!==e.constructor)throw new Error("Unexpected new data type");this.data=e,this.writePropagateHandler.apply(this.propagationParent,[this.propagationKey,e,t])},e.prototype.defaultWritePropagate=function(e,t,n){this.onDefaultWritePropagate(n)},e.prototype.onDefaultWritePropagate=function(e){},e}();t.ImmutableBase=w;var D=function(e){function r(t,n){var r=e.call(this)||this;return r.cache=n||new T,r.data=t||r.constructor.createDefaultData(),r}return __extends(r,e),r.createDefaultData=function(){var e=this,t=e.RecordClass;if(t)return new t},r.prototype.getBasicProperty=function(e){return this.data.get(e)},r.prototype.setBasicProperty=function(e,t,n,i){this.data.get(e)!==t&&(r.checkType(n,t,i),this.writePropagate(this.data.set(e,t),this.cache),this.onPropertyValueChanged(e))},r.prototype.onPropertyValueChanged=function(e){},r.prototype.getComplexProperty=function(e,t){var n=this.cache.getItem(e);if(n)return r.setPropagationParent(n,this),n;var i=this.data.get(e),o=this.cache.getItem(e+"__cache");return n=new t(i,o||null),this.cache.setItem(e,n),o&&this.cache.invalidate(e+"__cache"),r.setPropagationHandler(n,this,e,this.internalSetComplexProperty),n},r.prototype.setComplexProperty=function(e,t,n,r){this.setProperties([{name:e,value:t,expectedType:n,valueType:r,isBasicType:!1}])},r.prototype.internalSetComplexProperty=function(e,t,n){this.internalSetProperties([{name:e,value:t,isBasicType:!1}],n)},r.prototype.setProperties=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n],a=r.getData(o.value)||o.value;this.data.get(o.name)!==a&&(void 0!==o.expectedType&&r.checkType(o.expectedType,o.value,o.valueType),t.push({name:o.name,value:a,isBasicType:o.isBasicType}))}t.length>0&&this.internalSetProperties(t)},r.prototype.internalSetProperties=function(e,t){for(var n=this.data,r=this.cloneCache(),i=0,o=e;i<o.length;i++){var a=o[i];n=n.set(a.name,a.value),a.isBasicType||(r.invalidate(a.name),t&&r.setItem(a.name+"__cache",t))}this.writePropagate(n,r);for(var s=0,u=e;s<u.length;s++){var a=u[s];this.onPropertyValueChanged(a.name)}},r.prototype.cloneCache=function(){return this.cache.clone()},r.prototype.onDefaultWritePropagate=function(e){this.cache=e},r.checkType=function(e,t,n){switch(e){case g.Integer:r.ensureValidInteger(t);break;case g.LongInteger:r.ensureValidLongInteger(t);break;case g.Decimal:case g.Currency:r.ensureValidDecimal(t);break;case g.Text:case g.PhoneNumber:r.ensureValidText(t);break;case g.Email:r.ensureValidEmail(t);break;case g.Boolean:r.ensureValidBoolean(t);break;case g.Date:r.ensureValidDate(t);break;case g.Time:r.ensureValidTime(t);break;case g.DateTime:r.ensureValidDateTime(t);break;case g.Record:case g.RecordList:r.ensureValidComplexType(t,n);break;case g.BinaryData:r.ensureValidBinaryData(t);break;case g.Object:break;default:throw new TypeError("Unnexpected data type: "+e)}},r.ensureValidBinaryData=function(e){if(!("string"==typeof e||e instanceof m))throw new TypeError("Expecting a Binary Data, found: "+e)},r.ensureValidInteger=function(e){if("number"!=typeof e||isNaN(e)||e%1!=0)throw new TypeError("Expecting an Integer, found: "+e);if(e<y.MIN_INTEGER_VALUE)throw new TypeError("Integers must be greater than "+y.MIN_INTEGER_VALUE+", found: "+e);if(e>y.MAX_INTEGER_VALUE)throw new TypeError("Integers must be lower than "+y.MAX_INTEGER_VALUE+", found: "+e)},r.ensureValidLongInteger=function(e){if(!e||e.constructor!==t.LongInteger)throw new TypeError("Expecting a LongInteger, found: "+e);if(e.lessThan(y.MIN_LONGINTEGER_VALUE))throw new TypeError("Long Integers must be greater than "+y.MIN_LONGINTEGER_VALUE.toString()+", found: "+e.toString());if(e.greaterThan(y.MAX_LONGINTEGER_VALUE))throw new TypeError("Long Integers must be lower than "+y.MAX_LONGINTEGER_VALUE.toString()+", found: "+e.toString())},r.ensureValidDecimal=function(e){if(!e||e.constructor!==t.Decimal)throw new TypeError("Expecting a Decimal, found: "+e);if(e.lessThan(y.MIN_DECIMAL_VALUE))throw new TypeError("Decimals must be greater than "+y.MIN_DECIMAL_VALUE.toString()+", found: "+e.toString());if(e.greaterThan(y.MAX_DECIMAL_VALUE))throw new TypeError("Decimals must be lower than "+y.MAX_DECIMAL_VALUE.toString()+", found: "+e.toString())},r.ensureValidText=function(e){if("string"!=typeof e)throw new TypeError("Expecting a Text, found: "+e)},r.ensureValidEmail=function(e){if("string"!=typeof e)throw new TypeError("Expecting an Email, found: "+e)},r.ensureValidBoolean=function(e){if("boolean"!=typeof e)throw new TypeError("Expecting a Boolean, found: "+e)},r.ensureValidDate=function(e){if(!e||e.constructor!==v)throw new TypeError("Expecting a Date, found: "+e)},r.ensureValidTime=function(e){if(!e||e.constructor!==v)throw new TypeError("Expecting a Time, found: "+e)},r.ensureValidDateTime=function(e){if(!e||e.constructor!==v)throw new TypeError("Expecting a DateTime, found: "+e)},r.ensureValidComplexType=function(e,t){if(e){if(e.constructor===t)return;if(void 0!==e.isCompatibleWith){if(e.isCompatibleWith(t))return;throw new TypeError("Expecting a "+t.name+" type, found:  "+e.constructor.name)}}throw new TypeError("Expecting a Record or RecordList, found: "+e)},r.prototype.replaceWith=function(e){var t=r.getData(e);this.writePropagate(t,new T)},r.prototype.fastEquals=function(e){return this===e},r.prototype.equals=function(e){return!(!e||this.constructor!==e.constructor)},r.defineRecordClass=function(e){return n.defineRecordClass(e)},r.prototype.clone=function(){return new(0,this.constructor)(this.data,this.cloneCache())},r}(w);t.Record=D;var I=function(){function e(e,t,n,r,i,o,a,s){this.name=e,this.attrName=t,this.nameForJson=n,this.mandatory=r,this.ignoreForServer=i,this.dataType=o,this.complexType=s,this.defaultValue=a()}return e}(),S=function(){function e(e,t,n,r,i,o,a,s){this.name=e,this.attrName=t,this.nameForJson=n,this.mandatory=r,this.ignoreForServer=i,this.dataType=o,this.defaultValueGetter=a,this.complexType=s}return Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this.defaultValueGetter()},enumerable:!0,configurable:!0}),e}(),A=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),Object.defineProperty(t,"isGenericRecordType",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.getAttributes=function(){return this.constructor.Attributes||[]},t.getAttributes=function(){return this.Attributes||[]},t.isAnonymousRecord=function(){return this._isAnonymousRecord},t.attr=function(e,t,n,r,i,o,a,s){return o===g.DateTime||o===g.Date||o===g.Time?new S(e,t,n,r,i,o,a,s):new I(e,t,n,r,i,o,a,s)},t.attributesToDeclare=function(){return[]},t.init=function(){var e=this,n=e.attributesToDeclare();e.Attributes=n,n.forEach(function(t){t.attrName in e.prototype||(t.dataType===g.Record||t.dataType===g.RecordList?e.defineComplexProperty(t.attrName,t.dataType,t.complexType):e.defineBasicProperty(t.attrName,t.dataType))}),e.RecordClass=D.defineRecordClass(n.reduce(function(e,t){return e[t.attrName]=null,e},{}));var r="return function equals(other) {\n";r+="    return _super.prototype.equals.call(this, other)",n.forEach(function(e){p(e.dataType)?r+=" &&\n        this."+e.attrName+".equals(other."+e.attrName+")":r+=" &&\n        (this."+e.attrName+" === other."+e.attrName+")"}),r+=";\n",r+="};",e.prototype.equals=new Function("_super",r)(t)},t.createDefaultData=function(){var e=this,t=e.RecordClass;if(t){for(var n={},r=0,i=e.Attributes;r<i.length;r++){var o=i[r];o.dataType===g.Record||o.dataType===g.RecordList?n[o.attrName]=D.getData(o.defaultValue):n[o.attrName]=o.defaultValue}return new t(n)}},t.defineBasicProperty=function(e,t){Object.defineProperty(this.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.getBasicProperty(e)},set:function(n){this.setBasicProperty(e,n,t)}})},t.defineComplexProperty=function(e,t,n){Object.defineProperty(this.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.getComplexProperty(e,n)},set:function(r){this.setComplexProperty(e,r,t,n)}})},t.isCompatibleWith=function(e){return this===e||this.isAnonymousRecord()&&e.isAnonymousRecord()&&this.UniqueId===e.UniqueId},t.prototype.isCompatibleWith=function(e){return e.prototype instanceof t&&this.constructor.isCompatibleWith(e)},t.prototype.getNonSerializableAttributes=function(){return this.getAttributes().filter(function(e){return e.dataType===g.Object}).map(function(e){return e.attrName})},t.UniqueId="",t._isAnonymousRecord=!1,t}(D);t.GenericRecord=A;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.getItemType=function(){return this.itemType},t.prototype.getCache=function(){return null},t.prototype.newItem=function(e){throw new Error("@abstract")},t.prototype.resetEmptyListItem=function(){this.data=this.data.setEmptyListItem(this.newItem())},Object.defineProperty(t.prototype,"emptyListItem",{get:function(){return this.isEmpty?this.data.getEmptyListItem():this.data.get(0)},set:function(e){if(this.isEmpty){if(this.data.getEmptyListItem()===e)return;this.writePropagate(this.data.setEmptyListItem(e),this.getCache())}else{if(this.data.get(0)===e)return;this.writePropagate(this.data.set(0,e),this.getCache())}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modelId",{get:function(){return this.data.modelId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.data.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.data.count()},enumerable:!0,configurable:!0}),t.prototype.isValidIndex=function(e,t){return void 0===t&&(t=!1),e%1==0&&e>=0&&e<this.length+(t?1:0)},t.prototype.checkIndex=function(e,t){if(void 0===t&&(t=!1),!this.isValidIndex(e,t)){var n="Index out of bounds. Index "+e+" for ";throw this.isEmpty?n+="empty list.":n+="bounds [0, "+(this.length-1)+"].",new Error(n)}},t.prototype.idOf=function(e){return this.checkIndex(e),this.data.getId(e)},t.prototype.append=function(e){this.writePropagate(this.data.push(e),this.getCache())},t.prototype.appendAll=function(e){e.length>0&&this.writePropagate(this.data.addFromOther(e.data),this.getCache())},t.prototype.pushAll=function(e){e.length>0&&this.writePropagate(this.data.pushAll(e),this.getCache())},t.prototype.insert=function(e,t){this.checkIndex(e,!0),this.writePropagate(this.data.insert(e,t),this.getCache())},t.prototype.remove=function(e){this.checkIndex(e),1===this.length&&this.resetEmptyListItem(),this.writePropagate(this.data.remove(e),this.getCache())},t.prototype.clear=function(){this.resetEmptyListItem(),this.writePropagate(this.data.clear(),this.getCache())},t.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(e(this.getItem(t)))return t;return-1},t.prototype.any=function(e){return-1!==this.indexOf(e)},t.prototype.all=function(e){return!this.any(function(t){return!e(t)})},t.prototype.filter=function(e){for(var t=new this.constructor,n=[],r=0;r<this.length;r++){var i=this.getItem(r);e(i)&&n.push(i)}return t.pushAll(n),t},t.prototype.distinct=function(){for(var e=new this.constructor,t=new Array,n=0;n<this.length;n++){for(var r=this.getItem(n),i=!0,o=0;o<t.length;o++)if(l(r,this.getItem(t[o]))){i=!1;break}i&&(t.push(n),e.append(r))}return e},t.prototype.sort=function(e,t){for(var n=[],r=0;r<this.length;r++)n[r]=this.getItem(r);var i=t?1:-1;n.sort(function(t,n){return i*c(e(t),e(n))}),this.clear(),this.pushAll(n)},t.prototype.getCurrent=function(e){if(this.isEmpty)return this.emptyListItem;var t=this.getCurrentRowNumber(e);return this.getItem(t)},t.prototype.getCurrentRowNumber=function(e){return e.getCurrentRowNumber(this)},t.prototype.getItem=function(e){return this.checkIndex(e),this.data.get(e)},t.prototype.setCurrent=function(e,t){if(this.isEmpty)this.emptyListItem=t;else{var n=this.getCurrentRowNumber(e);this.setItem(n,t)}},t.prototype.setItem=function(e,t){this.checkIndex(e),this.data.get(e)!==t&&this.writePropagate(this.data.set(e,t),this.getCache())},t.prototype.fastEquals=function(e){return this===e},t.prototype.equals=function(e){if(!e||this.constructor!==e.constructor||this.length!==e.length)return!1;if(this.isEmpty){return l(this.emptyListItem,e.emptyListItem)}for(var t=0;t<this.length;t++){if(!l(this.getItem(t),e.getItem(t)))return!1}return!0},t}(w);t.List=x;var _=function(e){function t(t){var n=e.call(this)||this;return n.data=t||new E(n.newItem()),n}return __extends(t,e),Object.defineProperty(t,"isBasicTypeListType",{get:function(){return!0},enumerable:!0,configurable:!0}),t.getTypeDefaultValue=function(){throw new Error("Not implemented: getTypeDefaultValue")},t.prototype.newItem=function(){return this.constructor.getTypeDefaultValue()},t.prototype.clone=function(){return new(0,this.constructor)(this.data.clone())},t}(x);t.BasicTypeList=_;var N=function(e){function t(t,n){var r=e.call(this)||this;if(r._recordType=r.constructor.getItemType(),!r._recordType)throw new TypeError("GenericRecordLists must define a RecordType");return r.data=t||new E(A.getData(r.newItem())),r.cache=n||new b,r}return __extends(t,e),Object.defineProperty(t,"isGenericRecordListType",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.getCache=function(){return this.cache},t.prototype.newItem=function(e){return new(this.getRecordType())(e)},t.prototype.resetEmptyListItem=function(){this.data=this.data.setEmptyListItem(A.getData(this.newItem()))},t.prototype.getRecordType=function(){return this._recordType},Object.defineProperty(t.prototype,"emptyListItem",{get:function(){return this.internalGetItem(0,this.isEmpty)},set:function(e){this.isEmpty?this.internalSetEmptyListItem(0,e):this.internalSetItem(0,e)},enumerable:!0,configurable:!0}),t.prototype.append=function(t){this.isEmpty&&this.cache.invalidate(0),e.prototype.append.call(this,A.getData(t)),
this.cache.append(void 0)},t.prototype.appendAll=function(t){this.isEmpty&&this.cache.invalidate(0),e.prototype.appendAll.call(this,t),this.cache.appendMultiple(t.length)},t.prototype.pushAll=function(t){this.isEmpty&&this.cache.invalidate(0),e.prototype.pushAll.call(this,t.map(function(e){return D.getData(e)})),this.cache.appendMultiple(t.length)},t.prototype.insert=function(t,n){this.checkIndex(t,!0),this.isEmpty&&this.cache.invalidate(0),e.prototype.insert.call(this,t,A.getData(n)),this.cache.insert(t,void 0)},t.prototype.getItem=function(e){return this.internalGetItem(e,!1)},t.prototype.internalGetItem=function(e,n){n||this.checkIndex(e);var r=this.cache.getItem(e);return r?(t.setPropagationParent(r,this),t.setPropagationKey(r,e),r):(n?(r=this.newItem(this.data.getEmptyListItem()),t.setPropagationHandler(r,this,e,this.internalSetEmptyListItem)):(r=this.newItem(this.data.get(e)),t.setPropagationHandler(r,this,e,this.internalSetItem)),this.cache.setItem(e,r),r)},t.prototype.setItem=function(e,t){this.internalSetItem(e,t)},t.prototype.internalSetItem=function(e,t,n){var r=A.getData(t)||t;this.checkIndex(e),this.data.get(e)!==r&&(this.writePropagate(this.data.set(e,r),this.cache),this.cache.setItem(e,void 0))},t.prototype.internalSetEmptyListItem=function(e,t,n){var r=A.getData(t)||t;this.data.getEmptyListItem()!==r&&(this.writePropagate(this.data.setEmptyListItem(r),this.cache),this.cache.setItem(e,void 0))},t.prototype.remove=function(t){e.prototype.remove.call(this,t),this.cache.invalidate(t)},t.prototype.clear=function(){e.prototype.clear.call(this),this.cache.invalidate()},t.prototype.readAll=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=this.newItem();e(i,t.item(r)),n.push(i)}this.pushAll(n)},t.prototype.clone=function(){return new(0,this.constructor)(this.data.clone())},t.isCompatibleWith=function(e){return this===e||this.getItemType().isCompatibleWith(e.getItemType())},t.prototype.isCompatibleWith=function(e){return e.prototype instanceof t&&this.constructor.isCompatibleWith(e)},t}(x);t.GenericRecordList=N;var C=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_INTEGER},t.itemType=g.Integer,t}(_);t.IntegerList=C;var O=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_LONGINTEGER},t.itemType=g.LongInteger,t}(_);t.LongIntegerList=O;var R=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_DATE},t.itemType=g.Date,t}(_);t.DateList=R;var L=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_DATETIME},t.itemType=g.DateTime,t}(_);t.DateTimeList=L;var M=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_TIME},t.itemType=g.Time,t}(_);t.TimeList=M;var F=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_DECIMAL},t.itemType=g.Decimal,t}(_);t.DecimalList=F;var P=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_CURRENCY},t.itemType=g.Currency,t}(_);t.CurrencyList=P;var V=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_EMAIL},t.itemType=g.Email,t}(_);t.EmailList=V;var U=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_PHONENUMBER},t.itemType=g.PhoneNumber,t}(_);t.PhoneNumberList=U;var k=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_BOOLEAN},t.itemType=g.Boolean,t}(_);t.BooleanList=k;var j=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_BINARYDATA},t.itemType=g.BinaryData,t}(_);t.BinaryDataList=j;var B=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.getTypeDefaultValue=function(){return y.DEFAULT_TEXT},t.itemType=g.Text,t}(_);t.TextList=B;var q=function(){function e(e){this.varValue=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.varValue},set:function(e){this.setValue(e)},enumerable:!0,configurable:!0}),e.prototype.setValue=function(e){this.varValue=e},e}();t.BasicVariableHolder=q;var H=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.setValue=function(t){e.prototype.setValue.call(this,t?t.clone():t)},t}(q);t.VariableHolder=H,t.RecordWithStaticConstructor=h;var W=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),t.attributesToDeclare=function(){return[this.attr("JSON","jSONOut","jSONOut",!0,!0,g.Text,function(){return d(g.Text)})].concat(e.attributesToDeclare.call(this))},t=__decorate([h()],t)}(A);t.JSONSerializeOutputType=W;var G=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),t.attributesToDeclare=function(){return[this.attr("ExceptionMessage","exceptionMessageAttr","exceptionMessageAttr",!0,!0,g.Text,function(){return d(g.Text)})].concat(e.attributesToDeclare.call(this))},t=__decorate([h()],t)}(A);t.ErrorHandlerOutputType=G;var J=function(){function e(){this.typeDefinitions=new Map,this.typeCache=new Map}return e.prototype.isTypeRegistered=function(e){return void 0!==this.typeDefinitions.get(e)},e.prototype.registerTypeDefinition=function(e,t){this.typeDefinitions.set(e,t)},e.prototype.getType=function(e){var t=this.typeCache.get(e);if(t)return t;var n=this.typeDefinitions.get(e);if(!n)throw new TypeError("Type "+e+" was not registered");var r=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),t.attributesToDeclare=function(){var t=this;return n.map(function(e){return t.attr(e.name,e.attrName,e.nameForJson||e.attrName,void 0!==e.mandatory&&e.mandatory,void 0===e.ignoreForServer||e.ignoreForServer,e.dataType,e.defaultValue,e.complexType)}).concat(e.attributesToDeclare.call(this))},t=__decorate([h()],t)}(A);return this.typeCache.set(e,r),r},e}();t.RecordTypeFactory=J;var z=function(e){function t(t,n,r){var i=e.call(this)||this;return i.mainAttributeName=t,i.mainAttributeAttrName=n,i.additionalAttributes=r,i}return __extends(t,e),t.prototype.registerTypeDefinition=function(e,t){throw new Error("Invalid operation")},t.prototype.createMainAttributeInfo=function(e){return{name:this.mainAttributeName,attrName:this.mainAttributeAttrName,mandatory:!0,dataType:this.getDataType(e),defaultValue:this.getDefaultValue(e),complexType:this.getComplexType(e)}},t.prototype.registerTypeIfNeeded=function(t){if(!this.isTypeRegistered(t)){var n=[this.createMainAttributeInfo(t)];this.additionalAttributes&&(n=n.concat(this.additionalAttributes)),e.prototype.registerTypeDefinition.call(this,t,n)}},t.prototype.getType=function(t){return this.registerTypeIfNeeded(t),e.prototype.getType.call(this,t)},t}(J);t.TypeKeyedTypeFactory=z;var K=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return __extends(t,e),t.prototype.getDataType=function(e){return e},t.prototype.getDefaultValue=function(e){return function(){return d(e)}},t.prototype.getComplexType=function(e){},t}(z);t.BasicTypeKeyedTypeFactory=K;var Q=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return __extends(t,e),t.prototype.getDataType=function(e){return g.Record},t.prototype.getDefaultValue=function(e){return function(){return w.getData(new e)}},t.prototype.getComplexType=function(e){return e},t}(z);t.ComplexTypeKeyedTypeFactory=Q;!function(e){function n(e){return e&&e.constructor===t.Decimal}function r(e){return e&&e.value&&e.value.constructor===m}function i(e){return n(e)&&!e.isNaN()}function o(e){return"string"==typeof e}function a(e){return"boolean"==typeof e}function u(e){return o(e)||f(e)||a(e)||b(e)||h(e)||n(e)}function c(e){return l(e)&&e%1==0}function l(e){return f(e)&&!isNaN(e)}function f(e){return"number"==typeof e}function d(e){return e>=y.MIN_INTEGER_VALUE&&e<=y.MAX_INTEGER_VALUE}function p(e){return h(e)}function h(e){return e&&e.constructor===t.LongInteger}function g(e){return E(e)&&e.hours===y.DEFAULT_DATE.hours&&e.minutes===y.DEFAULT_DATE.minutes&&e.seconds===y.DEFAULT_DATE.seconds}function T(e){return E(e)&&e.year===y.DEFAULT_TIME.year&&e.month===y.DEFAULT_TIME.month&&e.day===y.DEFAULT_TIME.day}function b(e){return e instanceof v}function E(e){return b(e)&&!isNaN(e.getTime())}function w(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function D(e){return w(e)&&!isNaN(e.getTime())}function I(e){return!!e&&(void 0!==e.content||void 0!==e.url)}function S(e){var t="",n="";if(e.greaterThan(R))t="maximum",n=R.toString();else{if(!e.lessThan(L))return;t="minimum",n=L.toString()}var r="Unable to convert "+e.toString()+" to the Javascript Number type since exceeds the "+t+" value allowed which is "+n+".";throw new s.Exceptions.NumberOverflowException(r)}function A(e){if(e.decimalPlaces()>16){var t="Unable to convert "+e.toString()+" to the Javascript Number type because it will lead to precision loss. The maximum safe number of digits after the decimal point is 16.";throw new s.Exceptions.NumberOverflowException(t)}}function x(e,t,n,r){return"Unable to convert "+e+" to the "+t+" type since it exceeds the "+n+" value allowed which is "+r+"."}function _(e,t,n,r){var i=M.None,o="",a=Math.max(t,L),u=Math.min(n,R);if(e<a)i=M.Minimum,o=a.toString();else{if(!(e>u))return null;i=M.Maximum,o=u.toString()}throw new s.Exceptions.NumberOverflowException(x(e.toString(),r,i,o))}function N(e){_(e,y.MIN_INTEGER_VALUE,y.MAX_INTEGER_VALUE,"Integer")}function C(e){_(e,y.MIN_LONGINTEGER_VALUE.toNumber(),y.MAX_LONGINTEGER_VALUE.toNumber(),"Long Integer")}function O(e){_(e,y.MIN_DECIMAL_VALUE.toNumber(),y.MAX_DECIMAL_VALUE.toNumber(),"Decimal")}e.isDecimal=n,e.isBinaryData=r,e.isValidDecimal=i,e.isText=o,e.isBoolean=a,e.isBasicType=u,e.isValidInteger=c,e.isValidJsNumber=l,e.isJsNumber=f,e.isWithinIntegerRange=d,e.isValidLongInteger=p,e.isLongInteger=h,e.isValidDate=g,e.isValidTime=T,e.isDateTime=b,e.isValidDateTime=E,e.isJsDate=w,e.isValidJsDate=D,e.hasBinaryDataInterface=I;var R=9007199254740991,L=-9007199254740991;e.ensureNumberInsideBounds=S,e.ensureNumberPrecision=A;var M=function(){function e(){}return Object.defineProperty(e,"None",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Minimum",{get:function(){return"minimum"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Maximum",{get:function(){return"maximum"},enumerable:!0,configurable:!0}),e}();e.ensureIntegerInsideBounds=N,e.ensureLongIntegerInsideBounds=C,e.ensureDecimalInsideBounds=O}(t.TypeValidations||(t.TypeValidations={}))}),define("OutSystems/ClientRuntime/RegExpHelper",["require","exports"],function(e,t){"use strict";function n(e,t,n){void 0===n&&(n=!1);for(var r=[],o=new RegExp(t,"g"+(n?"i":"")),a=o.exec(e);a;)r.push(new i(a,o.lastIndex)),a=o.exec(e);return r}function r(e,t,r,i){void 0===r&&(r=!1);for(var o=n(e,t,r),a=e,s=0,u=0;u<o.length;u++){var c=o[u],l=i(c);a=a.substr(s,c.index)+l+a.substr(s+c.index+c.length),s+=l.length-c.length}return a}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._groups=e,this._index=t-this._groups[0].length}return Object.defineProperty(e.prototype,"value",{get:function(){return this._groups[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._groups[0].length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),e}();t.Match=i,t.matches=n,t.replace=r}),define("OutSystems/ClientRuntime/Database",["require","exports","./Exceptions","./Flow","./NativeHelper","./Logger","./RegExpHelper"],function(e,t,n,r,i,o,a){"use strict";function s(e){o.error("Database",u),"undefined"!=typeof SQLError&&e instanceof SQLError?o.error("Database","SQLError "+e.code+": "+e.message):o.error("Database",e)}Object.defineProperty(t,"__esModule",{value:!0});var u="Failed to execute canary query (probably due to zombie transaction)",c=function(){function e(e){this.callback=e}return e}(),l=function(e){function t(t){var n=e.call(this,t)||this;return n.callback=t,n}return __extends(t,e),t}(c),f=function(e){function t(t){var n=e.call(this,t)||this;return n.callback=t,n}return __extends(t,e),t}(c),d=function(){function e(e,t){void 0===t&&(t=!0),this.tx=e,this.allowTraces=t,this.chain=[],this.pendingResult=null,this.hasPendingResult=!1,this.pendingError=null,this.hasPendingError=!1,this.parent=null}return e.prototype.cloneForNext=function(){var t=new e(this.tx,this.allowTraces);return t.parent=this,t},e.prototype.andThen=function(e){return this.hasPendingError||(this.chain.push(new l(e)),this.triggerPendingResults()),this},e.prototype.withoutTraces=function(e){return this.andThen(function(t,n){return t.allowTraces=!1,e(t,n)})},e.prototype.andThenAll=function(e){return this.andThen(function(t,n){var r=e(n),i=t.feed(void 0);if(r)for(var o=0;o<r.length;o++)i=i.andThen(r[o]);return i.andThen(function(){})})},e.prototype.extractScalar=function(e){var t=Object.keys(e);if(1===t.length){return e[t[0]]}throw new n.Exceptions.DataBaseException("","Invalid use of 'extractScalar': the row should have a single column, but found '"+t.join("', '")+"'")},e.prototype.executeScalar=function(e,t){var n=this;return this.executeQueryRaw(e,t).andThen(function(e,t){return 0===t.rows.length?void 0:n.extractScalar(t.rows.item(0))})},e.prototype.executeQuery=function(e,t,n){return this.executeQueryRaw(e,n).andThen(function(e,n){for(var r=new Array(n.rows.length),i=0;i<n.rows.length;i++){var o=n.rows.item(i);r[i]=t(o)}return r})},e.prototype.executeNonQuery=function(e,t){return this.executeQueryRaw(e,t).andThen(function(e,t){})},e.prototype.executeQueryRaw=function(t,n){var r=this,i=e.queryCount++,o=n||[];return this.traceQuery(i,t,o),this.tx.executeSql(t,n,function(e,t){try{r.continueWithNext(t)}catch(t){r.abortExplicitly(e,t)}},function(e,t){return r.trace("SQL command #"+i+" failed with error "+t.message),r.abort(t)}),this},e.prototype.feed=function(e){return this.hasPendingResult=!0,this.pendingResult=e,this},e.prototype.onError=function(e){return this.chain.push(new f(e)),this.triggerPendingError(),this},e.prototype.nextCallback=function(e){for(var t=0;t<this.chain.length;t++)if(e(this.chain[t])){var n=this.chain[t].callback;return this.chain=this.chain.slice(t+1,this.chain.length),n}return null},e.prototype.nextErrorCallback=function(){return this.nextCallback(function(e){return e instanceof f})},e.prototype.hasErrorCallback=function(){return this.chain.some(function(e){return e instanceof f})},e.prototype.nextSuccessCallback=function(){return this.nextCallback(function(e){return e instanceof l})},e.prototype.abort=function(e){var t=this.nextErrorCallback();if(t){this.pendingError=null,this.hasPendingError=!1;try{var n=!1,r=function(){n=!0},i=t(e,r);return n?this.chain=[]:this.continueWithNext(i),n}catch(e){if(this.hasErrorCallback())return this.abort(e);if(this.parent)return this.parent.abort(e);throw e}}else this.pendingError=e,this.hasPendingError=!0;return!this.parent||this.parent.abort(e)},e.prototype.abortExplicitly=function(e,t){this.abort(t)&&e.executeSql("ABORT_TRANSACTION",null,function(){},function(){return!0})},e.prototype.continueWithNext=function(t){var n=this;if(this.hasPendingResult=!1,t instanceof e)return void t.andThen(function(e,t){n.continueWithNext(t)});if(t instanceof Array&&0!==t.length&&t[0]instanceof e){var r=0,i=function(){r<t.length?(t[r].andThen(i),r++):n.continueWithNext(t)};return void i()}if(this.chain.length>0){var o=this.nextSuccessCallback();if(o)return void this.continueWithNext(this.tryNextItem(o,this.cloneForNext(),t))}this.hasPendingResult=!0,this.pendingResult=t},e.prototype.tryNextItem=function(e,t,n){try{return e(t,n)}catch(e){this.abortExplicitly(this.tx,e)}},e.prototype.triggerPendingResults=function(){this.hasPendingResult&&(this.hasPendingResult=!1,this.continueWithNext(this.pendingResult))},e.prototype.triggerPendingError=function(){this.hasPendingError&&(this.hasPendingError=!1,this.abort(this.pendingError))},e.prototype.trace=function(e){this.allowTraces&&o.trace(this,e)},e.prototype.traceQuery=function(e,t,n){this.allowTraces&&o.trace(this,function(){var r=(n||[]).map(function(e){return String(e).substr(0,80)});return"Executing SQL command #"+e+": "+t+" with arguments "+r})},e.for=function(t){return new e(t)},e.queryCount=0,e}(),p=function(){function e(e,t){this.dbName=e,this.db=t,this.txCount=0,this.setDispose()}return e.prototype.setDispose=function(){var e=this,t=this.db;window&&t&&t.close&&window.addEventListener("unload",function(){e.trace("Closing database "+e.name),t.close(function(){return e.trace("Database "+e.name+" closed successfully")},function(t){return o.error("SqlDatabase","Database "+e.name+" failed to close",t)})},!1)},Object.defineProperty(e.prototype,"name",{get:function(){return this.dbName},enumerable:!0,configurable:!0}),e.prototype.executeTransaction=function(e,t){return void 0===t&&(t=!0),this.innerExecuteTransaction(e,!1,t)},e.prototype.executeReadTransaction=function(e,t){return void 0===t&&(t=!0),this.innerExecuteTransaction(e,!0,t)},e.prototype.innerExecuteTransaction=function(e,t,i){var o=this,a=t?"READ":"WRITE",s=t?this.db.readTransaction:this.db.transaction,u=++this.txCount;return r.promise(function(t,r){var c,l;o.trace("Opening local storage "+a+" transaction #"+u+" on database "+o.name,i),s.call(o.db,function(t){o.trace("Executing local storage "+a+" transaction #"+u+" on database "+o.name,i);var n=d.for(t).feed(void 0);return n=i?n.andThen(e):n.withoutTraces(e),n.andThen(function(e,t){return c=t}).onError(function(e,t){l=e,t()})},function(e){l=l||e;var t=l&&l.message?l:new Error(l);return o.trace("Rolled back local storage "+a+" transaction #"+u+" on database "+o.name+": "+t.message,i),r(new n.Exceptions.DataBaseException("",t.message.toString())),!0},function(){o.trace("Committed local storage "+a+" transaction #"+u+" on database "+o.name,i),t(c)})})},e.prototype.testConnection=function(){var e=this,t=0;return this.trace("Starting to test on database connections. Performing #5 test queries."),Promise.all(Array.apply(null,{length:5}).map(function(n,r){return new Promise(function(n){e.executeTransaction(function(e){return e.executeQueryRaw("SELECT 1").onError(function(e,n){s(e),t++})}).catch(function(e){s(e),t++}).then(function(){n()})})})).then(function(){e.trace("Finished tests on database connections. #"+(5-t)+" out of #5 successfull queries.")})},e.prototype.trace=function(e,t){void 0===t&&(t=!0),t&&o.trace(this,e)},e}(),h=function(){function e(){this.dbCache={}}return e.prototype.trace=function(e){o.trace(this,e)},e.prototype.asSafeDbName=function(e){return e||""},e.prototype.openDb=function(e){var t=this;return e=this.asSafeDbName(e),r.promise(function(r,o){t.dbCache[e]?r(t.dbCache[e]):i.ensureNativeReady().then(function(){if("undefined"==typeof window)return o(new n.Exceptions.SystemException("Database is only available in the browser/web view"));var a=window;if(i.isRunningOnNative())if(a.sqlitePlugin){t.trace("Opening database '"+e+"'");try{a.sqlitePlugin.openDatabase({name:e,location:"default"},function(i){i?(t.trace("Database '"+e+"' opened successfully"),t.dbCache[e]=new p(e,i),r(t.dbCache[e])):(t.trace("Error opening database '"+e+"'"),o(new n.Exceptions.OpenDatabaseException("Could not open database '"+e+"'")))},function(r){t.trace("Error opening database '"+e+"' "+r.message),o(new n.Exceptions.OpenDatabaseException("Could not open database '"+e+"': "+r.message.toString()))})}catch(t){o(new n.Exceptions.OpenDatabaseException("Could not open database '"+e+"': "+t.message.toString()))}}else o(new n.Exceptions.OpenDatabaseException("No database driver available"));else if(a.openDatabase)try{t.trace("Opening database '"+e+"'");var s=a.openDatabase(e,"1.0",e,5242880);s?(t.trace("Database '"+e+"' opened successfully"),t.dbCache[e]=new p(e,s),r(t.dbCache[e])):(t.trace("Error opening database '"+e+"'"),o(new n.Exceptions.OpenDatabaseException("Could not open database '"+e+"'")))}catch(t){o(new n.Exceptions.OpenDatabaseException("Could not open database '"+e+"': "+t.message.toString()))}else{var u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),c=!!a.chrome,l="Your app requires native access to a Local Storage database that is not available in your browser.\n\nPlease test your app in your mobile device"+(u||c?"":", or use Google Chrome or Safari web browsers")+".";alert(l),o(new n.Exceptions.SystemException(l))}}).catch(o)})},e}();t.SqlDbProvider=new h;var g;!function(e){e[e.Full=0]="Full",e[e.Type=1]="Type",e[e.Length=3]="Length",e[e.Decimals=5]="Decimals"}(g||(g={}));var m=function(){function e(){}return e.prototype.tableExists=function(e,t){return e.executeReadTransaction(function(e){return e.executeScalar("SELECT COUNT(*) FROM sqlite_master WHERE type = 'table' AND name = UPPER(?)",[t]).andThen(function(e,t){return 0!==t})})},e.prototype.columnExists=function(e,t,n){return e.executeReadTransaction(function(e){return e.executeScalar('SELECT "'+t+'"."'+n+'" FROM "'+t+'" LIMIT 1')}).then(function(){return!0}).catch(function(){return!1})},e.prototype.dbTypeFromSchemaType=function(e){switch(e=e||"",e.toUpperCase()){case"INTEGER":return 3;case"BIGINT":return 4;case"REAL":return 5;case"BOOLEAN":return 2;case"TEXT":return 0;case"DATE":return 7;case"TIME":return 8;case"DATETIME":return 6;case"BLOB":return 1;default:return 9}},e.prototype.pragmaToTableInfo=function(e,t,n){var r=this;return t=t||"",{tableName:e,idIsAutoNumber:t.search(/INTEGER PRIMARY KEY AUTOINCREMENT/i)>=0?2:0,attributes:n.map(function(e){var t=a.matches(e.type,"^([a-z]+)(\\(([0-9]+)(\\,([0-9]+))?\\))?$",!0).shift();if(t){var n=r.dbTypeFromSchemaType(t.groups[1]);return{name:e.name,type:n,length:t.groups[3]?parseInt(t.groups[3],10):void 0,decimals:t.groups[5]?parseInt(t.groups[5],10):void 0,isEntityReference:"NULL"===e.dflt_value&&r.isIdentifierUnderlyingType(n),isPrimaryKey:1===e.pk}}})}},e.prototype.isIdentifierUnderlyingType=function(e){switch(e){case 3:case 4:case 0:return!0;default:return!1}},e.prototype.introspectTableInfo=function(e,t){var n=this;if(!i.isRunningOnNative())return e.feed(null);var r;return e.executeScalar("SELECT sql FROM sqlite_master WHERE type = 'table' AND name = '"+t+"'").andThen(function(e,t){return r=t}).andThen(function(e,n){return e.executeQuery("PRAGMA table_info('"+t+"')",function(e){return e})}).andThen(function(e,i){return n.pragmaToTableInfo(t,r,i)})},e}();t.SqlDbIntrospector=new m}),define("OutSystems/ClientRuntime/RolesInfo",["require","exports","./StorageProvider","./ApplicationInfo","./CookiesManager","./Exceptions","./Logger"],function(e,t,n,r,i,o,a){"use strict";function s(e){return t.RolesInfoPersistentStorage=e,!c()&&0!==this.getUserId()&&t.RolesInfoPersistentStorage?t.RolesInfoPersistentStorage.getValue(t.ROLES_INFO_MODULE_NAME).then(function(e){return t.RolesInfoStorage.rolesInfo.set(e)}):Promise.resolve()}function u(e){c()&&e===t.RolesInfoStorage.rolesInfo.get()||!t.RolesInfoPersistentStorage||t.RolesInfoPersistentStorage.setValue(t.ROLES_INFO_MODULE_NAME,e),t.RolesInfoStorage.rolesInfo.set(e)}function c(){return t.RolesInfoStorage.rolesInfo.isDefined()}function l(){var e=i.readCookie(r.getUserCookieName());if(a.trace(t.ROLES_INFO_MODULE_NAME,"Checking User's ID: User cookie value ("+e+")"),null==e)return 0;var n=/uid=(\d+)/,o=e.match(n);return null==o?(a.trace(t.ROLES_INFO_MODULE_NAME,"Checking User's ID: User is Anonymous"),0):parseInt(o[1],10)}function f(){if(0===this.getUserId())throw a.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: Not authorized since user is not registered"),new o.Exceptions.NotRegisteredException("","Registered role required");a.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: User authorized since it is registered")}function d(e){if(0===this.getUserId())throw a.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: Not authorized because user is not logged in"),e[e.length-1].roleException;if(!c())throw a.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: Not authorized since user don't have roles for the specified user provider"),e[e.length-1].roleException;a.trace(t.ROLES_INFO_MODULE_NAME,function(){var t="";return e.forEach(function(e){return t+=e.roleException.message+" [RoleKey="+e.roleKey+"] "}),"Checking authorization: Required Roles ( "+t+")"});var n=t.RolesInfoStorage.rolesInfo.get();if(a.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: User roles keys ("+n+")"),!e.some(function(e){return n.indexOf(e.roleKey)>=0}))throw a.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: Not authorized since roles don't match"),e[e.length-1].roleException;a.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: User authorized due to role match")}Object.defineProperty(t,"__esModule",{value:!0}),t.ROLES_INFO_MODULE_NAME="RolesInfo",t.RolesInfoStorage={rolesInfo:new n.StorageObject(n.StorageType.Persistent,t.ROLES_INFO_MODULE_NAME,null,r.getUserProviderName)},t.initialize=s,t.storeRoleInformation=u,t.areRolesDefined=c,t.getUserId=l,t.checkRegistered=f,t.checkRoles=d}),define("OutSystems/ClientRuntime/BuiltinFunctions",["require","exports","./DataTypes","./ApplicationInfo","./Navigation","./RolesInfo"],function(e,t,n,r,i,o){"use strict";function a(e){return void 0===e&&(e=n.Constants.FORMAT.defaultDateTimeFormat),{year:parseInt(RegExp["$"+(e.yearIndexForDate+1)],10),month:parseInt(RegExp["$"+(e.monthIndexForDate+1)],10),day:parseInt(RegExp["$"+(e.dayIndexForDate+1)],10)}}function s(e){void 0===e&&(e=n.Constants.FORMAT.defaultDateTimeFormat);var t=parseInt(RegExp["$"+(e.secondsIndexForTime+1)],10);return{hours:parseInt(RegExp["$"+(e.hoursIndexForTime+1)],10),minutes:parseInt(RegExp["$"+(e.minutesIndexForTime+1)],10),seconds:isNaN(t)?0:t}}function u(e){void 0===e&&(e=n.Constants.FORMAT.defaultDateTimeFormat);var t=parseInt(RegExp["$"+(e.secondsIndexForDateTime+1)],10);return{year:parseInt(RegExp["$"+(e.yearIndexForDateTime+1)],10),month:parseInt(RegExp["$"+(e.monthIndexForDateTime+1)],10),day:parseInt(RegExp["$"+(e.dayIndexForDateTime+1)],10),hours:parseInt(RegExp["$"+(e.hoursIndexForDateTime+1)],10),minutes:parseInt(RegExp["$"+(e.minutesIndexForDateTime+1)],10),seconds:isNaN(t)?0:t}}function c(e){var t=e.abs();return t.isNaN()?n.Constants.DEFAULT_DECIMAL:t}function l(e,t){var r=e.mod(t);return r.isNaN()?n.Constants.DEFAULT_DECIMAL:r}function f(e,t){var r=e.pow(t);return r.isNaN()?n.Constants.DEFAULT_DECIMAL:r}function d(e,t){void 0===t&&(t=0);var r=e.toDecimalPlaces(t);return r.isNaN()?n.Constants.DEFAULT_DECIMAL:r}function p(e){try{var t=e.sqrt();return t.isNaN()?n.Constants.DEFAULT_DECIMAL:t}catch(e){return n.Constants.DEFAULT_DECIMAL}}function h(e){var t=e.trunc();return t.isNaN()?n.Constants.DEFAULT_DECIMAL:t}function g(e,t){var r=n.Decimal.max(e,t);return r.isNaN()?n.Constants.DEFAULT_DECIMAL:r}function m(e,t){var r=n.Decimal.min(e,t);return r.isNaN()?n.Constants.DEFAULT_DECIMAL:r}function y(e){var t=new n.Decimal(0);return e.eq(t)||e.isNaN()?n.Constants.DEFAULT_INTEGER:e>t?1:-1}function v(e){return e>=0&&e<=65535?String.fromCharCode(e):n.Constants.DEFAULT_TEXT}function T(e,t){return(e||"")+(t||"")}function b(e){if(void 0===e||""===e)return e;var t=[],n=" ".charCodeAt(0),r="\n".charCodeAt(0);e.charCodeAt(0)===n?t[0]=" ":t[0]=e.charAt(0);for(var i=1;i<e.length-1;++i)e.charCodeAt(i)!==n||e.charCodeAt(i-1)!==r&&e.charCodeAt(i+1)!==n?t[i]=e.charAt(i):t[i]=" ";return 1!==e.length&&(e.charCodeAt(e.length-1)===n?t[e.length-1]=" ":t[e.length-1]=e.charAt(e.length-1)),t.join("")}function E(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);60===r?t.push("&lt;"):62===r?t.push("&gt;"):38===r?t.push("&amp;"):34===r?t.push("&quot;"):39===r?t.push("&#39;"):r>=160&&r<=255?t.push("&#"+r+";"):t.push(e.charAt(n))}return t.join("")}function w(e){return void 0===e?"":b(E(e)).replace(/\r/g,"").replace(/&#13;/g,"").replace(/\n/g,"<br/>").replace(/&#10;/g,"<br/>")}function D(e){return e.replace(/\\/g,"\\x5c").replace(/'/g,"\\x27").replace(/\"/g,"\\x22").replace("&","\\x26").replace("<","\\x3c").replace(/>/g,"\\x3e").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}function I(e){return encodeURIComponent(e).replace(/'/g,"%27").replace(/%20/g,"+")}function S(e,t,n,r,i){try{if(0===t.length||n<0||n>A(e))return-1;i&&(e=e.toLocaleLowerCase(),t=t.toLocaleLowerCase()),n&&n>0&&(n=e.match(new RegExp("("+Ut+".|.){"+n+"}"))[0].length);var o=r?e.lastIndexOf(t,n||e.length):e.indexOf(t,n||0);return o<0?-1:A(e.substr(0,o))}catch(e){return-1}}function A(e){var t=e.match(kt);return e.length-(t?t.length:0)}function x(e,t,n){var r=t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");return e.replace(new RegExp(r,"g"),n)}function _(e,t,r){var i=A(e);if(t>=0&&r>0&&i>=t+1)i=r;else{if(!(t>=0&&r>0&&i>t))return n.Constants.DEFAULT_TEXT;i-=t}return e.match(kt)?e.match(new RegExp("("+Ut+".|.){"+t+"}(("+Ut+".|.){"+i+"})"))[2]:e.substr(t,i)}function N(e){return e.toLowerCase()}function C(e){return e.toUpperCase()}function O(e){return e.trim()}function R(e){for(var t=0;" "===e[t];)t++;return e.substr(t)}function L(e){for(var t=e.length-1;" "===e[t];)t--;return e.substr(0,t+1)}function M(e,t){return e.addDays(t)}function F(e,t){return e.addHours(t)}function P(e,t){return e.addMinutes(t)}function V(e,t){return e.addSeconds(t)}function U(e,t){return e.addYears(t)}function k(e,t){return e.addMonths(t)}function j(e,t){return new n.DateTime(e.year,e.month,e.day,t.hours,t.minutes,t.seconds,t.milliseconds)}function B(){var e=new n.DateTime(new Date);return new n.DateTime(e.year,e.month,e.day)}function q(){return new n.DateTime(new Date)}function H(){var e=new n.DateTime(new Date);return new n.DateTime(1900,1,1,e.hours,e.minutes,e.seconds)}function W(e){return e.weekDay}function G(e,t,n){var r=n<=36e5,i=n<=6e4,o=n<=1e3,a=J(e,r,i,o).toNative(),s=J(t,r,i,o).toNative(),u=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),0),c=Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),0),l=c-u;return Math.floor(l/n)}function J(e,t,r,i){return new n.DateTime(e.year,e.month,e.day,t?e.hours:0,r?e.minutes:0,i?e.seconds:0)}function z(e,t){return G(e,t,864e5)}function K(e,t){return G(e,t,36e5)}function Q(e,t){return G(e,t,6e4)}function Y(e,t){return G(e,t,1e3)}function X(e){return e.year}function Z(e){return e.month}function $(e){return e.day}function ee(e){return e.hours}function te(e){return e.minutes}function ne(e){return e.seconds}function re(e,t,r){return se(e,t,r,0,0,0)?new n.DateTime(e,t,r):n.Constants.DEFAULT_DATE}function ie(e,t,r,i,o,a){return se(e,t,r,i,o,a)?new n.DateTime(e,t,r,i,o,a):n.Constants.DEFAULT_DATETIME}function oe(e,t,r){return ae(e,t,r)?new n.DateTime(1900,1,1,e,t,r):n.Constants.DEFAULT_TIME}function ae(e,t,r){var i=new n.DateTime(1900,1,1,e,t,r);return i.hours===e&&i.minutes===t&&i.seconds===r}function se(e,t,r,i,o,a){var s=new n.DateTime(e,t,r,i,o,a);return s.year===e&&s.month===t&&s.day===r&&s.hours===i&&s.minutes===o&&s.seconds===a}function ue(e){return e?1:0}function ce(e){return e?n.LongInteger.fromNumber(1):n.LongInteger.fromNumber(0)}function le(e){return new n.Decimal(e?1:0)}function fe(e){return!0===e?"True":!1===e?"False":n.Constants.DEFAULT_TEXT}function de(e){return new n.DateTime(e.year,e.month,e.day)}function pe(e){return new n.DateTime(1900,1,1,e.hours,e.minutes,e.seconds)}function he(e){return e.toString(n.Constants.FORMAT.defaultDateTimeFormat.dateTimeFormat)}function ge(e){
return e.toString(n.Constants.FORMAT.defaultDateTimeFormat.dateFormat)}function me(e){return e}function ye(e){return!e.eq(new n.Decimal(0))}function ve(e){return n.TypeValidations.isValidDecimal(e)?e.toString():n.Constants.DEFAULT_TEXT}function Te(e){return e.gte(n.Constants.MIN_INTEGER_VALUE)&&e.lte(n.Constants.MAX_INTEGER_VALUE)}function be(e){return Te(e)?e.round().toNumber():n.Constants.DEFAULT_INTEGER}function Ee(e){return e.gte(n.Constants.MIN_LONGINTEGER_VALUE.toString())&&e.lte(n.Constants.MAX_LONGINTEGER_VALUE.toString())}function we(e){return Ee(e)?n.LongInteger.fromString(e.round().toString()):n.Constants.DEFAULT_LONGINTEGER}function De(e){return new n.Decimal(e.toString())}function Ie(e){return n.TypeValidations.isWithinIntegerRange(e.toNumber())}function Se(e){var t=e.toNumber();return n.TypeValidations.isWithinIntegerRange(t)?t:n.Constants.DEFAULT_INTEGER}function Ae(e){return e}function xe(e){return n.TypeValidations.isValidLongInteger(e)?e.toString():n.Constants.DEFAULT_TEXT}function _e(e){return e}function Ne(e){return e}function Ce(e){return e}function Oe(e){return n.LongInteger.fromNumber(e)}function Re(e){return e}function Le(e){return 0!==e}function Me(e){return n.TypeValidations.isValidInteger(e)?e.toString():n.Constants.DEFAULT_TEXT}function Fe(e){return new n.Decimal(e)}function Pe(){return 0}function Ve(){return""}function Ue(){return n.Constants.DEFAULT_DATE}function ke(){return null}function je(){return n.Constants.DEFAULT_BINARYDATA}function Be(e,t){var r=t.getRegExpForDate().test(e);if(r){var i=a(t),o=new n.DateTime(i.year,i.month,i.day);r=o.year===i.year&&o.month===i.month&&o.day===i.day}return r}function qe(e,t){if(!Be(e,t))return n.DateTime.defaultValue;t.getRegExpForDate().test(e);var r=a(t);return new n.DateTime(r.year,r.month,r.day)}function He(e,t){var n=t.getRegExpForDateTime().test(e);if(n){var r=u(t);n=se(r.year,r.month,r.day,r.hours,r.minutes,r.seconds)}return n}function We(e,t){if(!He(e,t))return n.DateTime.defaultValue;var r=u(t);return new n.DateTime(r.year,r.month,r.day,r.hours,r.minutes,r.seconds)}function Ge(e){return-1!==e.toUpperCase().indexOf("T")}function Je(e){return-1!==e.indexOf(" ")}function ze(e){var t=e.toUpperCase().search("T| ");return-1!==t&&(e=e.substring(0,t)),e}function Ke(e){var t=n.Constants.FORMAT.dateTimeFormats;e=ze(e);for(var r=0;r<t.length;++r)if(Be(e,t[r]))return!0;return!1}function Qe(e){var t=n.Constants.FORMAT.dateTimeFormats;e=ze(e);for(var r=0;r<t.length;++r){var i=qe(e,t[r]);if(!i.eq(n.DateTime.defaultValue))return i}return n.DateTime.defaultValue}function Ye(e){return!Ge(e)||!isNaN(Date.parse(e))}function Xe(e){var t=n.Constants.FORMAT.dateTimeFormats;if(Ge(e))return Ye(e);Je(e)||(e+=" 00:00:00");for(var r=0;r<t.length;++r)if(He(e,t[r]))return!0;return!1}function Ze(e){var t=n.Constants.FORMAT.dateTimeFormats;if(Ge(e))return n.DateTime.fromISODateTime(e);Je(e)||(e+=" 00:00:00");for(var r=0;r<t.length;++r){var i=We(e,t[r]);if(!i.eq(n.DateTime.defaultValue))return i}return n.DateTime.defaultValue}function $e(e){var t=e.indexOf(" ");return-1!==t&&(e=e.substring(t+1,e.length)),e}function et(e,t){if(void 0===t&&(t=n.Constants.FORMAT.defaultDateTimeFormat),Ge(e))return Ye(e);Je(e)&&(e=$e(e));var r=t.getRegExpForTime().test(e);if(r){var i=s(t);r=ae(i.hours,i.minutes,i.seconds)}return r}function tt(e){if(Ge(e)){var t=n.DateTime.fromISODateTime(e);return new n.DateTime(1900,1,1,t.hours,t.minutes,t.seconds,t.milliseconds)}return Je(e)&&(e=$e(e)),nt(e,n.Constants.FORMAT.defaultDateTimeFormat)}function nt(e,t){if(!et(e,t))return n.DateTime.defaultValue;t.getRegExpForTime().test(e);var r=s(t);return new n.DateTime(1900,1,1,r.hours,r.minutes,r.seconds)}function rt(e){return e.toString(n.Constants.FORMAT.defaultDateTimeFormat.timeFormat)}function it(e){if(n.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)){var t=parseInt(e,10);if(!isNaN(t)&&t>=n.Constants.MIN_INTEGER_VALUE&&t<=n.Constants.MAX_INTEGER_VALUE)return t}return null}function ot(e){if(n.Constants.FORMAT.numberFormat.getRegExpForDecimal().test(e)){var t=new n.Decimal(e);if(!t.isNaN()&&t.gte(n.Constants.MIN_DECIMAL_VALUE)&&t.lte(n.Constants.MAX_DECIMAL_VALUE))return t}return null}function at(e){if(!n.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e))return null;var t="-"===e.charAt(0);if(t&&e.length<n.Constants.MIN_LONGINTEGER_VALUE.toString().length||!t&&e.length<n.Constants.MAX_LONGINTEGER_VALUE.toString().length||Ee(new n.Decimal(e)))try{return n.LongInteger.fromString(e)}catch(e){}return null}function st(e){return null!==ot(e)}function ut(e){return null===ot(e)?n.Constants.DEFAULT_DECIMAL:new n.Decimal(e)}function ct(e){return null!==it(e)}function lt(e){var t=it(e);return null===t?n.Constants.DEFAULT_INTEGER:t}function ft(e){return null!==at(e)}function dt(e){var t=at(e);return null===t?n.Constants.DEFAULT_LONGINTEGER:t}function pt(e){return"true"===e.toLowerCase()}function ht(e){return e}function gt(e){if("number"==typeof e||n.TypeValidations.isLongInteger(e)||n.TypeValidations.isDecimal(e))return new n.Decimal(e.toString()).round().toNumber();throw new TypeError("Cannot convert type '"+typeof e+"' to 'Integer'")}function mt(e){if("number"==typeof e||n.TypeValidations.isLongInteger(e)||n.TypeValidations.isDecimal(e))return n.LongInteger.fromString(new n.Decimal(e.toString()).round().toString());throw new TypeError("Cannot convert type '"+typeof e+"' to 'LongInteger'")}function yt(e){if("boolean"==typeof e)return e;throw new TypeError("Cannot convert type '"+typeof e+"' to 'Boolean'")}function vt(e){if("number"==typeof e||n.TypeValidations.isLongInteger(e)||n.TypeValidations.isDecimal(e))return new n.Decimal(e.toString());throw new TypeError("Cannot convert type '"+typeof e+"' to 'Decimal'")}function Tt(e){if("string"==typeof e)return e;throw new TypeError("Cannot convert type '"+typeof e+"' to 'Text'")}function bt(e){return Dt(e,!0,!1)}function Et(e){return Dt(e,!1,!0)}function wt(e){return Dt(e,!0,!0)}function Dt(e,t,r){if(e instanceof n.DateTime||"[object Date]"===Object.prototype.toString.call(e)){var i=new n.DateTime(e.getTime()),o=t?i.year:1900,a=t?i.month:1,s=t?i.day:1,u=r?i.hours:0,c=r?i.minutes:0,l=r?i.seconds:0;return new n.DateTime(o,a,s,u,c,l)}throw new TypeError("Cannot convert type '"+typeof e+"' to 'DateTime'")}function It(e){return e}function St(e,t){return e.toString(t)}function At(e,t,r,i,o){var a=xt(e,r,i,o);return a===n.Constants.DEFAULT_TEXT?n.Constants.DEFAULT_TEXT:t+a}function xt(e,t,r,i){return t<0?n.Constants.DEFAULT_TEXT:(r.length>1&&(r=r.substr(0,1)),i.length>1&&(i=i.substr(0,1)),e.toFormat(t,n.Decimal.rounding,r,i))}function _t(e,t,r){try{return t<0?"":(r.length>1&&(r=r.substr(0,1)),e.times(100).toFormat(t,n.Decimal.rounding,r,"")+"%")}catch(e){return""}}function Nt(e,t,n,r,i,o,a){try{return/^\d+$/.test(e)?e.length!==t+n+r?e:i+e.substr(0,t)+o+e.substr(t,n)+a+e.substr(t+n,r):e}catch(e){return""}}function Ct(e,t,n,r,i){try{var o=A(e);if(o<t){i=_(i,0,1);for(var a=t-o;a-- >0;)r?e=i+e:e+=i;return e}return o>n?r?_(e,o-n,n):_(e,0,n):e}catch(e){return""}}function Ot(e){return""===e||!/\.@/.test(e)&&(qt.test(e)||Ht.test(e)||Wt.test(e))}function Rt(){return r.getCurrentLocale()}function Lt(){return navigator.userAgent}function Mt(){return r.getHomeModuleName()}function Ft(){return window.location.href}function Pt(){return i.buildApplicationRelativeUrl()}function Vt(){return o.getUserId()}Object.defineProperty(t,"__esModule",{value:!0}),t.abs=c,t.mod=l,t.power=f,t.round=d,t.sqrt=p,t.trunc=h,t.max=g,t.min=m,t.sign=y,t.chr=v,t.concat=T,t.encodeHtml=w,t.encodeJavascript=D,t.encodeUrl=I;var Ut="["+String.fromCharCode(55296)+"-"+String.fromCharCode(56319)+"]",kt=new RegExp(Ut,"g");t.index=S,t.length=A,t.replace=x,t.substr=_,t.toLower=N,t.toUpper=C,t.trim=O,t.trimStart=R,t.trimEnd=L,t.addDays=M,t.addHours=F,t.addMinutes=P,t.addSeconds=V,t.addYears=U,t.addMonths=k,t.buildDateTime=j,t.currDate=B,t.currDateTime=q,t.currTime=H,t.dayOfWeek=W,t.diffDays=z,t.diffHours=K,t.diffMinutes=Q,t.diffSeconds=Y,t.year=X,t.month=Z,t.day=$,t.hour=ee,t.minute=te,t.second=ne,t.newDate=re,t.newDateTime=ie,t.newTime=oe,t.booleanToInteger=ue,t.booleanToLongInteger=ce,t.booleanToDecimal=le,t.booleanToText=fe,t.dateTimeToDate=de,t.dateTimeToTime=pe,t.dateTimeToText=he,t.dateToText=ge,t.dateToDateTime=me,t.decimalToBoolean=ye,t.decimalToText=ve,t.decimalToIntegerValidate=Te,t.decimalToInteger=be,t.decimalToLongIntegerValidate=Ee,t.decimalToLongInteger=we,t.longIntegerToDecimal=De,t.longIntegerToIntegerValidate=Ie,t.longIntegerToInteger=Se,t.longIntegerToIdentifier=Ae,t.longIntegerToText=xe,t.identifierToInteger=_e,t.identifierToLongInteger=Ne,t.identifierToText=Ce,t.integerToLongInteger=Oe,t.integerToIdentifier=Re,t.integerToBoolean=Le,t.integerToText=Me,t.integerToDecimal=Fe,t.nullIdentifier=Pe,t.nullTextIdentifier=Ve,t.nullDate=Ue,t.nullObject=ke,t.nullBinary=je,t.textToDateValidate=Ke,t.textToDate=Qe,t.textToDateTimeValidate=Xe,t.textToDateTime=Ze,t.textToTimeValidate=et,t.textToTime=tt,t.timeToText=rt,t.textToDecimalValidate=st,t.textToDecimal=ut,t.textToIntegerValidate=ct,t.textToInteger=lt,t.textToLongIntegerValidate=ft,t.textToLongInteger=dt,t.textToBoolean=pt,t.textToIdentifier=ht,t.objectToInteger=gt,t.objectToLongInteger=mt,t.objectToBoolean=yt,t.objectToDecimal=vt,t.objectToText=Tt,t.objectToDate=bt,t.objectToTime=Et,t.objectToDateTime=wt,t.toObject=It,t.formatDateTime=St,t.formatCurrency=At,t.formatDecimal=xt,t.formatPercent=_t,t.formatPhoneNumber=Nt,t.formatText=Ct;var jt="[a-zA-Z0-9.!#$%&'*+\\-/=?^_`{|}~]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*",Bt="([0-9a-zA-Z\\\\= ]*|=\\?([^?]*)\\?([qQbB])\\?([^?]*)\\?=)",qt=new RegExp("^"+jt+"$"),Ht=new RegExp("^"+Bt+"[ ]*<"+jt+">$"),Wt=new RegExp('^\\"'+Bt+'\\"[ ]*<'+jt+">$");t.emailAddressValidate=Ot,t.getCurrentLocale=Rt,t.getUserAgent=Lt,t.getEntryEspaceName=Mt,t.getBookmarkableURL=Ft,t.getOwnerURLPath=Pt,t.getUserId=Vt}),define("OutSystems/ClientRuntime/Settings",["require","exports"],function(e,t){"use strict";function n(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];i[r]=e[r]}}function r(){return i}Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e.DbNullDatesTZAware=!1}(i=t.EnvParam||(t.EnvParam={})),t.setPlatformSettings=n,t.getEnvParams=r}),define("OutSystems/ClientRuntime/DataConversion",["require","exports","./DataTypes","./BuiltinFunctions","./Exceptions","./Settings"],function(e,t,n,r,i,o){"use strict";function a(e){return!!e.isGenericRecordType}function s(e){return!!e.isGenericRecordListType}function u(e){return!!e.isBasicTypeListType}Object.defineProperty(t,"__esModule",{value:!0});var c;!function(e){function t(e,r){if(void 0===r&&(r=n.DataTypes.Record),void 0!==e&&null!==e){if(e instanceof n.GenericRecord){var i=e,a=i.constructor,s=l.get(a);if(!s){var u=i.getAttributes(),c="return function to(record) {\n";c+="    return {\n",u.forEach(function(e,t){e.ignoreForServer||(e.dataType===n.DataTypes.Record||e.dataType===n.DataTypes.RecordList?c+="        "+e.name+": toServerData(record."+e.attrName+"),\n":e.dataType!==n.DataTypes.Object&&(c+="        "+e.name+": basicTypeToJS(record."+e.attrName+", attributes["+t+"].dataType),\n"))}),c+="    };\n",c+="};",s=new Function("toServerData","basicTypeToJS","attributes",c)(t,o,u),l.set(a,s)}return s(e)}if(e instanceof n.List){for(var f=e,d=f.constructor.getItemType(),p={List:[]},h=0;h<f.length;h++)p.List.push(t(f.getItem(h),d));return f.isEmpty&&(p.EmptyListItem=t(f.emptyListItem,d)),p}return r!==n.DataTypes.Object?o(e,r):void 0}}function i(e,t){if(a(t)){var r=t,o=f.get(r);if(!o){var l=r.getAttributes(),d="return function from(obj) {\n";d+="    if (!obj) { obj = {}; }\n",d+="    return new classDef(new classDef.RecordClass({\n",l.forEach(function(e,t){e.dataType===n.DataTypes.Record||e.dataType===n.DataTypes.RecordList?d+="        "+e.attrName+": GenericRecord.getData(fromServerData(obj."+e.name+", attributes["+t+"].complexType)),\n":e.dataType===n.DataTypes.BinaryData?d+="        "+e.attrName+": jsToBasicType({ content: obj."+e.name+", url: obj._"+e.name+"URL }, attributes["+t+"].dataType),\n":d+="        "+e.attrName+": jsToBasicType(obj."+e.name+", attributes["+t+"].dataType),\n"}),d+="    }));\n",d+="};",o=new Function("fromServerData","jsToBasicType","GenericRecord","attributes","classDef",d)(i,c,n.GenericRecord,l,r),f.set(r,o)}return o(e)}if(s(t)||u(t)){if(void 0===t.getItemType()||null===t.getItemType())throw Error("A List can only be deserialized if its ItemType is defined.");var p=t,h=new p;return 0===e.List.length?h.emptyListItem=i(e.EmptyListItem,t.getItemType()):h.pushAll(e.List.map(function(e){return i(e,t.getItemType())})),h}return c(e,t)}function o(e,t){switch(t){case n.DataTypes.Integer:return e;case n.DataTypes.LongInteger:return r.longIntegerToText(e);case n.DataTypes.Decimal:case n.DataTypes.Currency:return r.decimalToText(e);case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:return e;case n.DataTypes.Date:return e.toISODate();case n.DataTypes.DateTime:return e.toString();case n.DataTypes.Time:return e.toISOTime();case n.DataTypes.Boolean:return e;case n.DataTypes.Record:case n.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case n.DataTypes.BinaryData:return"string"==typeof e?e:e.content;case n.DataTypes.Object:default:return e}}function c(e,t){switch(t){case n.DataTypes.Integer:return n.TypeValidations.ensureIntegerInsideBounds(e),0|e;case n.DataTypes.LongInteger:return"string"==typeof e?n.LongInteger.fromString(e):n.LongInteger.fromNumber(e);case n.DataTypes.Decimal:case n.DataTypes.Currency:return new n.Decimal(e||"0");case n.DataTypes.Boolean:return"string"==typeof e?r.textToBoolean(e):e;case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:return void 0===e?"":e+"";case n.DataTypes.Date:return e instanceof Date?new n.DateTime(e):n.DateTime.fromISODate(e);case n.DataTypes.DateTime:return e instanceof Date?new n.DateTime(e):n.DateTime.fromISODateTime(e);case n.DataTypes.Time:return e instanceof Date?new n.DateTime(e):n.DateTime.fromISOTime(e);case n.DataTypes.Record:case n.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case n.DataTypes.BinaryData:return n.TypeValidations.hasBinaryDataInterface(e)?new n.BinaryData(e.content,e.url):new n.BinaryData(e);case n.DataTypes.Object:default:return e}}var l=new Map,f=new Map;e.to=t,e.from=i}(c=t.ServerDataConverter||(t.ServerDataConverter={}));var l;!function(e){function t(e){return!!(n.TypeValidations.isValidJsNumber(e)&&e>=n.Constants.MIN_INTEGER_VALUE&&e<=n.Constants.MAX_INTEGER_VALUE)||(n.TypeValidations.isLongInteger(e)?r.longIntegerToIntegerValidate(e):n.TypeValidations.isDecimal(e)?r.decimalToIntegerValidate(e):n.TypeValidations.isText(e)?r.textToIntegerValidate(e):!!n.TypeValidations.isBoolean(e))}function i(e){return!!n.TypeValidations.isValidJsNumber(e)||(!!n.TypeValidations.isValidLongInteger(e)||(n.TypeValidations.isValidDecimal(e)?r.decimalToLongIntegerValidate(e):n.TypeValidations.isText(e)?r.textToLongIntegerValidate(e):!!n.TypeValidations.isBoolean(e)))}function o(e){return!!n.TypeValidations.isValidJsNumber(e)||(!!(n.TypeValidations.isValidDecimal(e)&&n.Constants.MIN_DECIMAL_VALUE.lte(e)&&n.Constants.MAX_DECIMAL_VALUE.gte(e))||(!!n.TypeValidations.isValidLongInteger(e)||(n.TypeValidations.isText(e)?r.textToDecimalValidate(e):!!n.TypeValidations.isBoolean(e))))}function a(e){return o(e)}function s(e){return n.TypeValidations.isJsNumber(e)?n.TypeValidations.isValidJsNumber(e):n.TypeValidations.isLongInteger(e)?n.TypeValidations.isValidLongInteger(e):n.TypeValidations.isDecimal(e)?n.TypeValidations.isValidDecimal(e):!!n.TypeValidations.isText(e)||(!!n.TypeValidations.isBoolean(e)||(n.TypeValidations.isDateTime(e)?n.TypeValidations.isValidDateTime(e):!!n.TypeValidations.isJsDate(e)&&n.TypeValidations.isValidJsDate(e)))}function u(e){return s(e)}function c(e){return s(e)}function l(e){return n.TypeValidations.isJsNumber(e)?n.TypeValidations.isValidJsNumber(e):n.TypeValidations.isLongInteger(e)?n.TypeValidations.isValidLongInteger(e):n.TypeValidations.isDecimal(e)?n.TypeValidations.isValidDecimal(e):n.TypeValidations.isText(e)?/^(true)|(false)$/gi.test(e):!!n.TypeValidations.isBoolean(e)}function f(e){if(n.TypeValidations.isValidDateTime(e)&&e.gte(n.Constants.MIN_DATE_VALUE)&&e.lte(n.Constants.MAX_DATE_VALUE))return!0;if(n.TypeValidations.isValidJsDate(e)&&new n.DateTime(e).gte(n.Constants.MIN_DATE_VALUE)&&new n.DateTime(e).lte(n.Constants.MAX_DATE_VALUE))return!0;if(n.TypeValidations.isText(e)){if(n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)){var t=new n.DateTime(new Date(e));return t.gte(n.Constants.MIN_DATE_VALUE)&&t.lte(n.Constants.MAX_DATE_VALUE)}if(r.textToDateValidate(e)){var t=r.textToDate(e);return t.gte(n.Constants.MIN_DATE_VALUE)&&t.lte(n.Constants.MAX_DATE_VALUE)}return!1}return!1}function d(e){return!!n.TypeValidations.isValidDateTime(e)||(!!n.TypeValidations.isValidJsDate(e)||!!n.TypeValidations.isText(e)&&(!(!n.Constants.RFC3339_TIMEPART.test(e)&&!n.Constants.ISO_DATE_FORMAT_REGEXP.test(e))||r.textToTimeValidate(e)))}function p(e){if(n.TypeValidations.isValidDateTime(e)&&e.gte(n.Constants.MIN_DATETIME_VALUE)&&e.lte(n.Constants.MAX_DATETIME_VALUE))return!0;if(n.TypeValidations.isValidJsDate(e)&&new n.DateTime(e).gte(n.Constants.MIN_DATETIME_VALUE)&&new n.DateTime(e).lte(n.Constants.MAX_DATETIME_VALUE))return!0;if(n.TypeValidations.isText(e)){if(n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)){var t=new n.DateTime(new Date(e));return t.gte(n.Constants.MIN_DATETIME_VALUE)&&t.lte(n.Constants.MAX_DATETIME_VALUE)}if(r.textToDateTimeValidate(e)){var t=r.textToDateTime(e);return t.gte(n.Constants.MIN_DATETIME_VALUE)&&t.lte(n.Constants.MAX_DATETIME_VALUE)}return!1}return!1}function h(e){return n.TypeValidations.isBinaryData(e)}function g(e,r){switch(r){case n.DataTypes.Integer:return t(e);case n.DataTypes.LongInteger:return i(e);case n.DataTypes.Decimal:return o(e);case n.DataTypes.Currency:return a(e);case n.DataTypes.Text:return s(e);case n.DataTypes.PhoneNumber:return u(e);case n.DataTypes.Email:return c(e);case n.DataTypes.Boolean:return l(e);case n.DataTypes.Date:return f(e);case n.DataTypes.Time:return d(e);case n.DataTypes.DateTime:return p(e);case n.DataTypes.BinaryData:return h(e);default:return!1}}function m(e){return n.TypeValidations.isValidJsNumber(e)&&e===n.Constants.DEFAULT_INTEGER||n.TypeValidations.isValidLongInteger(e)&&e.equals(n.Constants.DEFAULT_LONGINTEGER)||n.TypeValidations.isValidDecimal(e)&&e.equals(n.Constants.DEFAULT_DECIMAL)||n.TypeValidations.isText(e)&&e===n.Constants.DEFAULT_TEXT||n.TypeValidations.isBoolean(e)&&e===n.Constants.DEFAULT_BOOLEAN||n.TypeValidations.isValidDateTime(e)&&e.equals(n.Constants.DEFAULT_DATETIME)}function y(e){if(t(e)){if(n.TypeValidations.isJsNumber(e))return r.objectToInteger(e);if(n.TypeValidations.isLongInteger(e))return r.objectToInteger(e);if(n.TypeValidations.isDecimal(e))return r.objectToInteger(e);if(n.TypeValidations.isText(e)&&""!==e)return r.textToInteger(e);if(n.TypeValidations.isBoolean(e))return r.booleanToInteger(e)}return n.Constants.DEFAULT_INTEGER}function v(e){if(i(e)){if(n.TypeValidations.isJsNumber(e))return r.objectToLongInteger(e);if(n.TypeValidations.isLongInteger(e))return r.objectToLongInteger(e);if(n.TypeValidations.isDecimal(e))return r.objectToLongInteger(e);if(n.TypeValidations.isText(e)&&""!==e)return r.textToLongInteger(e);if(n.TypeValidations.isBoolean(e))return r.booleanToLongInteger(e)}return n.Constants.DEFAULT_LONGINTEGER}function T(e){if(o(e)){if(n.TypeValidations.isJsNumber(e))return r.objectToDecimal(e);if(n.TypeValidations.isLongInteger(e))return r.objectToDecimal(e);if(n.TypeValidations.isDecimal(e))return r.objectToDecimal(e);if(n.TypeValidations.isText(e)&&""!==e)return r.textToDecimal(e);if(n.TypeValidations.isBoolean(e))return r.booleanToDecimal(e)}return n.Constants.DEFAULT_DECIMAL}function b(e){return T(e)}function E(e){if(s(e)){if(n.TypeValidations.isJsNumber(e))return n.TypeValidations.isValidInteger(e)?r.integerToText(e):r.decimalToText(new n.Decimal(e));if(n.TypeValidations.isLongInteger(e))return r.longIntegerToText(e);if(n.TypeValidations.isDecimal(e))return r.decimalToText(e);if(n.TypeValidations.isText(e))return e;if(n.TypeValidations.isBoolean(e))return r.booleanToText(e);if(n.TypeValidations.isValidDate(e))return r.dateToText(e);if(n.TypeValidations.isValidTime(e))return r.timeToText(e);if(n.TypeValidations.isDateTime(e))return r.dateTimeToText(e);if(n.TypeValidations.isJsDate(e)){var t=new n.DateTime(e);return n.TypeValidations.isValidDate(t)?r.dateToText(t):n.TypeValidations.isValidTime(t)?r.timeToText(t):r.dateTimeToText(t)}}return n.Constants.DEFAULT_TEXT}function w(e){return E(e)}function D(e){return c(e)&&n.TypeValidations.isText(e)?e:n.Constants.DEFAULT_EMAIL}function I(e){if(l(e)){if(n.TypeValidations.isJsNumber(e))return 0!==e;if(n.TypeValidations.isLongInteger(e))return!e.eq(0);if(n.TypeValidations.isDecimal(e))return!e.eq(0);if(n.TypeValidations.isText(e)&&""!==e)return!/^(false)$/gi.test(e);if(n.TypeValidations.isBoolean(e))return e}return n.Constants.DEFAULT_BOOLEAN}function S(e){if(f(e)){if(n.TypeValidations.isDateTime(e)){var t=e;return new n.DateTime(t.year,t.month,t.day)}if(n.TypeValidations.isJsDate(e)){var i=e;return new n.DateTime(i.getFullYear(),i.getMonth()+1,i.getDate())}if(n.TypeValidations.isText(e)&&""!==e)return n.Constants.RFC3339_DATEPART.test(e)?n.DateTime.fromISODate(e):n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)?r.dateTimeToDate(n.DateTime.fromISODateTime(e)):r.textToDate(e)}return n.Constants.DEFAULT_DATE}function A(e){if(d(e)){if(n.TypeValidations.isDateTime(e)){var t=e;return new n.DateTime(null,null,null,t.hours,t.minutes,t.seconds,t.milliseconds)}if(n.TypeValidations.isJsDate(e)){var i=e;return new n.DateTime(null,null,null,i.getHours(),i.getMinutes(),i.getSeconds())}if(n.TypeValidations.isText(e)&&""!==e)return n.Constants.RFC3339_TIMEPART.test(e)?n.DateTime.fromISOTime(e):n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)?r.dateTimeToTime(n.DateTime.fromISODateTime(e)):r.textToTime(e)}return n.Constants.DEFAULT_TIME}function x(e){if(p(e)){if(n.TypeValidations.isDateTime(e)){var t=e;return new n.DateTime(t.year,t.month,t.day,t.hours,t.minutes,t.seconds,t.milliseconds)}if(n.TypeValidations.isJsDate(e)){var i=e;return new n.DateTime(i)}if(n.TypeValidations.isText(e)&&""!==e)return n.Constants.ISO_DATE_FORMAT_REGEXP.test(e)?n.DateTime.fromISODateTime(e):r.textToDateTime(e)}return n.Constants.DEFAULT_DATETIME}function _(e){return e}function N(e,t){switch(t){case n.DataTypes.Integer:return y(e);case n.DataTypes.LongInteger:return v(e);case n.DataTypes.Decimal:return T(e);case n.DataTypes.Currency:return b(e);case n.DataTypes.Text:return E(e);case n.DataTypes.PhoneNumber:return w(e);case n.DataTypes.Email:return D(e);case n.DataTypes.Boolean:return I(e);case n.DataTypes.Date:return S(e);case n.DataTypes.Time:return A(e);case n.DataTypes.DateTime:return x(e);case n.DataTypes.BinaryData:return _(e);default:return null}}function C(e,t,n){return n(e,t)}function O(e,t,n){for(var r=0;r<e.length;)t.append(n(e.getItem(r),t.newItem())),r++;return t}e.isConvertibleTo=g,e.isDefault=m,e.convertTo=N,e.typeConvertRecord=C,e.typeConvertRecordList=O}(l=t.JSConversions||(t.JSConversions={}));var f;!function(e){function t(e){return e-e%1}function o(e,t){return s(e,t)}function a(e,t){return u(e,t)}function s(e,t){switch(t){case n.DataTypes.Integer:return e;case n.DataTypes.LongInteger:var r=e;return n.TypeValidations.ensureNumberInsideBounds(r),r.toNumber();case n.DataTypes.Decimal:case n.DataTypes.Currency:var i=e;return n.TypeValidations.ensureNumberPrecision(i),n.TypeValidations.ensureNumberInsideBounds(i),i.toNumber();case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:return e;case n.DataTypes.Date:case n.DataTypes.DateTime:case n.DataTypes.Time:return e.toNative();case n.DataTypes.Boolean:return e;case n.DataTypes.Record:case n.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case n.DataTypes.BinaryData:var o=e;return"string"==typeof e?e:o.content;case n.DataTypes.Object:default:return e}}function u(e,o){switch(o){case n.DataTypes.Integer:if(n.TypeValidations.isValidJsNumber(e))return n.TypeValidations.ensureIntegerInsideBounds(e),t(e);break;case n.DataTypes.LongInteger:if(n.TypeValidations.isValidJsNumber(e))return n.TypeValidations.ensureLongIntegerInsideBounds(e),n.LongInteger.fromNumber(t(e));break;case n.DataTypes.Decimal:case n.DataTypes.Currency:if(n.TypeValidations.isValidJsNumber(e))return n.TypeValidations.ensureDecimalInsideBounds(e),new n.Decimal(e);break;case n.DataTypes.Boolean:if(n.TypeValidations.isBoolean(e))return e;break;case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:if(n.TypeValidations.isText(e))return e;if(n.TypeValidations.isValidJsNumber(e))return n.TypeValidations.ensureDecimalInsideBounds(e),r.decimalToText(new n.Decimal(e));if(n.TypeValidations.isBoolean(e))return r.booleanToText(e);break;case n.DataTypes.Date:if(n.TypeValidations.isValidJsDate(e)){var a=e;return new n.DateTime(a.getFullYear(),a.getMonth()+1,a.getDate())}break;case n.DataTypes.DateTime:if(n.TypeValidations.isValidJsDate(e))return new n.DateTime(e);break;case n.DataTypes.Time:if(n.TypeValidations.isValidJsDate(e)){var a=e;return new n.DateTime(null,null,null,a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())}break;case n.DataTypes.BinaryData:return n.TypeValidations.hasBinaryDataInterface(e)?new n.BinaryData(e.content,e.url):new n.BinaryData(e);case n.DataTypes.Object:return e}throw new i.Exceptions.InvalidJavascriptType("Cannot assign a JavaScript "+typeof e+" with value "+(void 0===e||null===e?JSON.stringify(e):e.toString())+" to an output parameter of type "+n.DataTypes[o])}e.to=o,e.from=a}(f=t.JSNodeParamConverter||(t.JSNodeParamConverter={}));!function(e){function t(e,r,i,o,a){if(void 0===o&&(o=n.DataTypes.Record),void 0!==e&&null!==e){if(e instanceof n.GenericRecord){var s=e,u=s.constructor,c=v.get(u);if(!c){var l=s.getAttributes(),f="return function to(record, serializeDefaultValues, useUnixDateFormat) {\n";f+="     if (serializeDefaultValues === void 0) { serializeDefaultValues = true; }\n",f+="     return {\n",l.forEach(function(e,t){""!==e.nameForJson&&(e.dataType===n.DataTypes.Record||e.dataType===n.DataTypes.RecordList?f+='        "'+e.nameForJson+'": toJSON(record.'+e.attrName+", serializeDefaultValues, useUnixDateFormat),\n":f+='        "'+e.nameForJson+'": basicTypeToJSON(record.'+e.attrName+", attributes["+t+"].dataType, attributes["+t+"].defaultValue, "+(e.mandatory?"true":"serializeDefaultValues")+", useUnixDateFormat),\n")}),f+="    };\n",f+="};",c=new Function("toJSON","basicTypeToJSON","attributes",f)(t,d,l),v.set(u,c)}return c(e,r,i)}if(e instanceof n.List){for(var p=e,h=p.constructor.getItemType(),g=[],m=0;m<p.length;m++)g.push(t(p.getItem(m),r,i,h));return g}return d(e,o,void 0===a?n.defaultForType(o):a,r,i)}}function o(e,t,r,i){if(a(t)){var c=t,l=T.get(c);if(!l){var f=c.getAttributes(),d="return function from(obj, useUnixDateFormat) {\n";d+="     if (!obj) { obj = {}; }\n",d+="     return new classDef(new classDef.RecordClass({\n",f.forEach(function(e,t){""!==e.nameForJson&&(e.dataType===n.DataTypes.Record||e.dataType===n.DataTypes.RecordList?d+="        "+e.attrName+': GenericRecord.getData(fromJSON(obj["'+e.nameForJson+'"], attributes['+t+"].complexType, useUnixDateFormat)),\n":d+="        "+e.attrName+': jsonToBasicType(obj["'+e.nameForJson+'"], attributes['+t+"].dataType, attributes["+t+"].defaultValue, useUnixDateFormat),\n")}),d+="    }));\n",d+="};",l=new Function("fromJSON","jsonToBasicType","GenericRecord","attributes","classDef",d)(o,p,n.GenericRecord,f,t),T.set(c,l)}return l(e,r)}if(s(t)||u(t)){if(void 0===t.getItemType()||null===t.getItemType())throw Error("A List can only be deserialized if its ItemType is defined.");var h=e;if(null!==h&&void 0!==h||(h=[]),h.constructor!==Array)throw new TypeError("Could not convert '"+h+"' to List");var g=t,m=new g;return m.pushAll(h.map(function(e){return o(e,t.getItemType(),r)})),m}return p(e,t,void 0===i?n.defaultForType(t):i,r)}function d(e,t,r,i,o){if(void 0===i&&(i=!0),!1===i&&n.equals(e,r))return null;switch(t){case n.DataTypes.DateTime:return!0===o?""+Math.floor(e.getTime()/1e3):e.toString().replace(/\.\d+/,"");default:return f.to(e,t)}}function p(e,t,r,i){if(void 0===e||null===e)return r;switch(t){case n.DataTypes.Integer:return h(e);case n.DataTypes.LongInteger:return g(e);case n.DataTypes.Currency:case n.DataTypes.Decimal:return m(e);case n.DataTypes.DateTime:return y(e,i);default:return c.from(e,t)}}function h(e){var t;if(n.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)?t=new n.Decimal(e):n.Constants.FORMAT.numberFormat.getRegExpForJSNumber().test(e)&&(t=new n.Decimal(+e)),void 0===t||!t.isInteger()||!r.decimalToIntegerValidate(t))throw new i.Exceptions.Exception("Could not convert '"+e+"' to Integer");return r.decimalToInteger(t)}function g(e){var t;if(n.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)?t=new n.Decimal(e):n.Constants.FORMAT.numberFormat.getRegExpForJSNumber().test(e)&&(t=new n.Decimal(+e)),void 0===t||!t.isInteger()||!r.decimalToLongIntegerValidate(t))throw new i.Exceptions.Exception("Could not convert '"+e+"' to Long Integer");return r.decimalToLongInteger(t)}function m(e){var t;if(n.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)?t=new n.Decimal(e):n.Constants.FORMAT.numberFormat.getRegExpForJSNumber().test(e)&&(t=new n.Decimal(+e)),void 0===t||t.lt(n.Constants.MIN_DECIMAL_VALUE)||t.gt(n.Constants.MAX_DECIMAL_VALUE))throw new i.Exceptions.Exception("Could not convert '"+e+"' to Decimal");return t}function y(e,t){if(!t){if(!l.isConvertibleTo(e,n.DataTypes.DateTime))throw new i.Exceptions.Exception("Could not convert '"+e+"' to DateTime");return c.from(e,n.DataTypes.DateTime)}e instanceof Date&&(e=new n.DateTime(e.getTime()));try{return new n.DateTime(1e3*+e)}catch(t){throw new i.Exceptions.Exception("Could not convert '"+e+"' to DateTime")}}var v=new Map,T=new Map;e.to=t,e.from=o}(t.JSONConverter||(t.JSONConverter={}));!function(e){function t(e,r,i,o){if(a(r)){var u=e,c=r,l=i,d=b.get(c);if(!d){var p=c.getAttributes(),h="return function from(row, indexRef, readerImplementation, attributeOrder) {\n";h+="     var data = null;\n",h+="     if (attributeOrder && attributeOrder.length > 0) {\n",h+="         data = {\n",p.forEach(function(e,t){e.dataType!==n.DataTypes.RecordList&&(h+="             "+e.attrName+": null,\n")}),h+="         };\n",h+="         for (var i = 0; i < attributeOrder.length; i++) {\n",h+="             var attrName = attributeOrder[i];\n",h+="             var attr = attributes.filter(function(attr) { return attr.attrName === attrName; })[0];\n",h+="             if (attr.complexType) {\n",h+="                 data[attrName] = fromLocalStorage(row, attr.complexType, indexRef);\n",h+="             } else {\n",h+="                 data[attrName] = readerImplementation(row, indexRef.value++, attr.name, attr.dataType);\n",h+="             }\n",h+="         }\n",h+="     } else {\n",h+="         data = {\n",p.forEach(function(e,t){e.dataType!==n.DataTypes.RecordList&&(e.dataType===n.DataTypes.Record&&r.isAnonymousRecord()?h+="            "+e.attrName+": fromLocalStorage(row, attributes["+t+"].complexType, indexRef),\n":h+="            "+e.attrName+": readerImplementation(row, indexRef.value++, attributes["+t+"].name, attributes["+t+"].dataType),\n")}),h+="        };\n",h+="     }\n",h+="     return new classDef.RecordClass(data);\n",h+="};",d=new Function("fromLocalStorage","GenericRecord","attributes","classDef",h)(t,n.GenericRecord,p,r),b.set(c,d)}return d(u,l,f(r),o)}if(s(r)){if(void 0===r.getItemType()||null===r.getItemType())throw Error("A List can only be deserialized if its ItemType is defined.")
;for(var g=e,m=r.getItemType(),y=i,v=r,T=new v,E=[],w=0;w<g.length;w++)E.push(new m(y(null,g.item(w))));return T.pushAll(E),T}var D=r;throw new Error("Unable to read data from Local Storage. Unknown type "+(D&&D.name?D.name:D))}function r(e){switch(e){case 3:case 4:case 5:case 0:case 2:case 7:case 6:case 8:case 1:return n.defaultForType(l(e));default:throw new i.Exceptions.DataBaseException("","Unable to determine default value for type "+u(e))}}function u(e){var t=l(e);return n.DataTypes[t]}function c(e){var t=T[e];return void 0===t?9:t}function l(e){switch(e){case 0:return n.DataTypes.Text;case 1:return n.DataTypes.BinaryData;case 2:return n.DataTypes.Boolean;case 7:return n.DataTypes.Date;case 6:return n.DataTypes.DateTime;case 8:return n.DataTypes.Time;case 5:return n.DataTypes.Decimal;case 3:return n.DataTypes.Integer;case 4:return n.DataTypes.LongInteger;default:throw new Error("Missing case for conversion of DB data type '"+e+"' to a model data type.")}}function f(e){return e.isAnonymousRecord()?p:d}function d(t,n,r,i){return e.deserializeFromDB(t["o"+n],c(i))}function p(t,n,r,i){return e.deserializeFromDB(t[r],c(i))}function h(e,t){var n=t.length,r=e.toString();return t.substr(0,Math.max(0,n-r.length))+r}function g(e,t){if(t.isEntityReference&&n.equals(e,r(t.type)))return null;switch(t.type){case 3:return e;case 4:var a=e;return null==a?null:a.toString();case 5:var s=e;return t.decimals?s.toFixed(t.decimals):s.toString();case 0:return e;case 2:return e?1:0;case 6:var u=e.toNative();if(!o.getEnvParams().DbNullDatesTZAware&&e.eq(n.DateTime.defaultValue))return v;var u=e.toNative();return h(u.getUTCFullYear(),"0000")+"-"+h(u.getUTCMonth()+1,"00")+"-"+h(u.getUTCDate(),"00")+" "+h(u.getUTCHours(),"00")+":"+h(u.getUTCMinutes(),"00")+":"+h(u.getUTCSeconds(),"00");case 7:var u=e.toNative();return h(u.getFullYear(),"0000")+"-"+h(u.getMonth()+1,"00")+"-"+h(u.getDate(),"00");case 8:var u=e.toNative();return"1900-01-01 "+h(u.getHours(),"00")+":"+h(u.getMinutes(),"00")+":"+h(u.getSeconds(),"00");case 1:var c=e;return void 0===c.content?null:c.content;default:throw new i.Exceptions.DataBaseException("","Unable to serialize "+e+" to a database value.")}}function m(e,t){if(null===e)return r(t);switch(t){case 3:return e;case 4:return n.LongInteger.fromValue(e);case 5:var a=e;return new n.Decimal(a);case 0:return e;case 2:return 0!==e;case 6:case 7:case 8:var s=/^(\d{4})-(\d{2})-(\d{2})( (\d{2}):(\d{2}):(\d{2}))?$/,u=e,c=s.exec(u),l=new Date;switch(t){case 6:if(e===v&&!o.getEnvParams().DbNullDatesTZAware)return n.DateTime.defaultValue;l.setUTCFullYear(parseInt(c[1],10),parseInt(c[2],10)-1,parseInt(c[3],10)),l.setUTCHours(parseInt(c[5],10)||0,parseInt(c[6],10)||0,parseInt(c[7],10)||0,0);break;case 7:l.setFullYear(parseInt(c[1],10),parseInt(c[2],10)-1,parseInt(c[3],10)),l.setHours(0,0,0,0);break;case 8:l.setFullYear(1900,0,1),l.setHours(parseInt(c[5],10)||0,parseInt(c[6],10)||0,parseInt(c[7],10)||0,0)}return new n.DateTime(l);case 1:return new n.BinaryData(e);default:throw new i.Exceptions.DataBaseException("","Unable to deserialize "+e+" to a runtime value.")}}function y(e){return new n.BinaryData(null,null,e)}var v="1900-01-01 00:00:00",T={};T[n.DataTypes.Integer]=3,T[n.DataTypes.LongInteger]=4,T[n.DataTypes.Decimal]=5,T[n.DataTypes.Currency]=5,T[n.DataTypes.Text]=0,T[n.DataTypes.PhoneNumber]=0,T[n.DataTypes.Email]=0,T[n.DataTypes.Boolean]=2,T[n.DataTypes.Date]=7,T[n.DataTypes.DateTime]=6,T[n.DataTypes.Time]=8,T[n.DataTypes.Record]=9,T[n.DataTypes.RecordList]=9,T[n.DataTypes.BinaryData]=1,T[n.DataTypes.Object]=9;var b=new Map;e.from=t,e.typeDefaultValue=r,e.typeDisplayName=u,e.convertToModelDataType=l,e.serializeToDB=g,e.deserializeFromDB=m,e.deserializeLazyBinaryFromDB=y}(t.LocalStorageConverter||(t.LocalStorageConverter={}))}),define("OutSystems/ClientRuntime/Entities",["require","exports","./Exceptions","./DataTypes","./DataConversion","./Logger","./RegExpHelper","./Database"],function(e,t,n,r,i,o,a,s){"use strict";function u(e){}function c(e){for(var t in e)if(e.hasOwnProperty(t))return e[t];return null}function l(e,t,n){for(var r=e.getAllAttributesFromRecord(t).toArray(),i=0;i<e.attributes.length;i++){var o=e.attributes[i];f(r[i],o,n+" '"+e.name+"."+o.name+"'")}}function f(e,t,r){if(0===t.type){if(null===e)return;var i=e,o=i.length-t.length;if(o>0)throw new n.Exceptions.DataBaseException("","Unable to "+r+" because it exceeds the maximum allowed length by "+o+" characters.")}else if(5===t.type){var i=e,o=i.split(".")[0].length-(t.length-t.decimals);if(o>0)throw new n.Exceptions.DataBaseException("","Unable to "+r+" because it exceeds the maximum allowed length by "+o+" characters.")}}function d(e){switch(e){case 0:return"Text";case 1:return"Binary Data";case 2:return"Boolean";case 3:return"Integer";case 4:return"Long Integer";case 5:return"Decimal";case 6:return"DateTime";case 7:return"Date";case 8:return"Time";default:return"Unknown"}}Object.defineProperty(t,"__esModule",{value:!0}),t.BACKUP_TABLE_PREFIX="BACKUP_";!function(e){function t(){return'CREATE TABLE IF NOT EXISTS "'+e.TABLE_NAME+'" ("'+s.join('","')+'")'}function n(e){a=e}function r(e,t){return e.executeNonQuery(this.createSql()).andThen(function(e){var n=new u(t);return n.initialize(e).andThen(function(){return o.setOfflineStorage(n)})})}var i={Instant:"Instant",LogType:"LogType",Message:"Message",ModuleName:"ModuleName",Stack:"Stack",MessageType:"MessageType"};e.TABLE_NAME="OSSYS_LOG";var a=1e3,s=Object.keys(i).map(function(e){return i[e]});e.createSql=t,e.setMaxRecords=n,e.initialize=r;var u=function(){function t(e){this.db=e}return t.prototype.initialize=function(e){var t=this;return e.feed(null).withoutTraces(function(e){return t.internalCountLogs(e).andThen(function(e,n){t.count=n})})},t.prototype.insertEntity=function(t,n){var r=this,o=new b;return o.add(i.Instant,0,n.instant),o.add(i.LogType,0,n.logType),o.add(i.Message,0,n.message),o.add(i.ModuleName,0,n.moduleName),o.add(i.Stack,0,n.stack),o.add(i.MessageType,0,n.messageType),t.executeNonQuery('INSERT INTO "'+e.TABLE_NAME+'" ("'+s.join('", "')+'") VALUES ('+s.map(function(){return"?"}).join(", ")+")",o.toArray()).andThen(function(){r.updateCount(1)})},t.prototype.internalWriteLog=function(e){var t=this;return this.db.executeTransaction(function(n){var r;if(t.count+e.length>=a){var i=t.count+e.length-a;r=t.discardLogs(n,t.count,i)}else r=n.feed(null);return r.andThenAll(function(n){return e.map(function(e){return function(n){return t.insertEntity(n,e)}})})},!1)},t.prototype.writeLog=function(e){return this.internalWriteLog([e])},t.prototype.writeLogBatch=function(e){if(e.length>a){var t=e.length-a;e.splice(0,t)}return this.internalWriteLog(e)},t.prototype.getLogs=function(t){var n=this;return this.db.executeReadTransaction(function(r){return void 0===t&&(t=n.count),r.executeQuery('SELECT * FROM "'+e.TABLE_NAME+'" ORDER BY rowid ASC LIMIT '+t,n.dbRecordToLogMessage)},!1)},t.prototype.popLogs=function(e){var t=this;return void 0===e&&(e=this.count),this.getLogs(e).then(function(n){return t.removeLogs(e).then(function(){return n})})},t.prototype.internalCountLogs=function(t){return t.executeScalar('SELECT COUNT(*) AS count FROM "'+e.TABLE_NAME+'"').andThen(function(e,t){return t})},t.prototype.updateCount=function(e){this.count+=e,this.count=Math.max(this.count,0)},t.prototype.countLogs=function(){var e=this;return this.db.executeReadTransaction(function(t){return e.internalCountLogs(t)},!1)},t.prototype.discardLogs=function(e,t,n){var r=this,i=this.buildDeleteQuery(n,!1);return e.executeNonQuery(i,[o.LogTypes.Error]).andThen(function(e){return r.internalCountLogs(e)}).andThen(function(e,a){var s=t-a;if(s<n){var u=n-s;i=r.buildDeleteQuery(u,!0),e.executeNonQuery(i,[o.LogTypes.Error])}}).andThen(function(){r.updateCount(-n)})},t.prototype.buildDeleteQuery=function(t,n){return'DELETE FROM "'+e.TABLE_NAME+'" WHERE rowid IN (SELECT rowid FROM "'+e.TABLE_NAME+'" WHERE LogType '+(n?"=":"<>")+" ? ORDER BY rowid ASC LIMIT "+t+")"},t.prototype.removeLogs=function(t){var n=this;return this.db.executeTransaction(function(r){var i='DELETE FROM "'+e.TABLE_NAME+'" WHERE rowid IN (SELECT rowid FROM "'+e.TABLE_NAME+'" ORDER BY rowid ASC LIMIT '+t+")";return r.executeNonQuery(i).andThen(function(){n.updateCount(-t)})},!1)},t.prototype.dbRecordToLogMessage=function(e){return{instant:e.Instant,logType:e.LogType,message:e.Message,moduleName:e.ModuleName,stack:e.Stack,messageType:e.MessageType}},t}();e.LogDatabaseStorage=u}(t.LogTable||(t.LogTable={}));var p;!function(e){e[e.Unchanged=0]="Unchanged",e[e.Deleted=1]="Deleted",e[e.Recreated=2]="Recreated",e[e.New=3]="New"}(p||(p={}));!function(e){function t(t,r){return e.storage=new a(r),n(t)}function n(t){return t.executeNonQuery('CREATE TABLE IF NOT EXISTS "'+e.TABLE_NAME+'" ('+o+")")}var r=[{columnName:"Id",options:"INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL"},{columnName:"Key",options:"UNIQUE NOT NULL"},{columnName:"Value"}];e.TABLE_NAME="OSSYS_PERSISTENTKEYVALUE";var i='"'+r.map(function(e){return e.columnName}).join('", "')+'"',o=r.map(function(e){return"'"+e.columnName+(e.options?"' "+e.options:"'")}).join(", ");e.initialize=t,e.create=n;var a=function(){function t(e){this.db=e}return t.prototype.getValue=function(t){return this.db.executeTransaction(function(n){return n.executeScalar("SELECT VALUE FROM "+e.TABLE_NAME+" WHERE Key = ?",[t])})},t.prototype.setValue=function(t,n){this.db.executeTransaction(function(r){return r.executeNonQuery("INSERT OR REPLACE INTO "+e.TABLE_NAME+" ("+i+") VALUES (COALESCE((SELECT Id FROM "+e.TABLE_NAME+" WHERE Key = ?), null), ?, ?)",[t,t,n])})},t}();e.PersistentKeyValueStorage=a}(t.PersistentKeyValue||(t.PersistentKeyValue={}));var h;!function(e){function a(e,t){for(var n=0,r=t.attributes;n<r.length;n++){var o=r[n],a=o.name.toLowerCase();if(void 0===e[a]){var s=void 0===o.default?i.LocalStorageConverter.typeDefaultValue(o.type):o.default;e[a]=i.LocalStorageConverter.serializeToDB(s,o)}}}function s(e,t){if(void 0===e)return!0;if(e===t)return!1;switch(e){case 2:return 3!==t&&4!==t;case 3:return 4!==t&&0!==t;case 4:return 0!==t;default:return!0}}function u(e,t){return!!s(e.type,t.type)||(!e.isEntityReference!=!t.isEntityReference||void 0!==e.length&&(void 0!==e.decimals?e.length-e.decimals>t.length-t.decimals:e.length>t.length))}function c(e,t,r){if(u(t,r)){var o=i.LocalStorageConverter.deserializeFromDB(e,t.type),a=i.LocalStorageConverter.convertToModelDataType(r.type),s=l(e,o,t.type,a);if(i.JSConversions.isConvertibleTo(o,a)){var c=i.JSConversions.convertTo(o,a),d=i.LocalStorageConverter.serializeToDB(c,r);return f(d,r,s),d}throw new n.Exceptions.DataBaseException("","Unable to "+s+".")}return e}function l(e,t,n,i){var o=e,a=t,s=d(n),u=r.DataTypes[i];if("string"==typeof e&&e&&(o=e.substr(0,50)+" (length:"+e.length+")"),r.TypeValidations.isText(t)){var c=t;a=c.substr(0,50)+" (length:"+c.length+")"}if(t instanceof r.BinaryData){var l=t.content;a=l.substr(0,50)+" (length:"+l.length+")"}return"convert databaseValue:'"+o+"'/deserializedValue:'"+a+"' from type "+s+" to "+u}function p(e,t){var n=e.name.toLowerCase(),r=t.attributes.filter(function(e){return e.name.toLowerCase()===n});return 0===r.length?null:r[0]}function h(t,n,r,i){if(r){var o=p(n,r);if(null!=o){if(i&&6===o.type){var a=i.attrs[n.name.toLowerCase()];if(a)return e.upgradeDbValue(t,a,n)}return e.upgradeDbValue(t,o,n)}}var s=i.attrs[n.name.toLowerCase()];return s?e.upgradeDbValue(t,s,n):t}function g(e,t,r,o){for(var s={},u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];s[l.toLowerCase()]=e[l]}a(s,t);for(var f={},d=0,p=t.attributes;d<p.length;d++){var g=p[d];try{var m=g.name.toLowerCase(),y=s[m];f[m]=h(y,g,r,o)}catch(e){throw new n.Exceptions.DataBaseException("","Unable to upgrade attribute '"+g.name+"' data type to '"+i.LocalStorageConverter.typeDisplayName(g.type)+"':\n"+n.getMessage(e))}}return f}function m(e,t,n){var r;return(r=t?t.idIsAutoNumber:n.idIsAutoNumber)!==e.idIsAutoNumber||T(e,t,n).some(function(e){return!e.entityAttribute||(e.dbAttribute||e.dbMetaAttribute?y(e.entityAttribute,e.dbAttribute,e.dbMetaAttribute,0!==r):e.entityAttribute.isPrimaryKey)})}function y(e,t,n,r){if(void 0===r&&(r=!1),t){return!(void 0===n||void 0===n.type||n.type===e.type)||v(e,t,r,n)||!t.isPrimaryKey!=!e.isPrimaryKey}return v(e,n,r)||!n.isPrimaryKey!=!e.isPrimaryKey}function v(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=null);var i=t;return r&&6===t.type&&(i=r),(e.isPrimaryKey&&i.isPrimaryKey&&n?!!(3!==e.type&&4!==e.type||3!==i.type&&4!==i.type):e.type!==i.type)||5!==i.type&&i.length!==e.length||5!==i.type&&i.decimals!==e.decimals||!i.isEntityReference!=!e.isEntityReference&&!e.isPrimaryKey}function T(e,t,n){for(var r={},i=0,o=e.attributes;i<o.length;i++){var a=o[i],s=a.name.toLowerCase();r[s]={},r[s].entityAttribute=a}for(var u=0,c=Object.keys(n.attrs);u<c.length;u++){var l=c[u],s=l.toLowerCase();r[s]=r[s]||{},r[s].dbMetaAttribute=n.attrs[l]}if(t)for(var f=0,d=t.attributes;f<d.length;f++){var p=d[f],s=p.name.toLowerCase();r[s]=r[s]||{},r[s].dbAttribute=p}return Object.keys(r).map(function(e){return r[e]})}!function(e){function n(){return{v:-1,attrs:{}}}function r(e){return i(e,m).andThen(function(e){return i(e,""+t.BACKUP_TABLE_PREFIX+m)})}function i(e,t){return e.executeNonQuery('CREATE TABLE IF NOT EXISTS "'+t+'" ('+T+", UNIQUE (SS_Key, Module_SS_Key))")}function a(e){return s(e,m).andThen(function(e){return s(e,y)})}function s(e,t){var n=!0,r=v.map(function(e){return'"ent"."'+e.name+'"'});return e.executeQueryRaw("SELECT "+r.join(", ")+' FROM "'+t+'" "ent" LIMIT 0').onError(function(e){n=!1}).andThen(function(){return n})}function u(e){return e.feed(null).andThenAll(function(e){return v.map(function(e){return function(t){return c(t,e.name,e.defaultValue)}})})}function c(e,t,n){return l(e,m,t,n).andThen(function(e){return l(e,y,t,n)})}function l(e,t,n,r){var i=!1;return e.feed(null).andThenAll(function(e){return[function(e){return e.executeNonQuery('SELECT "ent"."'+n+'" FROM '+t+' "ent" LIMIT 0').onError(function(e){i=!0})},function(e){return i?e.executeNonQuery("ALTER TABLE "+t+' ADD "'+n+'"').andThen(function(e){return r?e.executeNonQuery("UPDATE "+t+' SET "'+n+'" = '+r):e.feed(null)}):e.feed(null)}]})}function f(e,t,n){var r=n?y:m,i=n?m:y,o=e.executeNonQuery("DELETE FROM "+i+" WHERE Physical_Table_name = ?",[t]).andThen(function(e){return e.executeNonQuery("INSERT INTO "+i+"("+T+") SELECT "+T+" FROM "+r+" WHERE Physical_Table_name = ?",[t])});return n&&(o=o.andThen(function(e){return e.executeNonQuery("DELETE FROM "+r+" WHERE Physical_Table_name = ?",[t])})),o}function d(e){o.trace("Metamodel","Extracting metadata for table "+e.tableName+" ("+e.name+")");for(var t={v:0,idIsAutoNumber:e.idIsAutoNumber,attrs:{}},n=0,r=e.attributes;n<r.length;n++){var i=r[n];t.attrs[i.name.toLowerCase()]=p(i)}return t}function p(e){var t={type:e.type};return void 0!==e.decimals&&(t.decimals=e.decimals),void 0!==e.length&&(t.length=e.length),e.isPrimaryKey&&(t.isPrimaryKey=e.isPrimaryKey),e.isEntityReference&&(t.isEntityReference=e.isEntityReference),t}function h(e,t,n){var r=d(t);o.trace("Metamodel","Updating metadata for table "+t.tableName+" ("+t.name+")");var i=new b;return i.add("Hash",0,t.hash),i.add("Name",0,t.name),i.add("Physical_Table_name",0,t.tableName),i.add("Extra_Info",0,JSON.stringify(r)),i.add("Key",0,t.key),i.add("ModuleKey",0,n),e.executeNonQuery("UPDATE "+m+" SET Hash = ?, Name = ?, Physical_Table_name = ?, Extra_Info = ? WHERE SS_Key = ? AND Module_SS_Key = ?",i.toArray())}function g(e,t,n){var r=d(t),i=new b;return i.add("Key",0,t.key),i.add("ModuleKey",0,n),i.add("Name",0,t.name),i.add("TableName",0,t.tableName),i.add("Hash",0,t.hash),i.add("Extra_Info",0,JSON.stringify(r)),i.add("Upgrade_Status",0,3),e.executeNonQuery("INSERT INTO "+m+"(SS_Key, Module_SS_Key, Name, Physical_Table_name, Hash, Extra_Info, Upgrade_Status) VALUES (?, ?, ?, ?, ?, ?, ?)",i.toArray())}var m="OSSYS_ENTITY",y=""+t.BACKUP_TABLE_PREFIX+m,v=[{name:"SS_Key"},{name:"Module_SS_Key"},{name:"Name"},{name:"Physical_Table_name"},{name:"Hash"},{name:"Extra_Info",defaultValue:"'{\"attrs\":{}}'"},{name:"Upgrade_Status",defaultValue:(0).toString()}],T='"'+v.map(function(e){return e.name}).join('", "')+'"';e.getDefaultMetaData=n,e.create=r,e.innerCreate=i,e.verifyColumns=a,e.innerVerifyColumns=s,e.addMissingColumns=u,e.addColumnIfNeeded=c,e.copyMetaInfo=f,e.extractEntityMetadata=d,e.updateEntity=h,e.insertEntity=g}(e.Metamodel||(e.Metamodel={})),e.upgradeDbValue=c,e.upgradeDbRecord=g,e.requiresFullUpgrade=m}(h=t.Upgrades||(t.Upgrades={}));var g;!function(e){e[e.Auto=0]="Auto",e[e.Single=1]="Single",e[e.Bulk=2]="Bulk"}(g||(g={}));var m=new r.BasicTypeKeyedTypeFactory("Id","idOut"),y=new r.ComplexTypeKeyedTypeFactory("Record","recordOut"),v=function(){function e(){}return e.prototype.getDatabase=function(){var e=this;return this._db?Promise.resolve(this._db):(this.dbReadyPromise||(this.dbReadyPromise=new Promise(function(t){e.onDbInit=function(){return t(e._db)}})),this.dbReadyPromise)},e.prototype.trace=function(e){o.trace(this,e)},e.prototype.initDb=function(e){o.trace(this,"Setting platform database to '"+(e?e.name:"none")+"'"),this._db=e,this.onDbInit&&(this.onDbInit(),this.onDbInit=null)},e.prototype.clearDb=function(){this._db=null},e.prototype.initModule=function(e,t,n){var r=this;return this.recoverBackupTables(t,e,n).andThen(function(t){return 0===e.length?t.feed(null):r.dropInconsistentTables(t,e,n)}).andThen(function(t){return r.backupDeletedTables(t,e,n)}).andThen(function(e){var t=new b;return t.add("ModuleKey",0,n),e.executeQuery("SELECT SS_Key, Hash, Extra_Info FROM OSSYS_ENTITY WHERE Module_SS_Key = ?",function(e){return{hash:e.Hash,extraInfo:JSON.parse(e.Extra_Info||"{}"),ssKey:e.SS_Key}},t.toArray())}).andThenAll(function(t){return e.map(function(e){var i=t.filter(function(t){return t.ssKey===e.key});return function(t){return r.createOrUpgradeTable(t,e,1===i.length?i[0]:void 0,n)}})})},e.prototype.initMetamodel=function(e){return h.Metamodel.create(e).andThen(function(e){return h.Metamodel.verifyColumns(e)}).andThen(function(e,t){if(!t)return h.Metamodel.addMissingColumns(e)})},e.prototype.createOrUpgradeTable=function(e,t,n,r){var i=this;this.trace("Checking the status of table "+t.tableName+" ("+t.name+")"),n||(n={hash:null,extraInfo:h.Metamodel.getDefaultMetaData()});var o=n.hash,a=n.extraInfo;return o?o!==t.hash?s.SqlDbIntrospector.introspectTableInfo(e,t.tableName).andThen(function(e,n){return h.requiresFullUpgrade(t,n,a)?(i.trace("Table "+t.tableName+" ("+t.name+") exists and will be fully upgraded"),i.recreateTable(e,t,n,r,a)):(i.trace("Table "+t.tableName+" ("+t.name+") exists and will be incrementally upgraded"),i.upgradeTable(e,t,n,r,a))}):(this.trace("Table "+t.tableName+" ("+t.name+") exists and is up to date"),null):(this.trace("Table "+t.tableName+" ("+t.name+") does not exist and will be created"),this.createTable(e,t,r).andThen(function(e){return h.Metamodel.insertEntity(e,t,r)}))},e.prototype.recreateTable=function(e,t,r,i,o){var a=this;return e.executeQuery('SELECT * FROM "'+t.tableName+'"',function(e){return e}).onError(function(e){throw a.trace("Unable to upgrade the definition of entity '"+t.name+"':\n"+n.getMessage(e)),new n.Exceptions.DataBaseException("","Unable to upgrade the definition of entity '"+t.name+"':\n"+n.getMessage(e))}).andThen(function(e,n){return a.backupTable(e,t.tableName,2).andThen(function(e){return a.createTable(e,t,i)}).andThenAll(function(){return n.map(function(e){for(var n=h.upgradeDbRecord(e,t,r,o),i=new b(!0),a=0,s=t.attributes;a<s.length;a++){var u=s[a];i.add(u.name,u.type,n[u.name.toLowerCase()])}return function(e){return e.executeNonQuery(t.insert.sql,i.toArray())}})})}).andThen(function(e){return h.Metamodel.updateEntity(e,t,i)})},e.prototype.upgradeTable=function(e,t,n,r,i,o){var a=this;return void 0===o&&(o=null),e.feed(null).andThenAll(function(){var e=t.attributes.filter(function(e){return n?!n.attributes.some(function(t){return e.name===t.name}):!Object.keys(i.attrs).some(function(t){return t===e.name.toLowerCase()})});return a.trace("Entity '"+t.name+"' - newAttributes - "+JSON.stringify(e)+" - hash - "+o+" - info.hash - "+t.hash),e.map(function(e){return function(n){var r=n.executeNonQuery(e.addColumn.sql);if(void 0!==e.default){var i=new b;i.add("value",e.type,e.default),r=r.andThen(function(n){return n.executeNonQuery('UPDATE "'+t.tableName+'" SET "'+e.name+'" = ?',i.toArray())})}return r}})}).andThen(function(e){return h.Metamodel.updateEntity(e,t,r)})},e.prototype.switchModule=function(e,t){return this.dropBackupTables(e,t)},e.prototype.recoverBackupTables=function(e,t,n){var r=this;return this.doForEachTable(e,function(e){r.trace("Recovering table "+e);var i=t.filter(function(t){return t.tableName===e});return function(t){return r.recoverBackupTable(t,e,1===i.length?i[0]:null,n)}},n,"Upgrade_Status <> 0")},e.prototype.dropInconsistentTables=function(e,t,n){var r=this;return this.doForEachTable(e,function(e){return r.trace("Dropping inconsistent table "+e+" (same key, different physical table name)"),function(t){return r.dropTableIfExists(t,e).andThen(function(t){return t.executeNonQuery("DELETE FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '"+e+"'")})}},n,"Upgrade_Status = 0"+(0===t.length?"":" AND SS_Key IN ("+t.map(function(e){return"'"+e.key+"'"}).join(", ")+") AND Physical_Table_name NOT IN ("+t.map(function(e){return"'"+e.tableName+"'"}).join(", ")+")"))},e.prototype.dropBackupTables=function(e,t){var n=this;return this.doForEachTable(e,function(e){return n.trace("Dropping table "+e),function(t){return n.dropBackupTable(t,e)}},t,"Upgrade_Status <> 0")},e.prototype.backupDeletedTables=function(e,t,n){var r=this;return this.doForEachTable(e,function(e){return r.trace("Backing up old table "+e),function(t){return r.backupTable(t,e,1)}},n,"Upgrade_Status = 0"+(0===t.length?"":" AND Physical_Table_name NOT IN ("+t.map(function(e){return"'"+e.tableName+"'"}).join(", ")+")"))},e.prototype.doForEachTable=function(e,t,n,r){var i="SELECT Physical_Table_name as name FROM OSSYS_ENTITY WHERE Module_SS_Key = '"+n+"'";return r&&(i+=" AND "+r),e.executeQuery(i,function(e){return e.name}).andThenAll(function(e){var n=[];return e.forEach(function(e){n.push(t(e))}),n})},e.prototype.dropTableIfExists=function(e,t){return e.executeNonQuery('DROP TABLE IF EXISTS "'+t+'"')},e.prototype.createTable=function(e,t,n){return this.trace("createTable '"+t.createTable.sql+"'"),e.executeNonQuery(t.createTable.sql)},e.prototype.backupTable=function(e,t,n){var r=this;return this.trace("backupTable '"+t+"'"),h.Metamodel.copyMetaInfo(e,t,!1).andThen(function(e){return r.dropTableIfExists(e,r.getBackupTableName(t))}).andThen(function(e){return r.renameTableAndSetStatus(e,t,r.getBackupTableName(t),t,n)})},e.prototype.recoverBackupTable=function(e,t,n,r){var i=this,o=!0;return this.dropTableIfExists(e,t).andThen(function(e){return e.executeScalar("SELECT 1 FROM "+i.getBackupTableName(t))}).onError(function(e){e&&(o=!1)}).andThen(function(e){if(o)return i.renameTableAndSetStatus(e,i.getBackupTableName(t),t,t,0)}).andThen(function(e){return h.Metamodel.copyMetaInfo(e,t,!0)})},e.prototype.dropBackupTable=function(e,n){return this.dropTableIfExists(e,this.getBackupTableName(n)).andThen(function(e){return e.executeScalar("SELECT Upgrade_Status FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '"+n+"'")}).andThen(function(e,t){return e.executeNonQuery(1===t?"DELETE FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '"+n+"'":"UPDATE OSSYS_ENTITY SET Upgrade_Status = 0 WHERE upper(Physical_Table_name) = '"+n+"'")}).andThen(function(e){return e.executeNonQuery("DELETE FROM "+t.BACKUP_TABLE_PREFIX+"OSSYS_ENTITY WHERE Physical_Table_name = ?",[n])})},e.prototype.renameTableAndSetStatus=function(e,t,n,r,i){var o=this;return this.trace("renameTableAndSetStatus '"+r+" to "+n+"'"),this.renameTable(e,t,n).andThen(function(e){return o.setTableUpgradeStatus(e,r,i)})},e.prototype.renameTable=function(e,t,n){return e.executeNonQuery('ALTER TABLE "'+t+'" RENAME TO "'+n+'"')},e.prototype.setTableUpgradeStatus=function(e,t,n){return e.executeNonQuery("UPDATE OSSYS_ENTITY SET Upgrade_Status = "+n+" WHERE upper(Physical_Table_name) = '"+t+"'")},e.prototype.getBackupTableName=function(e){return t.BACKUP_TABLE_PREFIX+e},e.prototype.executeNonQuery=function(e,t){return this.getDatabase().then(function(n){return n.executeTransaction(function(n){return n.executeNonQuery(e,t&&t.toArray())})})},e.prototype.executeQuery=function(e,t,n,r){return this.getDatabase().then(function(o){return o.executeReadTransaction(function(o){return o.executeQueryRaw(e,r&&r.toArray()).andThen(function(e,r){return i.LocalStorageConverter.from(r.rows,t,n)})})})},e.prototype.rawExecuteQuery=function(e,t,n){return this.getDatabase().then(function(r){return r.executeReadTransaction(function(r){return r.executeQueryRaw(e,n&&n.toArray()).andThen(function(e,n){for(var r=new Array(n.rows.length),i=0;i<n.rows.length;i++){var o=n.rows.item(i);r[i]=t(o)}return r})})})},e.prototype.executeCount=function(e,t){return this.getDatabase().then(function(n){return n.executeReadTransaction(function(n){return n.executeScalar(e,t&&t.toArray()).andThen(function(e,t){return i.LocalStorageConverter.deserializeFromDB(t,4)})})})},e.prototype.rawExecuteScalar=function(e,t){return this.getDatabase().then(function(n){return n.executeReadTransaction(function(n){return n.executeQueryRaw(e,t&&t.toArray()).andThen(function(e,t){return 0===t.rows.length?null:c(t.rows.item(0))})})})},e.prototype.create=function(e,t){var n=this;return l(e,t,"create"),this.getDatabase().then(function(r){return r.executeTransaction(function(r){return n.createInner(r,e,t,!0)})})},e.prototype.createInner=function(e,t,n,r){var o=t.insert.getArguments(n);return e.executeQueryRaw(t.insert.sql,o.toArray()).andThen(function(e,o){if(null===t.getIdAttribute())return null;(0===t.idIsAutoNumber||2===t.idIsAutoNumber&&!t.hasNullId(n))&&(r=!1);var a=t.getIdAttribute().type,s=i.LocalStorageConverter.convertToModelDataType(a),u=new(m.getType(s)),c=null;return c=r?i.LocalStorageConverter.deserializeFromDB(o.insertId,a):t.getIdFromRecord(n),u.idOut=c,u})},e.prototype.update=function(e,t){l(e,t,"update");var n=e.update.getArguments(t);return this.executeNonQuery(e.update.sql,n)},e.prototype.createOrUpdate=function(e,t){var n=this;return this.getDatabase().then(function(r){return r.executeTransaction(function(r){return n.createOrUpdateInner(r,e,t,!0)})})},e.prototype.createOrUpdateInner=function(e,t,n,r){if(l(t,n,"create or update"),t.hasNullId(n))return this.createInner(e,t,n,!0);var o=t.upsert.getArguments(n);return e.executeQueryRaw(t.upsert.sql,o.toArray()).andThen(function(e,r){var o=t.getIdFromRecord(n),a=t.getIdAttribute().type,s=i.LocalStorageConverter.convertToModelDataType(a),u=new(m.getType(s));return u.idOut=o,u})},e.prototype.createOrUpdateAll=function(t,n){var r=this;return this.getDatabase().then(function(i){return i.executeTransaction(function(i){return e.ForceCreateOrUpdateAllMethod===g.Bulk||e.ForceCreateOrUpdateAllMethod===g.Auto&&0===t.attributes.filter(function(e){return 1===e.type}).length?r.createOrUpdateAllBulk(i,t,n):r.createOrUpdateAllSingle(i,t,n)}).then(u)})},e.prototype.createOrUpdateAllBulk=function(t,n,r){var i=[],o=Math.floor(e.MaxQueryParameters/n.attributes.length);if(0===o)return this.createOrUpdateAllSingle(t,n,r);for(var a=Math.ceil(r.length/o),s=0;s<a;s++){for(var u=[],c=0;c<o;){var f=s*o+c;if(f===r.length)break;var d=r.getItem(f);l(n,d,"create or update"),u=u.concat(n.upsert.getArguments(d).toArray()),c++}var p=n.upsert.getBulkSql(c);!function(e,t){i.push(function(n){return n.executeQueryRaw(e,t)})}(p,u)}return t.feed(null).andThenAll(function(e){return i})},e.prototype.createOrUpdateAllSingle=function(e,t,n){for(var r=this,i=[],o=0;o<n.length;o++){var a=n.getItem(o);!function(e){i.push(function(n){return r.createOrUpdateInner(n,t,e,!1)})}(a)}return e.feed(null).andThenAll(function(e){return i})},e.prototype.get=function(e,t){var r=e.getIdAttribute(),i=new b;return i.add(r.name,r.type,t),this.rawExecuteQuery(e.select.sql,e.dbRecordToRecord,i).then(function(r){if(0===r.length)throw new n.Exceptions.DataBaseException("",e.name+" with id "+t+" was not found");var i=new(y.getType(r[0].constructor));return i.recordOut=r[0],i})},e.prototype.delete=function(e,t){var n=e.getIdAttribute(),r=new b;return r.add(n.name,n.type,t),this.executeNonQuery(e.delete.sql,r)},e.prototype.deleteAll=function(e){return this.executeNonQuery(e.deleteAll.sql)},e.prototype.getBinary=function(e,t,n){var r=this,o=e.getIdAttribute(),a=o.name,s=o.type,u='SELECT "'+t+'" FROM "'+e.tableName+'" WHERE "'+a+'" = ?',c=new b;return c.add(a,s,n),i.LocalStorageConverter.deserializeLazyBinaryFromDB(function(){return r.getDatabase().then(function(e){return e.executeReadTransaction(function(e){return e.executeScalar(u,c.toArray())})})})},e.prototype.replaceEntityReferencesInOrderBy=function(e,t,r){var i=this,o=null,s=null,u=null;if(e=e.trim(),s=a.matches(e,'(^|\\s|\\.)(\\[|"|)(ossys_|osltm_|oslog_|osevt_|osusr_|osext_)',!0),s.length>0)throw u=s[0],new n.Exceptions.DataBaseException("","'"+(u.groups[2]+u.groups[3])+"' found in 'Order By' parameter is a reserved prefix");if(""!==e&&(s=a.matches(e,"((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*",!0),1!==s.length||s[0].value!==e))throw new n.Exceptions.DataBaseException("","Invalid syntax in 'Order By' parameter.");var c=function(e){return i.replaceEntityNameInOrderBy(e,t,r)},l=function(e){return i.replaceAttributeName(e)};return o=a.replace(e,"(\\{\\w+\\}|\\w+\\.)",!1,c),o=a.replace(o,"(\\[\\w+\\])",!1,l)},e.prototype.replaceEntityNameInOrderBy=function(e,t,r){for(var i="",o=this.getEntityNameFromMatch(e),a=!1,s=0;s<t.length;s++)if(t[s].toLowerCase()===o.toLowerCase()){a=!0,i=r[s];break}if(!a)throw new n.Exceptions.DataBaseException("","'"+o+"' found in 'Order By' parameter is an invalid Entity");return"."===e.value.charAt(e.value.length-1)?i+".":i},e.prototype.replaceAttributeName=function(e){var t=e.value.substr(1,e.value.length-2);return t?('"'===t.charAt(0)?"":'"')+t+('"'===t.charAt(t.length-1)?"":'"'):""},e.prototype.getEntityNameFromMatch=function(e){return"."===e.value.charAt(e.value.length-1)?e.value.substr(0,e.value.length-1):e.value.substr(1,e.value.length-2)},e.prototype.getOrderByColumnsWithoutDuplicates=function(e){return this.filterDuplicateOrderByColumns(e).join(", ")},e.prototype.filterDuplicateOrderByColumns=function(e){var t=new Array,n={};return e.forEach(function(e){var r=e.trim();if(""!==r){var i=r.replace(new RegExp("\b((ASC)|(DESC))$","im"),"").replace('"',"").replace("[","").replace("]","").trim().toLowerCase();!0!==n[i]&&(t.push(r),n[i]=!0)}}),t},e.MaxQueryParameters=500,e.ForceCreateOrUpdateAllMethod=g.Auto,e}();t.WebSQLStorage=v,t.webSQLStorageInstance=new v;var T=function(){function e(e,t,n){var r=this;this.storage=e,this.info=t,this.moduleKey=n,this.getBinary=function(e,t,n){return n.hasContent()?n:r.storage.getBinary(r.info,e,t)}}return e.prototype.getStorage=function(){return this.storage},e.prototype.getInfo=function(){return this.info},e.prototype.create=function(e){return this.storage.create(this.info,e)},e.prototype.createOrUpdate=function(e){return this.storage.createOrUpdate(this.info,e)},e.prototype.createOrUpdateAll=function(e){return this.storage.createOrUpdateAll(this.info,e)},e.prototype.update=function(e){return this.storage.update(this.info,e)},e.prototype.get=function(e){return this.storage.get(this.info,e)},e.prototype.delete=function(e){return this.storage.delete(this.info,e)},e.prototype.deleteAll=function(){return this.storage.deleteAll(this.info)},e}();t.Entity=T;var b=function(){function e(e){this.skipConversion=e,this.argumentList=[],this.existingArguments={}}return e.prototype.add=function(e,t,n,r,o,a){if(!this.existingArguments[e])if(this.existingArguments[e]=!0,
void 0===n)this.argumentList.push(null);else{var s=void 0;s=this.skipConversion?n:i.LocalStorageConverter.serializeToDB(n,{type:t,length:r,decimals:o,isEntityReference:a}),this.argumentList.push(s)}},e.prototype.toArray=function(){return this.argumentList},e}();t.QueryArgumentsList=b}),define("OutSystems/ClientRuntime/ObjectExtensions",["require","exports","./DataTypes"],function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0}function i(e){var t,n,r=0,i=e.length;if(0===i)return r;for(t=0;t<i;t++)n=e.charCodeAt(t),r=(r<<5)-r+n,r|=0;return r}function o(e,t){return e&&t&&!n.TypeValidations.isBasicType(e)?e.fastEquals instanceof Function?e.fastEquals(t):n.equals(e,t):e===t}function a(e,t,n){if(void 0===n&&(n=r),e===t)return!0;if(null===e||null===t||"object"!=typeof e||"object"!=typeof t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var c=i[u];if(n(e,c)){if(!s(c))return!1;if(!o(e[c],t[c]))return!1}}return!0}function s(e,t){if(e===t)return!0;if(!(null!==e&&null!==t&&e instanceof Array&&t instanceof Array))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(null==e)throw new TypeError("ObjectHelper.assign target cannot be null or undefined");for(var r=Object(e),i=Object.prototype.hasOwnProperty,o=0,a=t;o<a.length;o++){var s=a[o];if(null!=s){var u=Object(s);for(var c in u)i.call(u,c)&&(r[c]=u[c])}}return r}function c(e){return!e||0===Object.keys(e).length}function l(e){for(var t=[],n=[e],r=0;n.length;){var i=n.pop();switch(typeof i){case"boolean":r+=4;break;case"number":r+=8;break;case"string":r+=2*i.length;break;case"object":if(-1!==t.indexOf(i))continue;t.push(i),Array.isArray(i)||(r+=2*Object.keys(i).length);for(var o in i){var a=null;try{a=i[o]}catch(e){}a&&n.push(a)}}}return r}function f(e,t,n){var r=e[t]||function(){};e[t]=function(){return n.apply(this,[].concat(r,arguments))}}function d(e,t,n){for(var r=e,i=0;i<n;i++)r+=t;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.getHashCode=i,t.shallowEquals=a,t.arrayShallowEquals=s,t.assign=u,t.isEmptyObject=c,t.roughSizeOf=l,t.overrideMethod=f,t.concatenateMultipleTimes=d}),define("OutSystems/ClientRuntime/ScreenStateCache",["require","exports","./Logger","./ObjectExtensions"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.addKey=function(t){this.cache[t]={components:{}},this.cacheKeys.push(t);var n=this.cacheKeys.length-e.MaxCacheSize;if(n>0)for(var r=0;r<n;r++)this.removeKey(this.cacheKeys[r])},e.removeKey=function(e){delete this.cache[e],this.cacheKeys.splice(this.cacheKeys.indexOf(e),1)},e.save=function(e,t,n,r){this.cache[e]||this.addKey(e),this.cache[e].components[t]={state:n,customProperties:r}},e.load=function(t,n){var r=e.loadScreenCache(t);return r?r.components[n]:null},e.loadScreenCache=function(e){return this.cache[e]||void 0},e.clear=function(e){var t=this;e?this.cache[e]&&this.removeKey(e):(this.cache={},this.cacheKeys=[]),n.trace(this,function(){return"State cache contains "+Object.keys(t.cache).length+" entries with a total size of "+r.roughSizeOf(t.cache)+" bytes"})},e.inspect=function(){return{cache:this.cache,cacheKeys:this.cacheKeys}},e.MaxCacheSize=20,e.cache={},e.cacheKeys=[],e}();t.ScreenStateCache=i}),define("OutSystems/ClientRuntime/NativeLogger",["require","exports","./Logger","./NativeHelper"],function(e,t,n,r){"use strict";function i(){var e=window;if(e&&e.OutSystemsNative&&e.OutSystemsNative.Logger)return e.OutSystemsNative.Logger}function o(e){return __awaiter(this,void 0,void 0,function(){var t,r,o,a,s,u;return __generator(this,function(c){if(t=i(),r=Promise.resolve(),t&&e&&e.length>0)for(o=function(e){r=r.then(function(){return new Promise(function(r,i){switch(e.logType){case n.LogTypes.General:t.logInfo(e.message,e.moduleName,r,i);break;case n.LogTypes.Error:t.logError(e.message,e.moduleName,null,e.stack,r,i);break;case n.LogTypes.Trace:t.logDebug(e.message,e.moduleName,r,i);break;default:t.logError("Unknown log type: "+e.logType,"NativeLogger",JSON.stringify(e),(new Error).stack,r,i)}})})},a=0,s=e;a<s.length;a++)u=s[a],o(u);return[2,r.then(function(){return!0})]})})}Object.defineProperty(t,"__esModule",{value:!0});var a;!function(e){function t(){return!!i()}function n(e){r.ensureNativeReady().then(function(){t()&&e()})}function o(e){}function a(){return t()?Promise.resolve():Promise.reject(new Error("NativeLogger API is not available"))}e.isOnline=t,e.onOnline=n,e.onOffline=o,e.ping=a}(a||(a={})),t.NetworkStatus=a,t.postLog=o}),define("OutSystems/ClientRuntime/NativeApplicationInfo",["require","exports","./NativeHelper"],function(e,t,n){"use strict";function r(){var e=window;if(e&&e.OutSystemsNative&&e.OutSystemsNative.ApplicationInfo)return e.OutSystemsNative.ApplicationInfo}function i(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n.ensureNativeReady()];case 1:return e.sent(),[2,new Promise(function(e,t){var n=r();if(!n)return t(new Error("NativeAppInfo API is not available"));n.getPlatformVersion(e,t)})]}})})}function o(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n.ensureNativeReady()];case 1:return e.sent(),[2,new Promise(function(e,t){var n=r();if(!n)return t(new Error("NativeAppInfo API is not available"));n.getNativeShellVersion(e,t)})]}})})}function a(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n.ensureNativeReady()];case 1:return e.sent(),[2,new Promise(function(e,t){var n=r();if(!n)return t(new Error("NativeAppInfo API is not available"));n.getAppVersion(e,t)})]}})})}function s(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,n.ensureNativeReady()];case 1:return e.sent(),[2,new Promise(function(e,t){var n=r();if(!n)return t(new Error("NativeAppInfo API is not available"));n.getAppVersionNumber(e,t)})]}})})}function u(e,t){return!(!e||!t)&&c(e.split(".").map(function(e){return parseInt(e,10)}),t.split(".").map(function(e){return parseInt(e,10)}),0)}function c(e,t,n){return!!isNaN(t[n])||((e[n]||0)>(t[n]||0)||!(e[n]<(t[n]||0))&&c(e,t,n+1))}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlatformVersion=i,t.getNativeShellVersion=o,t.getAppVersion=a,t.getAppVersionNumber=s,t.isVersionGreaterOrEqualTo=u}),define("OutSystems/ClientRuntime/Application",["require","exports","module","./StorageProvider","./Navigation","./VersionsManager","./ApplicationInfo","./FeedbackMessageService","./Logger","./Performance","./ErrorHandling","./Communication","./DataTypes","./NativeHelper","./RequireManager","./Database","./Entities","./ScreenStateCache","./Flow","./Exceptions","./Transitions","./ClientInfo","./NativeLogger","./NativeApplicationInfo","./RolesInfo"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h,g,m,y,v,T,b,E,w,D,I){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ApplicationStorage={hasRenderedSplashInSession:new r.StorageObject(r.StorageType.Session,"HasRenderedSplashInSession",!1),pendingUpgradeFeedback:new r.StorageObject(r.StorageType.Session,"PendingUpgradeFeedback")};var S=function(){function e(){this.showingSplashScreen=!1}return e.prototype.setApplicationDefinition=function(e){a.setApplicationDefinition(e);var t=p.isRunningOnNative()?e.environmentKey+"_"+e.applicationKey:e.applicationName;a.setDatabaseName(t)},e.prototype.initializeLogger=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,r;return __generator(this,function(i){switch(i.label){case 0:e=f.NetworkStatus,t=f.postLog,i.label=1;case 1:return i.trys.push([1,5,,6]),[4,p.ensureNativeReady()];case 2:return i.sent(),w.NetworkStatus.isOnline()?[4,D.getNativeShellVersion()]:[3,4];case 3:n=i.sent(),D.isVersionGreaterOrEqualTo(n,"2.7.3")&&(e=w.NetworkStatus,t=w.postLog),i.label=4;case 4:return[3,6];case 5:return r=i.sent(),[3,6];case 6:return u.setNetworkStatusChecker(e),u.setPostLogsFunction(t),u.enableFallbackStorage(),[2]}})})},e.prototype.initialize=function(e,t,n,i){var s=this;return void 0===t&&(t=0),c.start("Application initialize"),v.tryCatchFinally(function(){return __awaiter(s,void 0,void 0,function(){var s,c,l,p,g,m,v,E=this;return __generator(this,function(w){switch(w.label){case 0:return u.trace("Application","Initializing Application"),s=this.initializeLogger(),this.setApplicationDefinition(e),r.setDefaultStorageNamespace(a.getHomeModuleName()),f.initialize(a.isDebugEnabled(),a.getUserCookieName(),function(e){return E.onNewVersionDetected(e)}),h.setErrorHandler(function(e){if(o.default.isUpgradingVersion&&!T.isSystem(e))return u.trace("Application","RequireJS error during upgrade, treating as an upgrade error."),void o.default.handleUpgradeError(e,1);E.handleError(e)}),y.ScreenStateCache.clear(),b.setDefaultTransition(a.getDefaultTransition()),n&&(d.Constants.FORMAT.dateTimeFormat=n),i&&(d.Constants.FORMAT.numberFormat=i),[4,s];case 1:return w.sent(),1===t?[2,!0]:(c=this.initializeDatabase(),l=!1,p=function(){l=!0},g=new Promise(function(e){if(l)e();else{var t=p;p=function(){t(),e()}}}),m=g.then(function(){return E.triggerApplicationReadyEvent()}),v={onVersionReady:function(){return c.then(function(e){return E.onDatabaseReady(e)}).then(function(){return g}).then(function(){return m}).then(function(){return E.onApplicationReady()})},onUpgradeFinished:function(e,t){return E.onUpgradeFinished(e,t)},onNewVersionDetected:function(e){return E.onNewVersionDetected(e)},onAppInfoReady:function(e){return E.onAppInfoReady(e)}},[2,o.default.initialize(c,v).then(function(e){return p(),e})])}})})},function(e){if(0!==t)throw e;s.handleError(e)},function(){return c.end("Application initialize")})},e.prototype.triggerApplicationReadyEvent=function(){var e=this,t=a.getHomeModuleControllerName();if(t)return u.trace("Application","Calling application ready event handler for "+a.getHomeModuleName()),new Promise(function(e,n){requirejs([t],e,n)}).then(function(e){return e.default.fireApplicationReady()}).catch(function(t){e.handleError(t)})},e.prototype.initializeDatabase=function(){return u.trace("Application","Initializing application database."),g.SqlDbProvider.openDb(a.getDatabaseName()).then(function(e){return e.testConnection().then(function(){return e.executeTransaction(function(t){return m.LogTable.initialize(t,e).andThen(function(t){return m.PersistentKeyValue.initialize(t,e)}).andThen(function(e){return m.webSQLStorageInstance.initMetamodel(e)}).andThen(function(){return e})})})}).then(function(e){return I.initialize(m.PersistentKeyValue.storage).then(function(){return e})})},e.prototype.onDatabaseReady=function(e){m.webSQLStorageInstance.initDb(e),u.trace("Application","Database initialized successfully")},e.prototype.onNewVersionDetected=function(e){var t=this;u.trace("Application","New version detected, currentViewHasChanged = "+e);var n=!0,r=function(e){n=e};if(e){this.disableDocument();var a=function(){return i.changeWindowLocation(i.buildApplicationRelativeUrl(),n,!0)},c=function(e){return e.getApplicationUpgradeRequiredMessage(t.canLoseDataInUpgrade())};this.showFeedbackMessage(c,2,"upgrade-required",a).then(function(){return s.setEnabled(!1)})}return o.default.cacheResourcesInBackground(r)},e.prototype.onAppInfoReady=function(e){try{c.start("Application onAppInfoReady"),this.updateHasTracingEnabled(e),this.updateApplicationDefaultTimeout(e),this.updateApplicationInfo(e),this.updateClientInfo(),this.updateLoggerDetails()}finally{c.end("Application onAppInfoReady")}},e.prototype.updateHasTracingEnabled=function(e){u.setTracingEnabled(e.data.hasTracingEnabled)},e.prototype.updateApplicationDefaultTimeout=function(e){a.setApplicationDefaultTimeout(e.data.applicationDefaultTimeout)},e.prototype.updateApplicationInfo=function(e){a.setModules(e.data.modules),a.setClientEntitiesModules(e.data.entityModuleNames)},e.prototype.updateClientInfo=function(){p.ensureNativeReady().then(function(){return E.setClientInfo()}).catch(function(e){return u.trace("","Client info update failed: "+e)})},e.prototype.updateLoggerDetails=function(){var e=p.isRunningOnNative();u.setDeviceDetails(e)},e.prototype.shouldRenderSplashScreen=function(){var e=a.getHomeModuleDefinition();return e.splashScreenName&&e.splashScreenName.length>0&&!t.ApplicationStorage.hasRenderedSplashInSession.get()},e.prototype.disableDocument=function(){var e=document.createElement("div");e.classList.add("background-backdrop"),document.body.classList.add("disable-scroll"),document.body.appendChild(e)},e.prototype.canLoseDataInUpgrade=function(){return document.getElementsByTagName("form").length>0},e.prototype.onUpgradeFinished=function(e,n){u.trace("Application","Upgrade "+(e?"finished successfully":"failed with reason: "+n));var r={success:e,failReason:n};e&&!this.isShowingSplashScreen?this.showUpgradeFeedback(r):t.ApplicationStorage.pendingUpgradeFeedback.set(r)},e.prototype.waitForAppReady=function(){var e=this;return this.isReady?Promise.resolve():(this.appReadyPromise||(this.appReadyPromise=new Promise(function(t){e.onReady=function(){return t()}})),this.appReadyPromise)},e.prototype.onApplicationReady=function(){u.trace("Application","Application ready"),c.end("Application ready"),this.isReady=!0,this.onReady&&(this.onReady(),this.onReady=null)},e.prototype.onBeforeNavigation=function(e,t){return i.onBeforeNavigate(e,t)},e.prototype.onAfterNavigation=function(){if(!this.isShowingSplashScreen&&!i.hasPendingReload()){u.trace("Application","Navigated to: "+i.getCurrentLocation().href);var e=t.ApplicationStorage.pendingUpgradeFeedback.get();e&&(this.showUpgradeFeedback(e),t.ApplicationStorage.pendingUpgradeFeedback.remove())}},e.prototype.showUpgradeFeedback=function(e){var t,n,r;if(e.success)n=0,t=function(e){return e.getApplicationUpgradeCompleteMessage()},r="upgrade-success";else switch(n=2,r="upgrade-error",e.failReason){case 1:t=function(e){return e.getApplicationUpgradeFailedOnResourcesMessage()};break;case 2:t=function(e){return e.getApplicationUpgradeFailedOnDataModelMessage()};break;default:t=function(e){return e.getApplicationUpgradeFailedUnknownMessage()}}this.showFeedbackMessage(t,n,r)},e.prototype.showFeedbackMessage=function(e,t,n,r){return void 0===n&&(n=""),new Promise(function(i){var o=a.getHomeModuleLanguageResourcesName();requirejs([o],function(o){s.showFeedbackMessage(e(o),t,!0,n,!0,r),i()})})},Object.defineProperty(e.prototype,"isShowingSplashScreen",{get:function(){return this.showingSplashScreen},set:function(e){e&&t.ApplicationStorage.hasRenderedSplashInSession.set(!0),this.showingSplashScreen=e},enumerable:!0,configurable:!0}),e.prototype.handleError=function(e,t){l.handleError(e,t)},e.prototype.exit=function(){return p.isRunningOnNative()&&p.exitApp()},e}();t.Application=S;var A=new S;t.default=A,i.VersionedURL.setUrlVersionProvider(o.default.getVersionedUrl.bind(o.default)),A.default=A,A.ApplicationStorage=t.ApplicationStorage,n.exports=A}),define("OutSystems/ClientRuntime/JSONUtils",["require","exports","./DataConversion"],function(e,t,n){"use strict";function r(e,t,r,i){var a=n.JSONConverter.to(e,t,r,i);return JSON.stringify(a,o)}function i(e,t,r){try{var i=void 0;return e&&(i=a(e)),n.JSONConverter.from(i,t,r)}catch(e){throw"Failed to deserialize JSON to "+t.name+": "+e.message}}function o(e,t){if(null!==t)return t}function a(e){var t=/(?:"([^\\"]|\\.)*")|(?:'([^\\']|\\.)*')|(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(\w+)\s*:/g,n=e.replace(t,function(e,t,n,r,i){return r?'"'+r+'"':n?'"'+e.substring(1,e.length-1)+'"':i?'"'+i+'":':e});return JSON.parse(n)}function s(e,t){var n,r,i,o;for(var a in t){n=e[a],r=t[a];r&&n&&("object"==typeof r||(i=Array.isArray(r)))?(i?(i=!1,o=Array.isArray(n)?n:[]):o="object"==typeof n?n:{},e[a]=s(o,r)):void 0!==r&&(e[a]=r)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeToJSON=r,t.deserializeFromJSON=i,t.filterJSONValues=o,t.parseJSON=a,t.mergeJS=s}),define("OutSystems/ClientRuntime/ScriptsManager",["require","exports","./Logger"],function(e,t,n){"use strict";function r(e){i("Adding script",e),o();var t=l.get(e);if(t)return i("Script already added",e),t.promise;var n=document.createElement("script");n.async=!1,n.setAttribute("src",e),n.setAttribute(u,"false");var r=new Promise(function(t,r){var o=function(){n.setAttribute(u,"true")};n.onerror=n.onabort=function(t){o(),r("Error adding script '"+e+"' to document '"+document.baseURI+"'")},n.onload=function(n){i("Script added",e),o(),t(n)}});return d?d.domElement.parentNode.insertBefore(n,d.domElement.nextSibling):document.head.appendChild(n),l.set(e,{promise:r,domElement:n}),d=l.get(e),r}function i(e,t){n.trace(c,e+" '"+t+"' : document '"+document.baseURI+"'")}function o(){f||(f=!0,Object.defineProperty(define,"amd",{get:a.bind(this,define.amd),configurable:!0}))}function a(e){var t=document.currentScript;if(!t||!t.hasAttribute(u))return e}function s(e,t){return Promise.all(e.map(function(e){return r(e).catch(t)}))}Object.defineProperty(t,"__esModule",{value:!0});var u="data-os-finished",c="ScriptsManager",l=new Map,f=!1,d=null;t.addScript=r,t.scheduleCustomJsLoading=s}),define("OutSystems/ClientRuntime/SystemActions",["require","exports","./DataTypes","./ScriptsManager","./Logger","./Navigation"],function(e,t,n,r,i,o){"use strict";function a(e,t,n){if(t.isBeingIterated(e))throw new Error("List is being iterated: "+n+" is not allowed")}function s(e,t,n,r){a(e,t,n);try{return t.registerIterationStart(e),r()}finally{t.registerIterationEnd(e)}}function u(e){return e?e.iterationContext:new A}function c(e,t,n){a(e,u(n),"append"),e.append(t)}function l(e,t){var n=u(t);a(e,n,"clear"),e.clear(),n.setCurrentRowNumber(e,0)}function f(e,t,n,r){var i=u(r);a(e,i,"insert"),e.insert(n,t);var o=i.getCurrentRowNumber(e);e.length>1&&n<=o&&i.setCurrentRowNumber(e,o+1)}function d(e,t,n){var r=u(n);a(e,r,"remove");var i,o=1===e.length;o&&(i=e.getItem(0)),e.remove(t),o&&(e.emptyListItem=i);var s=r.getCurrentRowNumber(e);t<s?r.setCurrentRowNumber(e,s-1):t===e.length&&r.setCurrentRowNumber(e,Math.max(0,e.length-1))}function p(e,t,n){a(e,u(n),"appendAll"),e.appendAll(t)}function h(e,t){a(e,u(t),"duplicate");var n=new(D.getType(e.constructor));return n.duplicatedListOut=e.clone(),n}function g(e,t){var n=u(t);return s(e,n,"distinct",function(){var t=new(S.getType(e.constructor));return t.distinctListOut=e.distinct(),t})}function m(e,t,n){var r=u(n);return s(e,r,"all",function(){var n=new x;return n.resultOut=e.all(t),n})}function y(e,t,n){var r=u(n);return s(e,r,"any",function(){var n=new x;return n.resultOut=e.any(t),n})}function v(e,t,n){var r=u(n);return s(e,r,"filter",function(){var n=new(I.getType(e.constructor));return n.filteredListOut=e.filter(t),n})}function T(e,t,n,r){var i=u(r);return s(e,i,"sort",function(){e.sort(t,n)})}function b(e,t,n){var r=u(n);return s(e,r,"indexOf",function(){var n=new _;return n.positionOut=e.indexOf(t),n})}function E(e,t){var n=o.VersionedURL.getVersionedUrl(e);return r.addScript(n)}function w(e,t,n){i.log(t,e)}Object.defineProperty(t,"__esModule",{value:!0});var D=new n.ComplexTypeKeyedTypeFactory("DuplicatedList","duplicatedListOut"),I=new n.ComplexTypeKeyedTypeFactory("FilteredList","filteredListOut"),S=new n.ComplexTypeKeyedTypeFactory("DistinctList","distinctListOut"),A=function(){function e(){}return e.prototype.getCurrentRowNumber=function(e){return 0},e.prototype.setCurrentRowNumber=function(e,t){},e.prototype.isBeingIterated=function(e){return!1},e.prototype.registerIterationStart=function(e){},e.prototype.registerIterationEnd=function(e){},e.prototype.getIterator=function(e){return null},e.prototype.clone=function(){return this},e}();t.listAppend=c,t.listClear=l,t.listInsert=f,t.listRemove=d,t.listAppendAll=p,t.listDuplicate=h,t.listDistinct=g;var x=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),t.attributesToDeclare=function(){return[this.attr("Result","resultOut","resultOut",!0,!0,n.DataTypes.Boolean,function(){})].concat(e.attributesToDeclare.call(this))},t._constructor=function(){t.init()}(),t}(n.GenericRecord);t.listAll=m,t.listAny=y,t.listFilter=v,t.listSort=T;var _=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),t.attributesToDeclare=function(){return[this.attr("Position","positionOut","positionOut",!0,!0,n.DataTypes.Integer,function(){})].concat(e.attributesToDeclare.call(this))},t._constructor=function(){t.init()}(),t}(n.GenericRecord);t.listIndexOf=b,t.requireScript=E,t.logMessage=w}),define("OutSystems/ClientRuntime/WidgetNaming",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.Block=0]="Block",e[e.IteratorItem=1]="IteratorItem",e[e.None=2]="None"}(n=t.NamespaceKind||(t.NamespaceKind={}));var r="-",i=function(){function e(e,t,i,o){switch(void 0===t&&(t=""),void 0===i&&(i=n.None),void 0===o&&(o=null),this._ownerService=e,i){case n.Block:this._namespace="b";break;case n.IteratorItem:this._namespace="l";break;default:this._namespace=""}if(this._namespace+=t,e){var a=o?o+r:"";this._namespace=e.namespace+this._namespace+r+a}else this._namespace&&(this._namespace=this._namespace+r)}return e.prototype.getId=function(e){return e?this.namespace+e:null},e.nameFromId=function(e){return e.substring(e.lastIndexOf(r)+1)},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ownerService",{get:function(){return this._ownerService},enumerable:!0,configurable:!0}),e}();t.WidgetIdService=i}),define("OutSystems/ClientRuntime/Validation",["require","exports","./WidgetNaming"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="",i=function(){function e(e,t){var n=this;this.model=e,this.messagesProvider=t,this.updatingValidations=!1,this.disposed=!1,e.hasValidationWidgets&&(this.widgets={},this.widgetChildren={},this.oldModelWidgets=this.model.widgets,this.model.subscribeWrites(function(){n.updatingValidations||n.oldModelWidgets===n.model.widgets||n.recalculateAggregatorsState(r),n.oldModelWidgets=n.model.widgets},!0))}return e.prototype.getWidgetRecord=function(e){return this.model.widgets.get(e)},e.prototype.updateWidgetValidationsProperties=function(e,t,n){var r=this.updatingValidations;this.updatingValidations=!0;try{if(e.isWebBlockInstance){e.valid=t}else{var i=this.getWidgetRecord(e.getId());i.validAttr!==t&&(i.validAttr=t),void 0!==n&&i.validationMessageAttr!==n&&(i.validationMessageAttr=n)}}finally{this.updatingValidations=r}},e.prototype.validateWidget=function(e){var t=!0;for(var n in this.widgetChildren[e])!0!==this.validateWidget(n)&&(t=!1);var r=this.widgets[e];if(r){var i=null;r.isValidationAggregator?i=new o(t):r.validate&&(i=r.validate()),i&&(this.updateWidgetValidationsProperties(r,i.valid,i.validationMessage),i.valid||(t=!1))}return t},e.prototype.recalculateAggregatorsState=function(e){var t=!0;for(var n in this.widgetChildren[e])this.recalculateAggregatorsState(n)||(t=!1);var r=this.widgets[e];if(r){if(r.isWebBlockInstance)return r.valid;if(!r.isValidationAggregator)return this.getWidgetRecord(e).validAttr;this.updateWidgetValidationsProperties(r,t,void 0)}return t},e.prototype.register=function(e){if(this.model.hasValidationWidgets&&e){var t=e.getId();if(t){this.widgets[t]=e;var n=e.validationParentId||r,i=this.widgetChildren[n];if(i||(i={},this.widgetChildren[n]=i),i[t]=1,!e.isWebBlockInstance){var o=e,a=this.model.widgets.create(t);a.generationNode=o.generationNode,this.model.widgets.add(a)}}}},e.prototype.unregister=function(e){if(e&&!this.disposed&&this.model.hasValidationWidgets){var t=this.widgets[e],n=(t?t.validationParentId:null)||r;delete this.widgets[e],delete this.widgetChildren[n][e],t&&this.model.widgets.remove(e)}},e.prototype.isRegistered=function(e){return!!this.widgets&&void 0!==this.widgets[e]},e.prototype.validate=function(e){if(!this.model.hasValidationWidgets)return!0;var t=this.validateWidget(e||r);return e&&(t=this.recalculateAggregatorsState(r)),this.model.flush(),t},e.prototype.getMandatoryValueMessage=function(){return this.messagesProvider.getMandatoryValueMessage()},e.prototype.getInvalidValueMessage=function(e){return this.messagesProvider.getInvalidValueMessage(e)},e.prototype.getNameById=function(e){return n.WidgetIdService.nameFromId(e)},e.prototype.getWidgetChildren=function(){return this.widgetChildren},e.prototype.dispose=function(){this.disposed=!0},e}();t.ValidationService=i;var o=function(){function e(e,t){this.valid=e,this.validationMessage=t}return Object.defineProperty(e.prototype,"valid",{get:function(){return this._valid},set:function(e){this._valid=void 0===e||e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validationMessage",{get:function(){return this._validationMessage},set:function(e){this._validationMessage=e||""},enumerable:!0,configurable:!0}),e}();t.ValidationResult=o}),define("OutSystems/ClientRuntime/RolesService",["require","exports","./RolesInfo"],function(e,t,n){"use strict";function r(e){return!!n.RolesInfoStorage.rolesInfo.isDefined()&&n.RolesInfoStorage.rolesInfo.get().indexOf(e)>=0}Object.defineProperty(t,"__esModule",{value:!0}),t.checkRole=r,t.getUserId=n.getUserId}),define("OutSystems/ClientRuntime/Injector",["require","exports"],function(e,t){"use strict";function n(e,t){a[e]=t,e in s&&s[e].forEach(function(n){return n(e,t)})}function r(e,t){e in s?s[e].push(t):s[e]=[t]}function i(e,t){e in s&&(s[e]=s[e].filter(function(e){return e!==t}))}function o(e){return a[e]}Object.defineProperty(t,"__esModule",{value:!0});var a={},s={};t.register=n,t.addRegistrationListener=r,t.removeRegistrationListener=i,t.resolve=o;var u={register:n,resolve:o,addRegistrationListener:r,removeRegistrationListener:i};t.default=u}),define("OutSystems/ClientRuntime/Public",["require","exports","./NativeHelper","./RolesService","./VersionsManager","./Application","./ApplicationInfo","./ResourceCache","./Logger","./FeedbackMessageService","./Controller","./Navigation","./Transitions","./BuiltinFunctions","./Injector"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h){"use strict";function g(e,t){u.log("Public","'"+e+"' is deprecated and will be removed on the next version. Consider using '"+t+"' instead.")}function m(){return l.BaseViewController.activeScreen?l.BaseViewController.activeScreen.modelContext:{viewName:"",navigatedFromHistory:!1,viewWasRestoredFromCache:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.BuiltinFunctions=p;!function(e){function t(e){return r.checkRole(e)}e.checkIfCurrentUserHasRole=t}(t.Security||(t.Security={}));var y;!function(e){e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(y=t.FeedbackMessageType||(t.FeedbackMessageType={}));!function(e){function t(e){switch(e){case y.Info:return 0;case y.Success:return 1;case y.Warning:return 2;case y.Error:return 3;default:throw new Error("Don't know how to convert "+e)}}function n(e,n,r,i,o,a){return void 0===r&&(r=!0),void 0===o&&(o=!0),c.showFeedbackMessage(e,t(n),r,i,o,a)}function r(){return c.closeFeedbackMessage()}e.showFeedbackMessage=n,e.closeFeedbackMessage=r}(t.FeedbackMessage||(t.FeedbackMessage={}));var v=function(){function e(e){this._model=e}return e.prototype.setWidgetAsInvalid=function(e,t){var n=this._model.widgets.get(e);n.validAttr=!1,n.validationMessageAttr=t},e.prototype.setWidgetAsValid=function(e){var t=this._model.widgets.get(e);t.validAttr=!0,t.validationMessageAttr=""},e.prototype.isWidgetValid=function(e){return!0===this._model.widgets.get(e).validAttr},e}();t.Validation=v;!function(e){function t(){return n.whenDeviceReady}e.whenReady=t}(t.Device||(t.Device={}));var T;!function(e){function t(){return i.default.isUpgradingVersion}function n(e){u.trace("ApplicationLifecycle","Registering listeners for the application load process."),e&&(e.onLoadComplete&&o.default.waitForAppReady().then(function(){return e.onLoadComplete()}),e.onUpgradeProgress&&s.ResourceCache.listen(null,null,function(t,n){return e.onUpgradeProgress(t,n)}))}e.isUpgradingVersion=t,e.listen=n}(T=t.ApplicationLifecycle||(t.ApplicationLifecycle={}));var b=function(){function e(e){this._context=e}return e.prototype.navigateTo=function(e,t,n){f.navigateTo(e,this.getTransitionObject(t,d.Default),this._context,!1,n)},e.prototype.navigateBack=function(e){f.navigateBack(this.getTransitionObject(e),this._context,!1)},e.prototype.navigateForward=function(e){f.navigateForward(this.getTransitionObject(e),this._context,!1)},e.prototype.navigatedFromHistory=function(){return m().navigatedFromHistory},e.prototype.registerBackNavigationHandler=function(e){return f.registerBackNavigationHandler(e)},e.prototype.unregisterBackNavigationHandler=function(e){f.unregisterBackNavigationHandler(e)},e.prototype.getTransitionObject=function(e,t){return void 0===t&&(t=null),d.createTransition(e,t)},e}();t.Navigation=b;!function(e){function t(e,t){u.log(e,t)}function n(e,t,n){u.error(e,t,n)}e.log=t,e.error=n}(t.Logger||(t.Logger={}));var E=function(){function e(e){this._model=e}return Object.defineProperty(e,"ActiveScreenCssClass",{get:function(){return"active-screen"},enumerable:!0,configurable:!0}),e.prototype.getCurrentScreenRootElement=function(){return document.querySelector("."+e.ActiveScreenCssClass)},e.prototype.render=function(){return new Promise(function(e){requestAnimationFrame(function(){setTimeout(e,1)})})},e.prototype.wasCurrentViewRestoredFromCache=function(){return!!this._model&&this._model.context.viewWasRestoredFromCache},e.prototype.registerDeviceClassGetter=function(e){h.register("DeviceHelperClassProvider",e)},e}();t.View=E;var w=function(){function e(){}return e.getCurrentScreenDefinition=function(){var e=l.BaseViewController.activeScreen;if(e){var t=a.getModuleFromKey(a.getHomeModuleKey());if(t)return a.getScreenDefinitionFromScreenName(t,e.viewName)}return null},e.getCurrentContext=function(){var t=e.getCurrentScreenDefinition();return{applicationKey:a.getApplicationKey()||"",applicationName:a.getApplicationName()||"",moduleKey:a.getHomeModuleKey()||"",moduleName:a.getHomeModuleName()||"",screenKey:t?t.screenKey:"",screenName:t?t.screenName:""}},e}();t.ApplicationContext=w;var D=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isUpgradingVersion",{get:function(){return g("ApplicationLoad.isUpgradingVersion","ApplicationLifecycle.isUpgradingVersion()"),T.isUpgradingVersion()},enumerable:!0,configurable:!0}),e.listen=function(e){g("ApplicationLoad.listen()","ApplicationLifecycle.listen()"),T.listen(e)},e}();t.ApplicationLoad=D}),define("OutSystems/ClientRuntime/PublicApiHelper",["require","exports","./Public","./BuiltinFunctions"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._model=e,this._navigationContext=t}return Object.defineProperty(e.prototype,"BuiltinFunctions",{get:function(){return r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Validation",{get:function(){return this._validation||(this._validation=new n.Validation(this._model)),this._validation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FeedbackMessage",{get:function(){return n.FeedbackMessage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Device",{get:function(){return n.Device},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Security",{get:function(){return n.Security},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ApplicationLifecycle",{get:function(){return n.ApplicationLifecycle},enumerable:!0,
configurable:!0}),Object.defineProperty(e.prototype,"ApplicationContext",{get:function(){return n.ApplicationContext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ApplicationLoad",{get:function(){return n.ApplicationLoad},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Navigation",{get:function(){return this._navigation||(this._navigation=new n.Navigation(this._navigationContext)),this._navigation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Logger",{get:function(){return n.Logger},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"View",{get:function(){return this._view||(this._view=new n.View(this._model)),this._view},enumerable:!0,configurable:!0}),e}();t.PublicApiHelper=i}),define("OutSystems/ClientRuntime/Controller",["require","exports","./Validation","./Logger","./Communication","./Exceptions","./Flow","./ApplicationInfo","./DataTypes","./Navigation","./WidgetNaming","./VersionsManager","./ErrorHandling","./NativeHelper","./PublicApiHelper","./RolesInfo","./DataConversion"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h,g,m){"use strict";function y(e,t){var n=new Map;return e.forEach(function(e,r){var i=t(e);n.set(r,i)}),n}Object.defineProperty(t,"__esModule",{value:!0});var v=function(){},T=function(){function e(e,t){this.controllerClass=e,this.messagesProvider=t}return e.prototype.create=function(e,t){return new this.controllerClass(e,this.messagesProvider,t)},e.executeWithNavigationCallbacks=function(e,t,n){c.setNavigationCallbacks(t);var r=function(){t.dispose(n),c.removeNavigationCallbacks()};return a.tryFinally(e,r)},e.prototype.initialize=function(t,n,r,i,a){return __awaiter(this,void 0,void 0,function(){var s,u,c,f,p,m,y,v;return __generator(this,function(T){switch(T.label){case 0:s=x.activeScreen,u=s?s.callContext():r.callContext(),T.label=1;case 1:return T.trys.push([1,4,,5]),0===g.getUserId()||g.areRolesDefined()?[3,3]:[4,new Promise(function(e){new h.PublicApiHelper(null,null).ApplicationLifecycle.listen({onLoadComplete:e})})];case 2:T.sent(),T.label=3;case 3:return this.controllerClass.checkPermissions(),[3,5];case 4:return c=T.sent(),f={permissionsOk:!1},[2,e.executeWithNavigationCallbacks(function(){return r.handleError(c,u)},i,u).then(function(){return f},function(e){return f})];case 5:return p=n.create(t),m=this.create(p,new l.WidgetIdService(null)),m.setAsActiveScreen(),y=e.executeWithNavigationCallbacks(function(){return m.fireInitialize()},a,m.callContext()),v={permissionsOk:!0,controller:m,model:p},[2,y.then(function(){return v},function(e){return o.isInstanceOf(e,o.Exceptions.UnhandledOrIgnoredErrorInEventException)&&e.handleErrorResult===d.UNHANDLED_ERROR_RESULT?{permissionsOk:!0}:v})]}})})},Object.defineProperty(e.prototype,"activeScreenController",{get:function(){return x.activeScreen},enumerable:!0,configurable:!0}),e}();t.ControllerFactory=T;var b=function(){function e(){this._iterationContext=new E,this._id=++e.currentId}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewName",{get:function(){return this._viewName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeout",{get:function(){return this._timeout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iterationContext",{get:function(){return this._iterationContext},set:function(e){this._iterationContext=e},enumerable:!0,configurable:!0}),e.prototype.withViewName=function(e){return this._viewName!==e?this.innerClone({_viewName:{value:e}}):this},e.prototype.withTimeout=function(e){return this._timeout!==e?this.innerClone({_timeout:{value:e}}):this},e.prototype.clone=function(){var t=this.innerClone();return t._id=++e.currentId,t},e.prototype.innerClone=function(e){var t=Object.create(this,e);return t.iterationContext=this.iterationContext.clone(),t},Object.defineProperty(e.prototype,"isOutOfContext",{get:function(){return!!x.activeScreen&&this.viewName!==x.activeScreen.viewName},enumerable:!0,configurable:!0}),e.currentId=0,e}();t.CallContext=b;var E=function(){function e(){}return e.prototype.getCurrentRowNumber=function(e){var t=this.getIterator(e);return t?t.currentRowNumber:0},e.prototype.setCurrentRowNumber=function(e,t){this.getIteratorForSet(e).currentRowNumber=t},e.prototype.isBeingIterated=function(e){var t=this.getIterator(e);return!!t&&t.isBeingIterated},e.prototype.registerIterationStart=function(e){var t=this.getIteratorForSet(e);if(t.isBeingIterated)throw new Error("List is already being iterated in this context");t.currentRowNumber=e.length-1,t.isBeingIterated=!0},e.prototype.registerIterationEnd=function(e){var t=this.getIteratorForSet(e);if(!t.isBeingIterated)throw new Error("List was redefined while being iterated");t.isBeingIterated=!1},e.prototype.getIterator=function(e){return this.iterators?this.iterators.get(e.modelId):null},e.prototype.getIteratorForSet=function(e){this.iterators||(this.iterators=new Map);var t=this.getIterator(e);return t||(t={currentRowNumber:0,isBeingIterated:!1},this.iterators.set(e.modelId,t)),t},e.prototype.clone=function(){var t=new e;return this.iterators&&(t.iterators=y(this.iterators,function(e){return Object.create(e)})),t},e}();t.IterationContext=E;var w=new u.RecordTypeFactory,D=new u.ComplexTypeKeyedTypeFactory("Data","dataOut"),I=new u.ComplexTypeKeyedTypeFactory("List","listOut",[{name:"Count",attrName:"countOut",mandatory:!0,dataType:u.DataTypes.LongInteger,defaultValue:function(){return u.LongInteger.defaultValue}}]),S=function(){function e(){this.isExecutingJSNode=!1}return Object.defineProperty(e.prototype,"publicApiHelper",{get:function(){return this._publicApiHelper||(this._publicApiHelper=this.createPublicApiHelper()),this._publicApiHelper},enumerable:!0,configurable:!0}),e.prototype.getDefaultTimeout=function(){throw new Error("Controllers must implement getDefaultTimeout")},e.prototype.createPublicApiHelper=function(){return new h.PublicApiHelper(null,this.callContext())},Object.defineProperty(e.prototype,"default",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controller",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.callContext=function(e){return void 0===e&&(e=new b),e},e.prototype.safeExecuteJSNode=function(e,t,n,r,i,a,s,u){void 0===u&&(u=!1);var c=function(e){var r="Check the JavaScript node '"+t+"' of the action '"+n+"'.";throw e=e||new Error(r),(e instanceof o.Exceptions.NumberOverflowException||e instanceof o.Exceptions.InvalidJavascriptType)&&(e.message=e.message+" "+r),e},l=this.isExecutingJSNode,f=(r?[r]:[]).concat(a,s,this.publicApiHelper);e=e.bind.apply(e,[null].concat(f));try{if(this.isExecutingJSNode=!0,u)return e().then(function(){return i(r)}).catch(c);try{return e(),i(r)}catch(e){c(e)}}finally{this.isExecutingJSNode=l}},e.prototype.safeExecuteAsyncJSNode=function(e,t,n,r,i,o,a){return this.safeExecuteJSNode(e,t,n,r,i,o,a,!0)},e.prototype.executeActionInsideJSNode=function(e,t,n,r){void 0===n&&(n=v),void 0===r&&(r=v);var i=function(e){if(!d.ignoreError(e,t))throw e};try{var o=e(t);return o instanceof Promise?o.then(function(e){return r(),n(e)}).catch(function(e){r(),i(e)}):n(o)}catch(e){i(e)}finally{this.isExecutingJSNode||r()}},e.prototype.getInitialPayloadObject=function(e,t){return{versionInfo:{moduleVersion:f.default.getLastApplicationVersionToken(!0),apiVersion:t},viewName:e.viewName?e.viewName:"*"}},e.prototype.getEffectiveTimeoutForServerCall=function(e){return s.getApplicationDefaultTimeout()||e||this.getDefaultTimeout()},e.prototype.callServerAction=function(t,n,o,a,u,c,l){var f=this.getEffectiveTimeoutForServerCall(u.timeout),d=this.getInitialPayloadObject(u,o);d.inputParameters=a;var p="The timeout of "+f+"s was reached while executing this server action.",h=function(){r.trace(t,p)};return i.post(n,d,s.getHomeModuleName(),f,h,e.createPostResponseHandler(l),void 0,void 0,c).then(function(e){return e||{}}).catch(function(e){throw e.extraStack=t,e})},e.checkPermissions=function(){throw new Error("Screen Controllers must implement checkPermissions")},e.handlePostResponse=function(e){e.rolesInfo&&g.storeRoleInformation(e.rolesInfo)},e.createPostResponseHandler=function(t){return function(n,r){e.handlePostResponse(n),t&&t(n,r)}},e.prototype.executeClientAggregate=function(e,t){return a.executeSequence(function(){return e()}).then(function(e){var n=t();n.listOut=e.list,n.countOut=e.count})},e.prototype.ensureControllerAlive=function(e){},e.getJSONDeserializeOutputType=function(e){return D.getType(e)},e.getAggregateOutputType=function(e){return I.getType(e)},e.registerVariableGroupType=function(e,t){w.registerTypeDefinition(e,t)},e.getVariableGroupType=function(e){return w.getType(e)},e}();t.BaseController=S;var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fireApplicationResumeSingletonCallback=t.fireApplicationResume.bind(t),t}return __extends(t,e),t.prototype.registerEventHandler=function(e,t,n){var r=this;n(function(){return new Promise(function(t,n){requirejs([e],t,n)}).then(function(){var e=r[t],i=function(){return Promise.resolve().then(function(){return e.call(r)})};return n(i),i()})})},t.prototype.registerOnApplicationReadyHandler=function(e,t){var n=this;this.registerEventHandler(e,t,function(e){return n.onApplicationReadyHandler=e})},t.prototype.registerOnApplicationResumeHandler=function(e,t){var n=this;this.registerEventHandler(e,t,function(e){return n.onApplicationResumeHandler=e})},t.prototype.fireApplicationReady=function(){var e=this;return this.onApplicationReadyHandler?this.onApplicationReadyHandler().then(function(){return e.setupOnApplicationResumeListener()}):(this.setupOnApplicationResumeListener(),Promise.resolve())},t.prototype.setupOnApplicationResumeListener=function(){this.onApplicationResumeHandler&&p.addNativeEventListener("resume",this.fireApplicationResumeSingletonCallback)},t.prototype.fireApplicationResume=function(){return this.onApplicationResumeHandler?this.onApplicationResumeHandler():Promise.resolve()},t}(S);t.BaseModuleController=A;var x=function(e){function t(r,i,o){var a=e.call(this)||this;return a.model=r,a.messagesProvider=i,a._idService=o,a.instanceId=t.globalInstanceId++,a.isDisposed=!1,a.validationServiceInstance=new n.ValidationService(r,i),a}return __extends(t,e),t.prototype.fireEvent=function(e){var t=this;return a.executeSequence(function(){if(e)return e.call(t,t.callContext())}).then(function(e){if(d.isSpecialHandleErrorResult(e))throw o.Exceptions.UnhandledOrIgnoredErrorInEventException.create(e)})},t.prototype.fireEventAndForget=function(e){this.fireEvent(e).catch(o.Exceptions.UnhandledOrIgnoredErrorInEventException.ignore)},t.prototype.createPublicApiHelper=function(){return new h.PublicApiHelper(this.model,this.callContext())},Object.defineProperty(t,"activeScreen",{get:function(){return t.activeScreenInstance},enumerable:!0,configurable:!0}),t.prototype.setAsActiveScreen=function(){t.activeScreenInstance=this},t.prototype.callContext=function(t){return e.prototype.callContext.call(this,t).withViewName(this.viewName)},Object.defineProperty(t.prototype,"validationService",{get:function(){return this.validationServiceInstance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewName",{get:function(){return this.modelContext?this.modelContext.viewName:void 0},enumerable:!0,configurable:!0}),t.prototype.fetchData=function(){this.innerFetchData()&&this.model.flush()},t.prototype.innerFetchData=function(){var e=this;if(!this.dataFetchActionNames||0===this.dataFetchActionNames.length)return!1;var t=0,n=this.dataFetchActionNames.length;return this.dataFetchActionNames.forEach(function(i){r.trace(e,"Fetching "+i),a.executeSequence(function(){return e[i]()}).then(function(){n--,clearTimeout(t),r.trace(e,"Fetched "+i),n>0?t=setTimeout(function(){return e.model.flush()},50):e.model.flush()},function(t){n--,e.model.flush(),e.handleError(t)})}),!0},Object.defineProperty(t.prototype,"idService",{get:function(){return this._idService},enumerable:!0,configurable:!0}),t.prototype.fireInitialize=function(){var e=this;return this.fireEvent(this.onInitializeEventHandler).then(function(){return e.fetchData()})},t.prototype.fireAfterViewReady=function(){var e=this;this.fireEvent(this.onReadyEventHandler).then(function(){return e.fireEvent(e.onRenderEventHandler)}).catch(o.Exceptions.UnhandledOrIgnoredErrorInEventException.ignore)},t.prototype.fireAfterInputsChanged=function(){this.fireEventAndForget(this.onParametersChangedEventHandler)},t.prototype.fireAfterViewRender=function(e){var t=this;void 0===e&&(e=!1),this.onRenderEventHandler&&this.fireEventAndForget(function(n){return e?void r.error("View","Render loop avoided. This is likely due to the model of the screen/block '"+t.viewName+"' being changed inside its 'On Render' client action. Avoid changes to the model inside 'On Render' client actions."):t.onRenderEventHandler(n)})},t.prototype.fireAfterViewDestroy=function(){this.fireEventAndForget(this.onDestroyEventHandler)},t.prototype.registerClientAction=function(e,t){this[e]=t},t.prototype.callAggregate=function(e,t,n,r,i,o,a,s,u){var c=this.getEffectiveTimeoutForServerCall(a);return this.callServerDataSource(e,t,n,i,o,function(e){e.inputParameters={MaxRecords:r}},c,s,u)},t.prototype.callDataAction=function(e,t,n,r,i,o,a,s){var u=this.getEffectiveTimeoutForServerCall(o);return this.callServerDataSource(e,t,n,r,i,void 0,u,a,s)},t.prototype.callServerDataSource=function(e,n,u,c,l,f,d,p,h){var g=this;void 0===f&&(f=void 0),void 0===d&&(d=0);var y=this.getInitialPayloadObject(this.callContext(),u);y.screenData={variables:m.ServerDataConverter.to(this.model.variables)},f&&f(y),c(0);var v=function(){r.trace(e,"The timeout of "+d+"s was reached while fetching this screen data.")};return a.promise(function(e,r){i.post(n,y,s.getHomeModuleName(),d,v,t.createPostResponseHandler(h),!0,g.instanceId,p).then(function(t){if(!g.isDisposed)return l(t),c(1),e()}).catch(function(e){if(!g.isDisposed)return o.isInstanceOf(e,o.Exceptions.ViewHasChangedException)||c(2),r(e)})})},t.prototype.handleError=function(e){throw new Error("@abstract")},t.prototype.safeExecuteAsyncJSNode=function(t,n,r,i,o,a,s){return this.model.flush(),e.prototype.safeExecuteAsyncJSNode.call(this,t,n,r,i,o,a,s)},t.prototype.executeActionInsideJSNode=function(t,n,r,i){var o=this;return void 0===r&&(r=v),void 0===i&&(i=v),e.prototype.executeActionInsideJSNode.call(this,t,n,r,function(){i(),o.model.flush()})},t.prototype.dispose=function(){this.validationService.dispose(),this.isDisposed=!0},t.prototype.ensureControllerAlive=function(e){if(this.isDisposed){var t=new o.Exceptions.ControllerDisposedException("Invalid call of the '"+e+"' client action of the '"+this.viewName+"' since the latter is not currently active. This is likely due to a platform's client action being used as an event handler or in a setTimeout function. Consider removing this call by using the 'On Destroy' event of the screen/block or moving your logic to a global client action.");throw r.error("Controller",t),t}},t.prototype.safeExecuteClientAction=function(e,t){for(var n=this,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return a.tryCatchFinally(function(){return e.apply(n,r.concat(n.callContext(t)))},function(e){return n.handleError(e)},function(){return n.model.flush()})},Object.defineProperty(t.prototype,"modelContext",{get:function(){return this.model.context},enumerable:!0,configurable:!0}),t.prototype.executeScreenClientAggregate=function(e,t,n){var r=this;return a.executeSequence(function(){return t().dataFetchStatusAttr=0,e()}).then(function(e){if(!r.isDisposed)return t().bulkSet(e.list,1,e.count),a.executeSequence(n)},function(e){if(!r.isDisposed)throw t().dataFetchStatusAttr=2,e})},t.globalInstanceId=0,t}(S);t.BaseViewController=x}),define("OutSystems/ClientRuntime/CSSHelper",["require","exports","./Logger"],function(e,t,n){"use strict";function r(e,t){return t&&(e.classList?e.classList.add(t):a(e,t)||(e.className=e.className+" "+t)),e}function i(e,t){return t&&(e.classList?e.classList.remove(t):a(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e}function o(e,t,n){return(n?r:i)(e,t)}function a(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function s(e,t){if(0===e.length)return{loadStylesPromise:Promise.resolve(),triggerRemoveStyles:function(){}};var n=document.head||document.querySelector("head"),r=[].slice.call(document.querySelectorAll("link[data-os]")||[]).reverse(),i=[],o=[],a=[],s=void 0,f=0;e:for(var p=0,h=e.reverse();p<h.length;p++){for(var g=h[p],m=f;m<r.length;m++){var y=r[m];if(y.id===g){s=y,o.push(y),f=m+1;continue e}}var v=l(g,i,t);a.push({beforeElement:s,element:v}),s=v}u("Adding",a);for(var T=0,b=a;T<b.length;T++){var E=b[T],w=E.beforeElement,D=E.element;c("Adding",D.id),w?n.insertBefore(D,w):n.appendChild(D)}d+=1;var I=d,S=function(){if(d===I){u("Retaining",o);for(var e=0,t=o;e<t.length;e++){c("Retaining",t[e].id)}for(var n=0,i=r;n<i.length;n++){var a=i[n];a.parentNode&&-1===o.indexOf(a)&&(c("Removing",a.id),a.parentNode.removeChild(a))}}};return{loadStylesPromise:Promise.all(i),triggerRemoveStyles:S}}function u(e,t){n.trace(f,e+" "+t.length+" stylesheets : document '"+document.baseURI+"':")}function c(e,t){n.trace(f,e+" stylesheet '"+t+"' : document '"+document.baseURI+"'")}function l(e,t,r){n.trace(f,"Loading stylesheet '"+e+"'");var i=document.createElement("link");return i.type="text/css",i.rel="stylesheet",i.id=e,i.href=e,i.setAttribute("data-os","true"),t.push(new Promise(function(t){i.onerror=i.onabort=function(n){r("Error loading stylesheet: "+e),t(n)},i.onload=t})),i}Object.defineProperty(t,"__esModule",{value:!0});var f="CSSHelper";t.addClass=r,t.removeClass=i,t.conditionClass=o,t.hasClass=a;var d=0;t.scheduleCSSPreparation=s}),define("OutSystems/ClientRuntime/ErrorScreen",["require","exports","./Logger","./Navigation","./ErrorHandling","./Exceptions"],function(e,t,n,r,i,o){"use strict";function a(e,t){return Promise.resolve().then(function(){return t.initialize(e,1).then(function(){s(e.errorPageConfig);var r="";try{var o=i.ErrorHandlingStorage.errorPageExceptionInfo.get();o&&(r=" "+o.message)}catch(e){}if(n.error("ErrorScreen","[ErrorScreen]"+r),!n.hadSessionLogs())return t.initializeDatabase().then(function(){n.flushLogsToServer()})}).catch(function(e){console.error(e)})})}function s(e){var t=i.ErrorHandlingStorage.errorPageMessage.get(),n=i.ErrorHandlingStorage.errorPageExtraMessage.get(),r=i.ErrorHandlingStorage.errorPageExceptionInfo.get();if(r){var a=r.message,s=o.getStack(r);if(s&&(a+="\n"+s),console.error(a),"undefined"!=typeof document&&document.querySelector&&(document.querySelector(T).innerHTML=r.message,document.querySelector(b).innerHTML=s,document.querySelector(v).addEventListener("click",function(){return c()}),e&&e.showExceptionStack)){document.querySelector(y).style.display="block"}}if("undefined"!=typeof document&&document.querySelector){var m=e&&e.messages&&e.messages.defaultMessage,E=e&&e.extraMessage;document.querySelector(p).innerHTML=t||m||l,document.querySelector(h).innerHTML=n||E||f,document.querySelector(g).innerHTML=e&&e.reloadLabel||d,document.querySelector(g).addEventListener("click",function(){return u()})}}function u(){if("undefined"!=typeof document&&document.querySelector){document.querySelector(g).style.display="none";document.querySelector(m).style.display="inline-block"}setTimeout(function(){r.reloadApplication()},2e3)}function c(){if("undefined"!=typeof document&&document.querySelector){var e=document.querySelector(v),t=document.querySelector(E);t.hidden?(e.innerHTML="Hide Detail",t.hidden=!1):(e.innerHTML="Show Detail",t.hidden=!0)}}Object.defineProperty(t,"__esModule",{value:!0});var l="There was an error processing your request.",f="",d="RELOAD",p="#error-screen-message-text",h="#error-screen-message-text-extra",g="#error-screen-message-reload-button",m="#error-screen-spinner",y="#exception-detail",v="#error-screen-show-detail-button",T="#error-screen-exception-message",b="#error-screen-exception-stack",E="#exception-detail-text";t.initializeErrorPage=a}),define("OutSystems/ClientRuntime/Interfaces",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){!function(e){e[e.Full=0]="Full",e[e.Minimal=1]="Minimal"}(e.InitializationType||(e.InitializationType={}))}(t.Application||(t.Application={}));!function(e){!function(e){e[e.No=0]="No",e[e.Yes=1]="Yes",e[e.YesIfEmpty=2]="YesIfEmpty"}(e.AutoNumber||(e.AutoNumber={}));!function(e){e[e.TEXT=0]="TEXT",e[e.BINARY_DATA=1]="BINARY_DATA",e[e.BOOLEAN=2]="BOOLEAN",e[e.INTEGER=3]="INTEGER",e[e.LONGINTEGER=4]="LONGINTEGER",e[e.DECIMAL=5]="DECIMAL",e[e.DATE_TIME=6]="DATE_TIME",e[e.DATE=7]="DATE",e[e.TIME=8]="TIME",e[e.UNKNOWN=9]="UNKNOWN"}(e.DBDataType||(e.DBDataType={}))}(t.ClientDB||(t.ClientDB={}));!function(e){!function(e){e[e.Fetching=0]="Fetching",e[e.Fetched=1]="Fetched",e[e.Error=2]="Error"}(e.DataFetchStatus||(e.DataFetchStatus={}))}(t.Model||(t.Model={}));!function(e){!function(e){e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(e.FeedbackMessageType||(e.FeedbackMessageType={}))}(t.FeedbackMessage||(t.FeedbackMessage={}))}),define("OutSystems/ClientRuntime/LanguageResources",["require","exports","./DataTypes"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.messages={}}return e.prototype.getMandatoryValueMessage=function(){return this.getMessage("Validation.Mandatory","Required Value!")},e.prototype.getInvalidValueMessage=function(e){return this.getMessage("Validation."+n.DataTypes[e],"Invalid Value!")},e.prototype.getApplicationUpgradeCompleteMessage=function(){return this.getMessage("UpgradeComplete","Your application has been updated to the latest version.")},e.prototype.getApplicationUpgradeRequiredMessage=function(e){return e?this.getMessage("UpgradeRequiredDataLoss","Your application needs to be updated. Unsaved data will be lost. Tap here to update."):this.getMessage("UpgradeRequired","Your application needs to be updated. Tap here to update.")},e.prototype.getApplicationUpgradeFailedOnResourcesMessage=function(){return this.getMessage("AppInitError.Resources","An error occurred while trying to update the app. If you want to retry the update, restart the app.")},e.prototype.getApplicationUpgradeFailedOnDataModelMessage=function(){return this.getMessage("AppInitError.DataModel","An error occurred while trying to update the app. If you want to retry the update, restart the app. If the problem persists you can reinstall, but all local data will be lost.")},e.prototype.getApplicationUpgradeFailedUnknownMessage=function(){return this.getMessage("AppInitError.Generic","An error occurred while trying to update the app. If you want to retry the update, restart the app.")},e.prototype.getMessage=function(e,t){var n=this.messages[e];return n||t},e.prototype.setMessage=function(e,t){this.messages[e]=t},e}();t.BaseMessagesProvider=r}),define("OutSystems/ClientRuntime/Model",["require","exports","./DataTypes","./DataConversion","./Logger","./WidgetNaming"],function(e,t,n,r,i,o){"use strict";function a(e){return{idAttr:e.get(u),nameAttr:e.get(c),validAttr:e.get(l),validationMessageAttr:e.get(f)}}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=1,r=0,i=e;r<i.length;r++){switch(i[r]){case 2:return 2;case 0:n=0}}return n}Object.defineProperty(t,"__esModule",{value:!0});var u="idAttr",c="nameAttr",l="validAttr",f="validationMessageAttr",d=function(){function e(e,t,n,r){this.type=e,this._value=t,this.setter=n,this.model=r}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){var t=r.JSConversions.convertTo(e,this.type);this.setter(t),this.model.flush()},enumerable:!0,configurable:!0}),e.prototype.isAcceptable=function(e){return r.JSConversions.isConvertibleTo(e,this.type)},e.prototype.fastEquals=function(e){return e&&this.constructor===e.constructor&&this.value===e.value},e.prototype.equals=function(e){return e&&this.constructor===e.constructor&&n.equals(this.value,e.value)},e}();t.Variable=d;var p=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),Object.defineProperty(t.prototype,"idAttr",{get:function(){return this.getBasicProperty(u)},set:function(e){this.setBasicProperty(u,e,n.DataTypes.Text)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nameAttr",{get:function(){return this.getBasicProperty(c)},set:function(e){this.setBasicProperty(c,e,n.DataTypes.Text)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"generationNode",{get:function(){return this.getBasicProperty(t.WidgetGenerationNodeAttributeName)},set:function(e){this.setBasicProperty(t.WidgetGenerationNodeAttributeName,e,n.DataTypes.Object)},enumerable:!0,configurable:!0}),t.prototype.asReadOnly=function(){return{idAttr:this.idAttr,nameAttr:this.nameAttr}},t.prototype.refreshGeneration=function(){this.generationNode&&(this.generationNode.generation=D.currentGeneration)},t.WidgetGenerationNodeAttributeName="widgetGenerationNode",t.RecordClass=n.Record.defineRecordClass({idAttr:"",nameAttr:"",widgetGenerationNode:null}),t}(n.Record);t.WidgetRecord=p;var h=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),Object.defineProperty(t.prototype,"validAttr",{get:function(){return this.getBasicProperty(l)},set:function(e){this.setBasicProperty(l,e,n.DataTypes.Boolean)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validationMessageAttr",{get:function(){return this.getBasicProperty(f)},set:function(e){this.setBasicProperty(f,e,n.DataTypes.Text)},enumerable:!0,configurable:!0}),t.prototype.onPropertyValueChanged=function(e){e!==l&&e!==f||this.refreshGeneration()},t.prototype.asReadOnly=function(){return a(this.data)},t.RecordClass=function(){var e=(new p.RecordClass).toJS();return e.validAttr=!0,e.validationMessageAttr="",n.Record.defineRecordClass(e)}(),t}(p);t.ValidationWidgetRecord=h;var g=function(e){function t(n){var r=e.call(this,n)||this;return r.widgetsIdToRecord=r.data.get(t.WidgetRecordsAttribute),r.widgetsIdToRecordDataCache=r.data.get(t.WidgetRecordsDataCacheAttribute),r}return __extends(t,e),t.createDefaultData=function(){return new t.RecordClass({records:new Map,recordsCache:new Map})},t.getWidgetsType=function(){return{}},t.prototype.getWidgetsType=function(){return this.constructor.getWidgetsType()},t.prototype.getWidgetRecordType=function(e){return this.getWidgetsType()[e]||p},t.prototype.get=function(e){var t=this.widgetsIdToRecord.get(e);return t||(t=this.create(e),this.add(t),t)},t.prototype.set=function(e,t){this.widgetsIdToRecord.set(e,t),this.widgetsIdToRecordDataCache.delete(e),this.writePropagate(this.data,null)},t.prototype.internalSet=function(e,t){this.widgetsIdToRecord.delete(e),this.widgetsIdToRecordDataCache.set(e,t),this.writePropagate(this.data,null)},t.prototype.create=function(e){var t=o.WidgetIdService.nameFromId(e),n=this.getWidgetRecordType(t),r=this.widgetsIdToRecordDataCache.get(e),i=new n(r);return i.idAttr=e,i.nameAttr=t,i},t.prototype.add=function(e){t.setPropagationHandler(e,this,e.idAttr,this.internalSet),this.widgetsIdToRecordDataCache.delete(e.idAttr),this.widgetsIdToRecord.set(e.idAttr,e)},t.prototype.remove=function(e){this.widgetsIdToRecord.delete(e),this.widgetsIdToRecordDataCache.delete(e),this.writePropagate(this.data,null)},t.WidgetRecordsAttribute="records",t.WidgetRecordsDataCacheAttribute="recordsCache",t.RecordClass=n.Record.defineRecordClass({records:null,recordsCache:null}),t}(n.Record);t.BaseWidgetRecordMap=g;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"dataFetchStatusAttr",{get:function(){return this.getBasicProperty(t.DataFetchStatusAttributeName)},set:function(e){this.setBasicProperty(t.DataFetchStatusAttributeName,e,n.DataTypes.Integer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDataFetchedAttr",{get:function(){return 1===this.dataFetchStatusAttr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasFetchErrorAttr",{get:function(){return 2===this.dataFetchStatusAttr},enumerable:!0,configurable:!0}),t.attributesToDeclare=function(){return[n.GenericRecord.attr("DataFetchStatus",t.DataFetchStatusAttributeName,"",!0,!0,n.DataTypes.Integer,function(){return 0})].concat(e.attributesToDeclare.call(this))},t.prototype.replaceWith=function(e){var t=new this.constructor(n.Record.getData(e));t.dataFetchStatusAttr=this.dataFetchStatusAttr,this.writePropagate(n.Record.getData(t),new n.Cache)},t.DataFetchStatusAttributeName="dataFetchStatusAttr",t}(n.GenericRecord);t.DataSourceRecord=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"listOut",{get:function(){return this.getComplexProperty(t.ListOutAttributeName,this.getRecordListType())},set:function(e){this.setComplexProperty(t.ListOutAttributeName,e,n.DataTypes.RecordList,this.getRecordListType())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"countOut",{get:function(){return this.getBasicProperty(t.CountOutAttributeName)},set:function(e){this.setBasicProperty(t.CountOutAttributeName,e,n.DataTypes.LongInteger)},enumerable:!0,configurable:!0}),t.prototype.bulkSet=function(e,n,r){var i=[{name:t.ListOutAttributeName,value:e,isBasicType:!1},{name:m.DataFetchStatusAttributeName,value:n,isBasicType:!0}];void 0!==r&&i.push({name:t.CountOutAttributeName,value:r,isBasicType:!0}),this.setProperties(i)},t.prototype.getRecordListType=function(){return this.constructor.RecordListType},t.attributesToDeclare=function(){return[n.GenericRecord.attr("List",t.ListOutAttributeName,"List",!0,!0,n.DataTypes.RecordList,function(){return!1},this.RecordListType),n.GenericRecord.attr("Count",t.CountOutAttributeName,"Count",!0,!0,n.DataTypes.LongInteger,function(){return n.LongInteger.defaultValue})].concat(e.attributesToDeclare.call(this))},t.init=function(){if(!this.RecordListType)throw new TypeError("AggregateRecords must define a RecordListType");e.init.call(this)},t.ListOutAttributeName="listOut",t.CountOutAttributeName="countOut",t}(m);t.AggregateRecord=y;var v=function(e){function t(t){var n=e.call(this)||this;return n._context=t,n.writeSubscriptions=[],n.cachedValues={},n.modified=!1,n.hasVariables&&n.variables,n.hasValidationWidgets&&n.widgets,n}return __extends(t,e),t.createDefaultData=function(){var e=this.newVariablesRecord(),r=this.newWidgetsRecord();return new t.RecordClass({variables:n.Record.getData(e),widgets:n.Record.getData(r)})},t.prototype.onDefaultWritePropagate=function(t){e.prototype.onDefaultWritePropagate.call(this,t),this.modified=!0,this.innerFlush(!0)},t.prototype.cloneCache=function(){return this.cache},Object.defineProperty(t.prototype,"isModified",{get:function(){return this.modified},enumerable:!0,configurable:!0}),t.prototype.flush=function(){this.modified&&(this.modified=!1,D.currentGeneration++,this.innerFlush(!1),i.trace(this,"Flushing model"))},t.prototype.innerFlush=function(e){for(var t=0;t<this.writeSubscriptions.length;t++){var n=this.writeSubscriptions[t];n.immediate===e&&n.handler(this)}},t.prototype.subscribeWrites=function(e,t){return void 0===t&&(t=!1),!(!this.hasVariables&&!this.hasValidationWidgets||!e)&&(this.writeSubscriptions.push({handler:e,immediate:t}),!0)},t.prototype.unsubscribeWrites=function(e){if(e){for(var t=-1,n=0,r=this.writeSubscriptions.length;n<r;n++)if(this.writeSubscriptions[n].handler===e){t=n;break}if(t>=0)return this.writeSubscriptions.splice(t,1),!0}return!1},
t.prototype.clearSubscriptions=function(){this.writeSubscriptions=[]},Object.defineProperty(t,"hasVariables",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasVariables",{get:function(){return this.constructor.hasVariables},enumerable:!0,configurable:!0}),t.getVariablesRecordConstructor=function(){throw new Error("@abstract")},t.newVariablesRecord=function(e){return this.hasVariables?new(this.getVariablesRecordConstructor())(e):void 0},t.prototype.getVariables=function(){var e=this.constructor;if(this.hasVariables)return this.getComplexProperty(t.VariablesPropertyName,e.getVariablesRecordConstructor());throw new Error("Model does not contain variables")},Object.defineProperty(t.prototype,"variables",{get:function(){return this.getVariables()},set:function(e){var r=this.constructor;this.setComplexProperty(t.VariablesPropertyName,e,n.DataTypes.Record,r.getVariablesRecordConstructor())},enumerable:!0,configurable:!0}),Object.defineProperty(t,"hasValidationWidgets",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasValidationWidgets",{get:function(){return this.constructor.hasValidationWidgets},enumerable:!0,configurable:!0}),t.getWidgetsRecordConstructor=function(){throw new Error("@abstract")},t.newWidgetsRecord=function(e){return this.hasValidationWidgets?new(this.getWidgetsRecordConstructor())(e):void 0},t.prototype.getWidgets=function(){var e=this.constructor;if(this.hasValidationWidgets)return this.getComplexProperty(t.WidgetsPropertyName,e.getWidgetsRecordConstructor());throw new Error("Model does not contain validation widgets")},Object.defineProperty(t.prototype,"widgets",{get:function(){return this.getWidgets()},set:function(e){this.setComplexProperty(t.WidgetsPropertyName,e,n.DataTypes.Object)},enumerable:!0,configurable:!0}),t.prototype.hasCachedValue=function(e){return this.cachedValues.hasOwnProperty(e)},t.prototype.getCachedValue=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=this.cachedValues[e],a=r.map(function(e,n){try{return e()}catch(e){return t.InvalidValue}});return void 0!==o&&r.length===o.args.length&&a.every(function(e,t){return e===o.args[t]})||(o={args:a,value:n()},this.cachedValues[e]=o),o.value},t.prototype.createVariable=function(e,t,n){return new d(e,t,n,this)},t.prototype.fromOther=function(e){this.fromImmutableData(e.data)},t.prototype.toImmutableData=function(){return this.data},t.prototype.fromImmutableData=function(e){this.data=e,this.writePropagate(this.data,this.cache),this.cache.invalidate()},t.prototype.setInputs=function(e){throw new Error("@abstract")},Object.defineProperty(t.prototype,"widgetsGenerationsTree",{get:function(){return this._widgetsGenerationsTree||(this._widgetsGenerationsTree=new D),this._widgetsGenerationsTree},enumerable:!0,configurable:!0}),t.prototype.getReadOnlyWidgetRecord=function(e){return this.widgets.get(e).asReadOnly()},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),t.prototype.sanitize=function(e){var n=e;if(this.hasVariables){if(e.constructor!==this.data.constructor)throw new Error("Expected data to be the same type of this model data");var r=this.variables.getNonSerializableAttributes();if(r.length>0){var i=n.get(t.VariablesPropertyName);r.forEach(function(e){return i=i.set(e,null)}),n=n.set(t.VariablesPropertyName,i)}}return n},t.VariablesPropertyName="variables",t.WidgetsPropertyName="widgets",t.InvalidValue=new Object,t.RecordClass=n.Record.defineRecordClass({variables:null,widgets:null}),t}(n.Record);t.BaseViewModel=v,t.calculateDataFetchStatus=s;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"hasVariables",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.setInputs=function(){},t}(v);t.VariablelessViewModel=T;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"hasVariables",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"hasValidationWidgets",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.setInputs=function(){},t.create=function(e,n,r){return new t({viewName:e,navigatedFromHistory:n,viewWasRestoredFromCache:r})},t}(v);t.DummyViewModel=b;var E=function(){function e(e){this.modelClass=e}return e.prototype.create=function(e){return this.modelClass.hasVariables||this.modelClass.hasValidationWidgets?new this.modelClass(e):new b(e)},Object.defineProperty(e.prototype,"hasValidationWidgets",{get:function(){return this.modelClass.hasValidationWidgets},enumerable:!0,configurable:!0}),e}();t.ModelFactory=E;var w=function(){function e(e){this._parent=e,this._generation=e?e.generation:0}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"generation",{get:function(){return this._generation},set:function(e){this.generation<e&&(this._generation=e,this.parent&&(this.parent.generation=e))},enumerable:!0,configurable:!0}),e.prototype.addChild=function(){return new e(this)},e}(),D=function(){function e(){this._root=new w(null),this._root.generation=e.currentGeneration,e.currentGeneration++}return Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e,"currentGeneration",{get:function(){return e.generation},set:function(t){e.generation=t},enumerable:!0,configurable:!0}),e.generation=0,e}()});var MapPolyfill=function(){function e(e){var t=this;this.keys=[],this.values=[],e&&e.forEach(function(e,n){t.keys.push(n),t.values.push(e)})}return Object.defineProperty(e.prototype,"size",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this.keys.indexOf(e)>=0},e.prototype.get=function(e){var t=this.keys.indexOf(e);if(!(t<0))return this.values[t]},e.prototype.set=function(e,t){var n=this.keys.indexOf(e);n<0?(this.keys.push(e),this.values.push(t)):this.values[n]=t},e.prototype.delete=function(e){var t=this.keys.indexOf(e);return!(t<0)&&(this.keys.splice(t,1),this.values.splice(t,1),!0)},e.prototype.clear=function(){this.keys=[],this.values=[]},e.prototype.forEach=function(e,t){for(var n=0;n<this.keys.length;n++)e.apply(t,[this.values[n],this.keys[n],this])},e}();"undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)||((window||global||this).Map=MapPolyfill),define("OutSystems/ClientRuntime/Map",function(){}),define("OutSystems/ClientRuntime/Main",["require","exports","./Application","./ApplicationInfo","./Flow","./BuiltinFunctions","./JSONUtils","./SystemActions","./ResourceCache","./Communication","./Controller","./CookiesManager","./CSSHelper","./DataTypes","./ErrorHandling","./ErrorScreen","./EventDispatcher","./FeedbackMessageService","./Format","./Interfaces","./LanguageResources","./LightImmutable","./Logger","./Model","./NativeHelper","./Navigation","./ObjectExtensions","./Public","./Request","./ScriptsManager","./StorageProvider","./Transitions","./TransitionAnimation","./Validation","./VersionsManager","./WidgetNaming","./Entities","./Exceptions","./RegExpHelper","./RolesInfo","./RequireManager","./Performance","./ScreenStateCache","./DataConversion","./Settings","./ClientInfo","./Map"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h,g,m,y,v,T,b,E,w,D,I,S,A,x,_,N,C,O,R,L,M,F,P,V,U,k,j,B,q,H,W,G){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),j.initialize();!function(e){e.Application=n,e.ApplicationInfo=r,e.Flow=i,e.BuiltinFunctions=o,e.JSONUtils=a,e.SystemActions=s,e.ResourceCache=u,e.Communication=c,e.Controller=l,e.CookiesManager=f,e.CSSHelper=d,e.DataTypes=p,e.ErrorHandling=h,e.ErrorScreen=g,e.EventDispatcher=m,e.FeedbackMessageService=y,e.Format=v,e.Interfaces=T,e.LanguageResources=b,e.LightImmutable=E,e.Logger=w,e.Model=D,e.NativeHelper=I,e.Navigation=S,e.ObjectExtensions=A,e.Request=_,e.ScriptsManager=N,e.StorageProvider=C,e.TransitionAnimation=R,e.Transitions=O,e.Validation=L,e.VersionsManager=M,e.WidgetNaming=F,e.Entities=P,e.Exceptions=V,e.RegExpHelper=U,e.RolesInfo=k,e.Performance=B,e.ScreenStateCache=q,e.DataConversion=H,e.Settings=W,e.ClientInfo=G,e.Types=e.DataTypes.DataTypes}(t.Internal||(t.Internal={})),t.Public=x});var __extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator;!function(e){var t="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof global?global:Function("return this;")();!function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};__extends=function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n},__decorate=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__param=function(e,t){return function(n,r){t(n,r,e)}},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},__generator=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return{next:n(0),throw:n(1),return:n(2)}},e("__extends",__extends),e("__assign",__assign),e("__rest",__rest),e("__decorate",__decorate),e("__param",__param),e("__metadata",__metadata),e("__awaiter",__awaiter),e("__generator",__generator)}(function(e,t){return function(n,r){return e[n]=t?t(n,r):r}}(t))}(),define("Common",function(){}),function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function r(e){V=e}function i(e){B=e}function o(){return function(){P(s)}}function a(){return function(){setTimeout(s,1)}}function s(){for(var e=0;e<j;e+=2){(0,z[e])(z[e+1]),z[e]=void 0,z[e+1]=void 0}j=0}function u(){}function c(){return new TypeError("You cannot resolve a promise with itself")}function l(){return new TypeError("A promises callback cannot return that same promise.")}function f(e){try{return e.then}catch(e){return X.error=e,X}}function d(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function p(e,t,n){B(function(e){var r=!1,i=d(n,t,function(n){r||(r=!0,t!==n?m(e,n):v(e,n))},function(t){r||(r=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,T(e,i))},e)}function h(e,t){t._state===Q?v(e,t._result):t._state===Y?T(e,t._result):b(t,void 0,function(t){m(e,t)},function(t){T(e,t)})}function g(e,n){if(n.constructor===e.constructor)h(e,n);else{var r=f(n);r===X?T(e,X.error):void 0===r?v(e,n):t(r)?p(e,n,r):v(e,n)}}function m(t,n){t===n?T(t,c()):e(n)?g(t,n):v(t,n)}function y(e){e._onerror&&e._onerror(e._result),E(e)}function v(e,t){e._state===K&&(e._result=t,e._state=Q,0!==e._subscribers.length&&B(E,e))}function T(e,t){e._state===K&&(e._state=Y,e._result=t,B(y,e))}function b(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+Q]=n,i[o+Y]=r,0===o&&e._state&&B(E,e)}function E(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function w(){this.error=null}function D(e,t){try{return e(t)}catch(e){return Z.error=e,Z}}function I(e,n,r,i){var o,a,s,u,c=t(r);if(c){if(o=D(r,i),o===Z?(u=!0,a=o.error,o=null):s=!0,n===o)return void T(n,l())}else o=i,s=!0;n._state!==K||(c&&s?m(n,o):u?T(n,a):e===Q?v(n,o):e===Y&&T(n,o))}function S(e,t){try{t(function(t){m(e,t)},function(t){T(e,t)})}catch(t){T(e,t)}}function A(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(u),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?v(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&v(n.promise,n._result))):T(n.promise,n._validationError())}function x(e){return new $(this,e).promise}function _(e){function t(e){m(i,e)}function n(e){T(i,e)}var r=this,i=new r(u);if(!k(e))return T(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===K&&a<o;a++)b(r.resolve(e[a]),void 0,t,n);return i}function N(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(u);return m(n,e),n}function C(e){var t=this,n=new t(u);return T(n,e),n}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function R(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(e){this._id=ie++,this._state=void 0,this._result=void 0,this._subscribers=[],u!==e&&(t(e)||O(),this instanceof L||R(),S(this,e))}function M(){var e;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=oe)}var F;F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var P,V,U,k=F,j=0,B=function(e,t){z[j]=e,z[j+1]=t,2===(j+=2)&&(V?V(s):U())},q="undefined"!=typeof window?window:void 0,H=q||{},W=H.MutationObserver||H.WebKitMutationObserver,G="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,z=new Array(1e3);U=G?function(){var e=process.nextTick,t=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=setImmediate),function(){e(s)}}():W?function(){var e=0,t=new W(s),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():J?function(){var e=new MessageChannel;return e.port1.onmessage=s,function(){e.port2.postMessage(0)}}():void 0===q&&"function"==typeof require?function(){try{var e=require,t=e("vertx");return P=t.runOnLoop||t.runOnContext,o()}catch(e){return a()}}():a();var K=void 0,Q=1,Y=2,X=new w,Z=new w;A.prototype._validateInput=function(e){return k(e)},A.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},A.prototype._init=function(){this._result=new Array(this.length)};var $=A;A.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,i=0;n._state===K&&i<t;i++)e._eachEntry(r[i],i)},A.prototype._eachEntry=function(e,t){var r=this,i=r._instanceConstructor;n(e)?e.constructor===i&&e._state!==K?(e._onerror=null,r._settledAt(e._state,t,e._result)):r._willSettleAt(i.resolve(e),t):(r._remaining--,r._result[t]=e)},A.prototype._settledAt=function(e,t,n){var r=this,i=r.promise;i._state===K&&(r._remaining--,e===Y?T(i,n):r._result[t]=n),0===r._remaining&&v(i,r._result)},A.prototype._willSettleAt=function(e,t){var n=this;b(e,void 0,function(e){n._settledAt(Q,t,e)},function(e){n._settledAt(Y,t,e)})};var ee=x,te=_,ne=N,re=C,ie=0,oe=L;L.all=ee,L.race=te,L.resolve=ne,L.reject=re,L._setScheduler=r,L._setAsap=i,L._asap=B,L.prototype={constructor:L,then:function(e,t){var n=this,r=n._state;if(r===Q&&!e||r===Y&&!t)return this;var i=new this.constructor(u),o=n._result;if(r){var a=arguments[r-1];B(function(){I(r,i,a,o)})}else b(n,i,e,t);return i},catch:function(e){return this.then(null,e)}};var ae=M,se={Promise:oe,polyfill:ae};"function"==typeof define&&define.amd?define("es6-promise",[],function(){return se}):"undefined"!=typeof module&&module.exports?module.exports=se:void 0!==this&&(this.ES6Promise=se),ae()}.call(this);
// All licensing information regarding this source code can be found in the LICENSES.txt file.
//# sourceMappingURL=OutSystems.js.map?ts=1542135165705